!function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function s(){return Object.create(null)}function i(e){e.forEach(r)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l;function c(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function u(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function h(e){let t;return u(e,(e=>t=e))(),t}function f(e,t,n){e.$$.on_destroy.push(u(t,n))}function d(e,t,n,r){if(e){const s=p(e,t,n,r);return e[0](s)}}function p(e,t,r,s){return e[1]&&s?n(r.ctx.slice(),e[1](s(t))):r.ctx}function _(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|s[r];return e}return t.dirty|s}return t.dirty}function m(e,t,n,r,s,i){if(s){const o=p(t,n,r,i);e.p(o,s)}}function g(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function b(e){return null==e?"":e}function v(e,t,n){return e.set(n),t}function y(t){return t&&o(t.destroy)?t.destroy:e}const w="undefined"!=typeof window;let k=w?()=>window.performance.now():()=>Date.now(),x=w?e=>requestAnimationFrame(e):e;const S=new Set;function A(e){S.forEach((t=>{t.c(e)||(S.delete(t),t.f())})),0!==S.size&&x(A)}function T(e){let t;return 0===S.size&&x(A),{promise:new Promise((n=>{S.add(t={c:e,f:n})})),abort(){S.delete(t)}}}function R(e,t){e.appendChild(t)}function E(e,t,n){const r=$(e);if(!r.getElementById(t)){const e=O("style");e.id=t,e.textContent=n,I(r,e)}}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function I(e,t){R(e.head||e,t)}function M(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function O(e){return document.createElement(e)}function P(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function N(e){return document.createTextNode(e)}function L(){return N(" ")}function D(){return N("")}function V(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function j(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function H(e){const t=[];for(let n=0;n<e.length;n+=1)t.push({start:e.start(n),end:e.end(n)});return t}function F(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function q(e,t){e.value=null==t?"":t}function z(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}let U;function X(){if(void 0===U){U=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){U=!0}}return U}function Y(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=O("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=X();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=V(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{s=V(n.contentWindow,"resize",t)}),R(e,n),()=>{(r||s&&n.contentWindow)&&s(),B(n)}}function K(e,t,n){e.classList[n?"add":"remove"](t)}function G(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}const W=new Set;let Z,Q=0;function J(e,t,n,r,s,i,o,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*i(e);c+=100*e+`%{${o(r,1-r)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=$(e);W.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=function(e){const t=O("style");return I($(e),t),t}(e).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${h} ${r}ms linear ${s}ms 1 both`,Q+=1,h}function ee(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-r.length;s&&(e.style.animation=r.join(", "),Q-=s,Q||x((()=>{Q||(W.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),W.clear())})))}function te(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),s="none"===r.transform?"":r.transform;e.style.transform=`${s} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}function ne(e){Z=e}function re(){if(!Z)throw new Error("Function called outside component initialization");return Z}function se(e){re().$$.on_destroy.push(e)}function ie(){const e=re();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const s=G(t,n);r.slice().forEach((t=>{t.call(e,s)}))}}}function oe(e){return re().$$.context.get(e)}function ae(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const le=[],ce=[],ue=[],he=[],fe=Promise.resolve();let de=!1;function pe(e){ue.push(e)}function _e(e){he.push(e)}let me=!1;const ge=new Set;function be(){if(!me){me=!0;do{for(let e=0;e<le.length;e+=1){const t=le[e];ne(t),ve(t.$$)}for(ne(null),le.length=0;ce.length;)ce.pop()();for(let e=0;e<ue.length;e+=1){const t=ue[e];ge.has(t)||(ge.add(t),t())}ue.length=0}while(le.length);for(;he.length;)he.pop()();de=!1,me=!1,ge.clear()}}function ve(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(pe)}}let ye;function we(){return ye||(ye=Promise.resolve(),ye.then((()=>{ye=null}))),ye}function ke(e,t,n){e.dispatchEvent(G(`${t?"intro":"outro"}${n}`))}const xe=new Set;let Se;function Ae(){Se={r:0,c:[],p:Se}}function Te(){Se.r||i(Se.c),Se=Se.p}function Re(e,t){e&&e.i&&(xe.delete(e),e.i(t))}function Ee(e,t,n,r){if(e&&e.o){if(xe.has(e))return;xe.add(e),Se.c.push((()=>{xe.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const $e={duration:0};function Ie(n,r,s){let i,a,l=r(n,s),c=!1,u=0;function h(){i&&ee(n,i)}function f(){const{delay:r=0,duration:s=300,easing:o=t,tick:f=e,css:d}=l||$e;d&&(i=J(n,0,1,s,r,o,d,u++)),f(0,1);const p=k()+r,_=p+s;a&&a.abort(),c=!0,pe((()=>ke(n,!0,"start"))),a=T((e=>{if(c){if(e>=_)return f(1,0),ke(n,!0,"end"),h(),c=!1;if(e>=p){const t=o((e-p)/s);f(t,1-t)}}return c}))}let d=!1;return{start(){d||(d=!0,ee(n),o(l)?(l=l(),we().then(f)):f())},invalidate(){d=!1},end(){c&&(h(),c=!1)}}}function Me(n,r,s){let a,l=r(n,s),c=!0;const u=Se;function h(){const{delay:r=0,duration:s=300,easing:o=t,tick:h=e,css:f}=l||$e;f&&(a=J(n,1,0,s,r,o,f));const d=k()+r,p=d+s;pe((()=>ke(n,!1,"start"))),T((e=>{if(c){if(e>=p)return h(0,1),ke(n,!1,"end"),--u.r||i(u.c),!1;if(e>=d){const t=o((e-d)/s);h(1-t,t)}}return c}))}return u.r+=1,o(l)?we().then((()=>{l=l(),h()})):h(),{end(e){e&&l.tick&&l.tick(1,0),c&&(a&&ee(n,a),c=!1)}}}function Be(n,r,s,a){let l=r(n,s),c=a?0:1,u=null,h=null,f=null;function d(){f&&ee(n,f)}function p(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function _(r){const{delay:s=0,duration:o=300,easing:a=t,tick:_=e,css:m}=l||$e,g={start:k()+s,b:r};r||(g.group=Se,Se.r+=1),u||h?h=g:(m&&(d(),f=J(n,c,r,o,s,a,m)),r&&_(0,1),u=p(g,o),pe((()=>ke(n,r,"start"))),T((e=>{if(h&&e>h.start&&(u=p(h,o),h=null,ke(n,u.b,"start"),m&&(d(),f=J(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)_(c=u.b,1-c),ke(n,u.b,"end"),h||(u.b?d():--u.group.r||i(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),_(c,1-c)}return!(!u&&!h)})))}return{run(e){o(l)?we().then((()=>{l=l(),_(e)})):_(e)},end(){d(),u=h=null}}}function Ce(e,t){const n=t.token={};function r(e,r,s,i){if(t.token!==n)return;t.resolved=i;let o=t.ctx;void 0!==s&&(o=o.slice(),o[s]=i);const a=e&&(t.current=e)(o);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(Ae(),Ee(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Te())})):t.block.d(1),a.c(),Re(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[r]=a),l&&be()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=re();if(e.then((e=>{ne(n),r(t.then,1,t.value,e),ne(null)}),(e=>{if(ne(n),r(t.catch,2,t.error,e),ne(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var s}function Oe(e,t){e.f(),function(e,t){Ee(e,1,1,(()=>{t.delete(e.key)}))}(e,t)}function Pe(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ne(e){e&&e.c()}function Le(e,t,n,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),s||pe((()=>{const t=l.map(r).filter(o);c?c.push(...t):i(t),e.$$.on_mount=[]})),u.forEach(pe)}function De(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ve(e,t){-1===e.$$.dirty[0]&&(le.push(e),de||(de=!0,fe.then(be)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function je(t,n,r,o,a,l,c,u=[-1]){const h=Z;ne(t);const f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(f.root);let d=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),d&&Ve(t,e)),n})):[],f.update(),d=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(B)}else f.fragment&&f.fragment.c();n.intro&&Re(t.$$.fragment),Le(t,n.target,n.anchor,n.customElement),be()}ne(h)}class He{$destroy(){De(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fe=[];function qe(e,t){return{subscribe:ze(e,t).subscribe}}function ze(t,n=e){let r;const s=new Set;function i(e){if(a(t,e)&&(t=e,r)){const e=!Fe.length;for(const e of s)e[1](),Fe.push(e,t);if(e){for(let e=0;e<Fe.length;e+=2)Fe[e][0](Fe[e+1]);Fe.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,a=e){const l=[o,a];return s.add(l),1===s.size&&(r=n(i)||e),o(t),()=>{s.delete(l),0===s.size&&(r(),r=null)}}}}const Ue=ze({palette:{primary:{main:"#1b4d75",dark:"#0f2b42"},bubble:{sent:"#424242",received:"white"},bubbleText:{sent:"white",received:"black"},background:{default:"#dae7f2",textarea:"#edf4fa"}},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},typography:{fontFamily:"Montserrat",h1:{fontFamily:"Advent Pro"},h2:{fontFamily:"Advent Pro"},h3:{fontFamily:"Advent Pro"},h4:{fontFamily:"Advent Pro"},h5:{fontFamily:"Advent Pro"},fontSize:14},shape:{borderRadius:"24px",bubbleBorderRadius:"24px",textAreaBorderRadius:"48px"},outline:!1,headerTextColor:"white",buttonIconColor:"white",textAreaTextColor:"black",fontFamily:'Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif !important',fab:!1}),Xe={xs:0,sm:600,md:900,lg:1200,xl:1536};var Ye=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ke="-ms-",Ge="-moz-",We="-webkit-",Ze="comm",Qe="rule",Je="decl",et=Math.abs,tt=String.fromCharCode;function nt(e){return e.trim()}function rt(e,t,n){return e.replace(t,n)}function st(e,t){return e.indexOf(t)}function it(e,t){return 0|e.charCodeAt(t)}function ot(e,t,n){return e.slice(t,n)}function at(e){return e.length}function lt(e){return e.length}function ct(e,t){return t.push(e),e}var ut=1,ht=1,ft=0,dt=0,pt=0,_t="";function mt(e,t,n,r,s,i,o){return{value:e,root:t,parent:n,type:r,props:s,children:i,line:ut,column:ht,length:o,return:""}}function gt(e,t,n){return mt(e,t.root,t.parent,n,t.props,t.children,0)}function bt(){return pt=dt>0?it(_t,--dt):0,ht--,10===pt&&(ht=1,ut--),pt}function vt(){return pt=dt<ft?it(_t,dt++):0,ht++,10===pt&&(ht=1,ut++),pt}function yt(){return it(_t,dt)}function wt(){return dt}function kt(e,t){return ot(_t,e,t)}function xt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function St(e){return ut=ht=1,ft=at(_t=e),dt=0,[]}function At(e){return _t="",e}function Tt(e){return nt(kt(dt-1,$t(91===e?e+2:40===e?e+1:e)))}function Rt(e){for(;(pt=yt())&&pt<33;)vt();return xt(e)>2||xt(pt)>3?"":" "}function Et(e,t){for(;--t&&vt()&&!(pt<48||pt>102||pt>57&&pt<65||pt>70&&pt<97););return kt(e,wt()+(t<6&&32==yt()&&32==vt()))}function $t(e){for(;vt();)switch(pt){case e:return dt;case 34:case 39:return $t(34===e||39===e?e:pt);case 40:41===e&&$t(e);break;case 92:vt()}return dt}function It(e,t){for(;vt()&&e+pt!==57&&(e+pt!==84||47!==yt()););return"/*"+kt(t,dt-1)+"*"+tt(47===e?e:vt())}function Mt(e){for(;!xt(yt());)vt();return kt(e,dt)}function Bt(e){return At(Ct("",null,null,null,[""],e=St(e),0,[0],e))}function Ct(e,t,n,r,s,i,o,a,l){for(var c=0,u=0,h=o,f=0,d=0,p=0,_=1,m=1,g=1,b=0,v="",y=s,w=i,k=r,x=v;m;)switch(p=b,b=vt()){case 34:case 39:case 91:case 40:x+=Tt(b);break;case 9:case 10:case 13:case 32:x+=Rt(p);break;case 92:x+=Et(wt()-1,7);continue;case 47:switch(yt()){case 42:case 47:ct(Pt(It(vt(),wt()),t,n),l);break;default:x+="/"}break;case 123*_:a[c++]=at(x)*g;case 125*_:case 59:case 0:switch(b){case 0:case 125:m=0;case 59+u:d>0&&at(x)-h&&ct(d>32?Nt(x+";",r,n,h-1):Nt(rt(x," ","")+";",r,n,h-2),l);break;case 59:x+=";";default:if(ct(k=Ot(x,t,n,c,u,s,a,v,y=[],w=[],h),i),123===b)if(0===u)Ct(x,t,k,k,y,i,h,a,w);else switch(f){case 100:case 109:case 115:Ct(e,k,k,r&&ct(Ot(e,k,k,0,0,s,a,v,s,y=[],h),w),s,w,h,a,r?y:w);break;default:Ct(x,k,k,k,[""],w,h,a,w)}}c=u=d=0,_=g=1,v=x="",h=o;break;case 58:h=1+at(x),d=p;default:if(_<1)if(123==b)--_;else if(125==b&&0==_++&&125==bt())continue;switch(x+=tt(b),b*_){case 38:g=u>0?1:(x+="\f",-1);break;case 44:a[c++]=(at(x)-1)*g,g=1;break;case 64:45===yt()&&(x+=Tt(vt())),f=yt(),u=at(v=x+=Mt(wt())),b++;break;case 45:45===p&&2==at(x)&&(_=0)}}return i}function Ot(e,t,n,r,s,i,o,a,l,c,u){for(var h=s-1,f=0===s?i:[""],d=lt(f),p=0,_=0,m=0;p<r;++p)for(var g=0,b=ot(e,h+1,h=et(_=o[p])),v=e;g<d;++g)(v=nt(_>0?f[g]+" "+b:rt(b,/&\f/g,f[g])))&&(l[m++]=v);return mt(e,t,n,0===s?Qe:a,l,c,u)}function Pt(e,t,n){return mt(e,t,n,Ze,tt(pt),ot(e,2,-2),0)}function Nt(e,t,n,r){return mt(e,t,n,Je,ot(e,0,r),ot(e,r+1,-1),r)}function Lt(e,t){switch(function(e,t){return(((t<<2^it(e,0))<<2^it(e,1))<<2^it(e,2))<<2^it(e,3)}(e,t)){case 5103:return We+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return We+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return We+e+Ge+e+Ke+e+e;case 6828:case 4268:return We+e+Ke+e+e;case 6165:return We+e+Ke+"flex-"+e+e;case 5187:return We+e+rt(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return We+e+Ke+"flex-item-"+rt(e,/flex-|-self/,"")+e;case 4675:return We+e+Ke+"flex-line-pack"+rt(e,/align-content|flex-|-self/,"")+e;case 5548:return We+e+Ke+rt(e,"shrink","negative")+e;case 5292:return We+e+Ke+rt(e,"basis","preferred-size")+e;case 6060:return We+"box-"+rt(e,"-grow","")+We+e+Ke+rt(e,"grow","positive")+e;case 4554:return We+rt(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return rt(rt(rt(e,/(zoom-|grab)/,We+"$1"),/(image-set)/,We+"$1"),e,"")+e;case 5495:case 3959:return rt(e,/(image-set\([^]*)/,We+"$1$`$1");case 4968:return rt(rt(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+We+e+e;case 4095:case 3583:case 4068:case 2532:return rt(e,/(.+)-inline(.+)/,We+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(at(e)-1-t>6)switch(it(e,t+1)){case 109:if(45!==it(e,t+4))break;case 102:return rt(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+Ge+(108==it(e,t+3)?"$3":"$2-$3"))+e;case 115:return~st(e,"stretch")?Lt(rt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==it(e,t+1))break;case 6444:switch(it(e,at(e)-3-(~st(e,"!important")&&10))){case 107:return rt(e,":",":"+We)+e;case 101:return rt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+We+(45===it(e,14)?"inline-":"")+"box$3$1"+We+"$2$3$1"+Ke+"$2box$3")+e}break;case 5936:switch(it(e,t+11)){case 114:return We+e+Ke+rt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return We+e+Ke+rt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return We+e+Ke+rt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return We+e+Ke+e+e}return e}function Dt(e,t){for(var n="",r=lt(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function Vt(e,t,n,r){switch(e.type){case"@import":case Je:return e.return=e.return||e.value;case Ze:return"";case Qe:e.value=e.props.join(",")}return at(n=Dt(e.children,r))?e.return=e.value+"{"+n+"}":""}function jt(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Ht=function(e,t,n){for(var r=0,s=0;r=s,s=yt(),38===r&&12===s&&(t[n]=1),!xt(s);)vt();return kt(e,dt)},Ft=function(e,t){return At(function(e,t){var n=-1,r=44;do{switch(xt(r)){case 0:38===r&&12===yt()&&(t[n]=1),e[n]+=Ht(dt-1,t,n);break;case 2:e[n]+=Tt(r);break;case 4:if(44===r){e[++n]=58===yt()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=tt(r)}}while(r=vt());return e}(St(e),t))},qt=new WeakMap,zt=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||qt.get(n))&&!r){qt.set(e,!0);for(var s=[],i=Ft(t,s),o=n.props,a=0,l=0;a<i.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=s[a]?i[a].replace(/&\f/g,o[c]):o[c]+" "+i[a]}}},Ut=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Xt=[function(e,t,n,r){if(!e.return)switch(e.type){case Je:e.return=Lt(e.value,e.length);break;case"@keyframes":return Dt([gt(rt(e.value,"@","@"+We),e,"")],r);case Qe:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Dt([gt(rt(t,/:(read-\w+)/,":-moz-$1"),e,"")],r);case"::placeholder":return Dt([gt(rt(t,/:(plac\w+)/,":-webkit-input-$1"),e,""),gt(rt(t,/:(plac\w+)/,":-moz-$1"),e,""),gt(rt(t,/:(plac\w+)/,Ke+"input-$1"),e,"")],r)}return""}))}}],Yt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Xt;var s,i,o={},a=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l=[zt,Ut];var c,u,h=[Vt,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],f=function(e){var t=lt(e);return function(n,r,s,i){for(var o="",a=0;a<t;a++)o+=e[a](n,r,s,i)||"";return o}}(l.concat(r,h));i=function(e,t,n,r){c=n,Dt(Bt(e?e+"{"+t.styles+"}":t.styles),f),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Ye({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return d.sheet.hydrate(a),d};var Kt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gt=/[A-Z]|^ms/g,Wt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Zt=function(e){return 45===e.charCodeAt(1)},Qt=function(e){return null!=e&&"boolean"!=typeof e},Jt=jt((function(e){return Zt(e)?e:e.replace(Gt,"-$&").toLowerCase()})),en=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Wt,(function(e,t,n){return nn={name:t,styles:n,next:nn},t}))}return 1===Kt[e]||Zt(e)||"number"!=typeof t||0===t?t:t+"px"};function tn(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return nn={name:n.name,styles:n.styles,next:nn},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)nn={name:r.name,styles:r.styles,next:nn},r=r.next;var s=n.styles+";";return s}return function(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=tn(e,t,n[s])+";";else for(var i in n){var o=n[i];if("object"!=typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":Qt(o)&&(r+=Jt(i)+":"+en(i,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=tn(e,t,o);switch(i){case"animation":case"animationName":r+=Jt(i)+":"+a+";";break;default:r+=i+"{"+a+"}"}}else for(var l=0;l<o.length;l++)Qt(o[l])&&(r+=Jt(i)+":"+en(i,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=nn,o=n(e);return nn=i,tn(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var nn,rn=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var sn=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,s="";nn=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,s+=tn(n,t,i)):s+=i[0];for(var o=1;o<e.length;o++)s+=tn(n,t,e[o]),r&&(s+=i[o]);rn.lastIndex=0;for(var a,l="";null!==(a=rn.exec(s));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,s=e.length;s>=4;++r,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(s){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(s)+l;return{name:c,styles:s,next:nn}};function on(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var an=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}};function ln(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function cn(e,t,n){var r=[],s=on(e,r,n);return r.length<2?n:s+t(r)}var un=function e(t){for(var n="",r=0;r<t.length;r++){var s=t[r];if(null!=s){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(n&&(n+=" "),n+=i)}}return n},hn=function(e){var t=Yt(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=sn(n,t.registered,void 0);return an(t,s,!1),t.key+"-"+s.name};return{css:n,cx:function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return cn(t.registered,n,un(r))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=sn(n,t.registered);ln(t,s)},keyframes:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=sn(n,t.registered),i="animation-"+s.name;return ln(t,{name:s.name,styles:"@keyframes "+i+"{"+s.styles+"}"}),i},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:on.bind(null,t.registered),merge:cn.bind(null,t.registered,n)}}({key:"css"}),fn=hn.css;const dn=qe(!1,(e=>{if("undefined"==typeof window)return()=>{};const t=`(max-width: ${Xe.sm}px)`,n=window.matchMedia(t);function r(t){e(t.matches)}return e(n.matches),n.addEventListener("change",r),()=>n.removeEventListener("change",r)})),pn=qe(!1,(e=>{if("undefined"==typeof window)return()=>{};const t=`(max-width: ${Xe.md}px)`,n=window.matchMedia(t);function r(t){e(t.matches)}return e(n.matches),n.addEventListener("change",r),()=>n.removeEventListener("change",r)})),_n=qe(!1,(e=>{if("undefined"==typeof window)return()=>{};const t=`(max-width: ${Xe.lg}px)`,n=window.matchMedia(t);function r(t){e(t.matches)}return e(n.matches),n.addEventListener("change",r),()=>n.removeEventListener("change",r)}));function mn(e){return"number"==typeof e?`${e}px`:e}var gn=(e,t)=>{let n=t;return Object.entries(n).forEach((([t,n])=>{n&&e.style.setProperty(`--s-${t}`,mn(n))})),{update(t){Object.entries(t).forEach((([t,r])=>{r&&(e.style.setProperty(`--s-${t}`,mn(r)),delete n[t])})),Object.keys(n).forEach((t=>e.style.removeProperty(`--s-${t}`))),n=t}}};function bn(e){E(e,"svelte-89qv9b",'.s-icon{color:var(--theme-icons-active);font-size:var(--s-icon-size);transform:rotate(var(--s-icon-rotate));line-height:1;letter-spacing:normal;text-transform:none;display:inline-flex;font-feature-settings:"liga";justify-content:center;position:relative;align-items:center;text-indent:0;vertical-align:middle;cursor:inherit;user-select:none;direction:ltr;transition:0.3s cubic-bezier(0.25, 0.8, 0.5, 1), visibility 0s}.s-icon.disabled{color:var(--theme-icons-inactive)}.s-icon.spin{animation:s-icon-spin 1s linear infinite}.s-icon>svg{fill:currentColor}@keyframes s-icon-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}')}function vn(e){let t,n,r,s=e[10]&&yn(e);return{c(){t=P("svg"),n=P("path"),s&&s.c(),j(n,"d",e[9]),j(t,"xmlns","http://www.w3.org/2000/svg"),j(t,"width",e[0]),j(t,"height",e[1]),j(t,"viewBox",r="0 0 "+e[4]+" "+e[5])},m(e,r){M(e,t,r),R(t,n),s&&s.m(n,null)},p(e,i){e[10]?s?s.p(e,i):(s=yn(e),s.c(),s.m(n,null)):s&&(s.d(1),s=null),512&i&&j(n,"d",e[9]),1&i&&j(t,"width",e[0]),2&i&&j(t,"height",e[1]),48&i&&r!==(r="0 0 "+e[4]+" "+e[5])&&j(t,"viewBox",r)},d(e){e&&B(t),s&&s.d()}}}function yn(e){let t,n;return{c(){t=P("title"),n=N(e[10])},m(e,r){M(e,t,r),R(t,n)},p(e,t){1024&t&&F(n,e[10])},d(e){e&&B(t)}}}function wn(e){let t,n,r,s,i,a,l,c=e[9]&&vn(e);const u=e[13].default,h=d(u,e,e[12],null);return{c(){t=O("i"),c&&c.c(),n=L(),h&&h.c(),j(t,"aria-hidden","true"),j(t,"class",r="s-icon "+e[2]),j(t,"aria-label",e[10]),j(t,"aria-disabled",e[8]),j(t,"style",e[11]),K(t,"spin",e[7]),K(t,"disabled",e[8])},m(r,o){M(r,t,o),c&&c.m(t,null),R(t,n),h&&h.m(t,null),i=!0,a||(l=y(s=gn.call(null,t,{"icon-size":e[3],"icon-rotate":`${e[6]}deg`})),a=!0)},p(e,[a]){e[9]?c?c.p(e,a):(c=vn(e),c.c(),c.m(t,n)):c&&(c.d(1),c=null),h&&h.p&&(!i||4096&a)&&m(h,u,e,e[12],i?_(u,e[12],a,null):g(e[12]),null),(!i||4&a&&r!==(r="s-icon "+e[2]))&&j(t,"class",r),(!i||1024&a)&&j(t,"aria-label",e[10]),(!i||256&a)&&j(t,"aria-disabled",e[8]),(!i||2048&a)&&j(t,"style",e[11]),s&&o(s.update)&&72&a&&s.update.call(null,{"icon-size":e[3],"icon-rotate":`${e[6]}deg`}),132&a&&K(t,"spin",e[7]),260&a&&K(t,"disabled",e[8])},i(e){i||(Re(h,e),i=!0)},o(e){Ee(h,e),i=!1},d(e){e&&B(t),c&&c.d(),h&&h.d(e),a=!1,l()}}}function kn(e,t,n){let{$$slots:r={},$$scope:s}=t,{class:i=""}=t,{size:o="24px"}=t,{width:a=o}=t,{height:l=o}=t,{viewWidth:c="24"}=t,{viewHeight:u="24"}=t,{rotate:h=0}=t,{spin:f=!1}=t,{disabled:d=!1}=t,{path:p=null}=t,{label:_=null}=t,{style:m=null}=t;return e.$$set=e=>{"class"in e&&n(2,i=e.class),"size"in e&&n(3,o=e.size),"width"in e&&n(0,a=e.width),"height"in e&&n(1,l=e.height),"viewWidth"in e&&n(4,c=e.viewWidth),"viewHeight"in e&&n(5,u=e.viewHeight),"rotate"in e&&n(6,h=e.rotate),"spin"in e&&n(7,f=e.spin),"disabled"in e&&n(8,d=e.disabled),"path"in e&&n(9,p=e.path),"label"in e&&n(10,_=e.label),"style"in e&&n(11,m=e.style),"$$scope"in e&&n(12,s=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&(n(0,a=o),n(1,l=o))},[a,l,i,o,c,u,h,f,d,p,_,m,s,r]}class xn extends He{constructor(e){super(),je(this,e,kn,wn,a,{class:2,size:3,width:0,height:1,viewWidth:4,viewHeight:5,rotate:6,spin:7,disabled:8,path:9,label:10,style:11},bn)}}let Sn=36,An="";for(;Sn--;)An+=Sn.toString(36);function Tn(e){const t=e-1;return t*t*t+1}function Rn(e){return--e*e*e*e*e+1}function En(e,{delay:n=0,duration:r=400,easing:s=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:s,css:e=>"opacity: "+e*i}}function $n(e){var{fallback:t}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["fallback"]);const s=new Map,i=new Map;function a(e,s,i){return(a,l)=>(e.set(l.key,{rect:a.getBoundingClientRect()}),()=>{if(s.has(l.key)){const{rect:e}=s.get(l.key);return s.delete(l.key),function(e,t,s){const{delay:i=0,duration:a=(e=>30*Math.sqrt(e)),easing:l=Tn}=n(n({},r),s),c=t.getBoundingClientRect(),u=e.left-c.left,h=e.top-c.top,f=e.width/c.width,d=e.height/c.height,p=Math.sqrt(u*u+h*h),_=getComputedStyle(t),m="none"===_.transform?"":_.transform,g=+_.opacity;return{delay:i,duration:o(a)?a(p):a,easing:l,css:(e,t)=>`\n\t\t\t\topacity: ${e*g};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${m} translate(${t*u}px,${t*h}px) scale(${e+(1-e)*f}, ${e+(1-e)*d});\n\t\t\t`}}(e,a,l)}return e.delete(l.key),t&&t(a,l,i)})}return[a(i,s,!1),a(s,i,!0)]}var In="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",Mn="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z";function Bn(e){E(e,"svelte-8ha3id",".text.svelte-8ha3id{margin-left:16px}.iconButton.svelte-8ha3id{cursor:pointer;background-color:transparent;border-radius:50px;color:white;margin-right:16px;margin-bottom:0;border:0 transparent}.headerDiv.svelte-8ha3id{width:100%;height:56px;min-height:56px;display:flex;justify-content:space-between;align-items:center}")}function Cn(e){let t,n,r,s,i,o,a,l,c,u,h;return a=new xn({props:{path:e[1]?In:Mn}}),{c(){t=O("div"),n=O("div"),r=N(e[0]),s=L(),i=O("div"),o=O("button"),Ne(a.$$.fragment),j(n,"class","text svelte-8ha3id"),j(o,"class","iconButton svelte-8ha3id"),z(i,"display","flex"),z(i,"align-items","center"),j(t,"class",l=b([e[2],"headerDiv"].join(" "))+" svelte-8ha3id")},m(l,f){M(l,t,f),R(t,n),R(n,r),R(t,s),R(t,i),R(i,o),Le(a,o,null),c=!0,u||(h=V(o,"click",e[6]),u=!0)},p(e,[n]){(!c||1&n)&&F(r,e[0]);const s={};2&n&&(s.path=e[1]?In:Mn),a.$set(s),(!c||4&n&&l!==(l=b([e[2],"headerDiv"].join(" "))+" svelte-8ha3id"))&&j(t,"class",l)},i(e){c||(Re(a.$$.fragment,e),c=!0)},o(e){Ee(a.$$.fragment,e),c=!1},d(e){e&&B(t),De(a),u=!1,h()}}}function On(e,t,n){let r,s;f(e,Ue,(e=>n(4,r=e))),f(e,dn,(e=>n(5,s=e)));let{title:i}=t,{isOpened:o}=t;const a=ie();function l(){a("open",{status:o?"close":"open"})}let c;return e.$$set=e=>{"title"in e&&n(0,i=e.title),"isOpened"in e&&n(1,o=e.isOpened)},e.$$.update=()=>{48&e.$$.dirty&&n(2,c=fn`background-color: ${r.palette.primary.dark};color: ${r.headerTextColor};border-radius: ${s?0:r.shape.borderRadius} ${s?0:r.shape.borderRadius} 0 0;`)},[i,o,c,l,r,s,()=>l()]}class Pn extends He{constructor(e){super(),je(this,e,On,Cn,a,{title:0,isOpened:1},Bn)}}function Nn(e){E(e,"svelte-1hwjdnd",".bodyDiv.svelte-1hwjdnd{display:flex;flex-direction:column-reverse;flex-grow:1;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none;transition:all 0.5s ease-in-out}.bodyDiv.svelte-1hwjdnd::-webkit-scrollbar{display:none}")}function Ln(e){let t,n,r;const s=e[3].default,i=d(s,e,e[2],null);return{c(){t=O("div"),i&&i.c(),j(t,"class",n=b([e[0].bodyDiv,"bodyDiv"].join(" "))+" svelte-1hwjdnd")},m(e,n){M(e,t,n),i&&i.m(t,null),r=!0},p(e,[o]){i&&i.p&&(!r||4&o)&&m(i,s,e,e[2],r?_(s,e[2],o,null):g(e[2]),null),(!r||1&o&&n!==(n=b([e[0].bodyDiv,"bodyDiv"].join(" "))+" svelte-1hwjdnd"))&&j(t,"class",n)},i(e){r||(Re(i,e),r=!0)},o(e){Ee(i,e),r=!1},d(e){e&&B(t),i&&i.d(e)}}}function Dn(e,t,n){let r;f(e,Ue,(e=>n(1,r=e)));let{$$slots:s={},$$scope:i}=t,o={};return e.$$set=e=>{"$$scope"in e&&n(2,i=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(0,o={bodyDiv:fn`background-color: ${r.palette.background.default};`})},[o,r,i,s]}class Vn extends He{constructor(e){super(),je(this,e,Dn,Ln,a,{},Nn)}}function jn(e){let t,n,r=`${e[1]} `;return{c(){t=O("a"),n=N(r),j(t,"target","_blank"),j(t,"class",e[3]),j(t,"rel","noreferrer"),j(t,"href",e[2])},m(e,r){M(e,t,r),R(t,n)},p(e,s){2&s&&r!==(r=`${e[1]} `)&&F(n,r),4&s&&j(t,"href",e[2])},d(e){e&&B(t)}}}function Hn(e){let t,n,r=`${e[1]} `;return{c(){t=O("a"),n=N(r),j(t,"target","_blank"),j(t,"class",e[3]),j(t,"rel","noreferrer"),j(t,"href",e[1])},m(e,r){M(e,t,r),R(t,n)},p(e,s){2&s&&r!==(r=`${e[1]} `)&&F(n,r),2&s&&j(t,"href",e[1])},d(e){e&&B(t)}}}function Fn(e){let t,n=`${e[1]} `;return{c(){t=N(n)},m(e,n){M(e,t,n)},p(e,r){2&r&&n!==(n=`${e[1]} `)&&F(t,n)},d(e){e&&B(t)}}}function qn(t){let n;function r(e,t){return"text"===e[0]?Fn:"link"===e[0]?Hn:"file"===e[0]?jn:void 0}let s=r(t),i=s&&s(t);return{c(){i&&i.c(),n=D()},m(e,t){i&&i.m(e,t),M(e,n,t)},p(e,[t]){s===(s=r(e))&&i?i.p(e,t):(i&&i.d(1),i=s&&s(e),i&&(i.c(),i.m(n.parentNode,n)))},i:e,o:e,d(e){i&&i.d(e),e&&B(n)}}}function zn(e,t,n){let{type:r}=t,{content:s}=t,{downloadLink:i}=t;const o=fn`text-decoration: underline;`;return e.$$set=e=>{"type"in e&&n(0,r=e.type),"content"in e&&n(1,s=e.content),"downloadLink"in e&&n(2,i=e.downloadLink)},[r,s,i,o]}class Un extends He{constructor(e){super(),je(this,e,zn,qn,a,{type:0,content:1,downloadLink:2})}}function Xn(e){const t={mp4:"video/mp4",ogv:"video/ogg",webm:"video/webm"},n=(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1];if(n in t)return t[n]}async function Yn(e){return new Promise(((t,n)=>{if(e){const n=new Image;n.addEventListener("load",(()=>{t(n)}),{once:!0}),n.addEventListener("error",(()=>{t()}),{once:!0}),n.src=e}else t()}))}function Kn(e){E(e,"svelte-fde6bj",".poster.svelte-fde6bj{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}")}function Gn(t){let n,r;return{c(){n=O("img"),c(n.src,r=t[0])||j(n,"src",r),j(n,"class","poster svelte-fde6bj"),j(n,"alt","poster"),j(n,"onerror","this.style.display='none'")},m(e,t){M(e,n,t)},p(e,[t]){1&t&&!c(n.src,r=e[0])&&j(n,"src",r)},i:e,o:e,d(e){e&&B(n)}}}function Wn(e,t,n){let{src:r}=t;return e.$$set=e=>{"src"in e&&n(0,r=e.src)},[r]}class Zn extends He{constructor(e){super(),je(this,e,Wn,Gn,a,{src:0},Kn)}}function Qn(e){E(e,"svelte-h6eqmh",".overlay.svelte-h6eqmh{z-index:2147483647;position:absolute;width:100%;height:100%;top:0;left:0}")}function Jn(e){let t,n;const r=e[1].default,s=d(r,e,e[0],null);return{c(){t=O("div"),s&&s.c(),j(t,"class","overlay svelte-h6eqmh")},m(e,r){M(e,t,r),s&&s.m(t,null),n=!0},p(e,[t]){s&&s.p&&(!n||1&t)&&m(s,r,e,e[0],n?_(r,e[0],t,null):g(e[0]),null)},i(e){n||(Re(s,e),n=!0)},o(e){Ee(s,e),n=!1},d(e){e&&B(t),s&&s.d(e)}}}function er(e,t,n){let{$$slots:r={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(0,s=e.$$scope)},[s,r]}class tr extends He{constructor(e){super(),je(this,e,er,Jn,a,{},Qn)}}function nr(e){E(e,"svelte-1na3hbp",".play-pause-icon.svelte-1na3hbp{position:absolute}")}function rr(t){let n,r,s,i,o,a,l,c,u;return{c(){n=O("div"),r=P("svg"),s=P("path"),a=P("path"),j(s,"visibility",i=t[2]?"hidden":"visible"),j(s,"d","M40 29v42M60 29v42"),j(s,"stroke",o=t[3].iconColor),j(s,"stroke-width","5"),j(a,"visibility",l=t[2]?"visible":"hidden"),j(a,"d","M40 29v42l26-21-26-21z"),j(a,"fill",c=t[1]?t[3].iconColor:"none"),j(a,"stroke",u=t[3].iconColor),j(a,"stroke-width","5"),j(r,"viewBox","0 0 100 100"),j(r,"width","100%"),j(r,"stroke-linecap","round"),j(r,"stroke-linejoin","round"),j(n,"class","play-pause-icon svelte-1na3hbp"),z(n,"width",t[0])},m(e,t){M(e,n,t),R(n,r),R(r,s),R(r,a)},p(e,[t]){4&t&&i!==(i=e[2]?"hidden":"visible")&&j(s,"visibility",i),8&t&&o!==(o=e[3].iconColor)&&j(s,"stroke",o),4&t&&l!==(l=e[2]?"visible":"hidden")&&j(a,"visibility",l),10&t&&c!==(c=e[1]?e[3].iconColor:"none")&&j(a,"fill",c),8&t&&u!==(u=e[3].iconColor)&&j(a,"stroke",u),1&t&&z(n,"width",e[0])},i:e,o:e,d(e){e&&B(n)}}}function sr(e,t,n){let r,{size:s="100%"}=t,{filled:i=!1}=t,{paused:o}=t;const a=oe("config");return f(e,a,(e=>n(3,r=e))),e.$$set=e=>{"size"in e&&n(0,s=e.size),"filled"in e&&n(1,i=e.filled),"paused"in e&&n(2,o=e.paused)},[s,i,o,r,a]}class ir extends He{constructor(e){super(),je(this,e,sr,rr,a,{size:0,filled:1,paused:2},nr)}}function or(e){E(e,"svelte-1yuiuyr",".player-icon.svelte-1yuiuyr{box-sizing:border-box;position:relative;width:100%;height:100%;border-style:none;border-radius:9999px;border-width:2px}")}function ar(e){let t,n,r,s;return n=new ir({props:{paused:!0}}),{c(){t=O("div"),Ne(n.$$.fragment),j(t,"class","player-icon svelte-1yuiuyr"),z(t,"background-color",e[1].color),z(t,"border-color",e[1].focusColor)},m(e,r){M(e,t,r),Le(n,t,null),s=!0},p(e,n){(!s||2&n)&&z(t,"background-color",e[1].color),(!s||2&n)&&z(t,"border-color",e[1].focusColor)},i(e){s||(Re(n.$$.fragment,e),pe((()=>{r||(r=Be(t,En,{duration:500},!0)),r.run(1)})),s=!0)},o(e){Ee(n.$$.fragment,e),r||(r=Be(t,En,{duration:500},!1)),r.run(0),s=!1},d(e){e&&B(t),De(n),e&&r&&r.end()}}}function lr(e){let t,n,r=!e[0]&&ar(e);return{c(){r&&r.c(),t=D()},m(e,s){r&&r.m(e,s),M(e,t,s),n=!0},p(e,[n]){e[0]?r&&(Ae(),Ee(r,1,1,(()=>{r=null})),Te()):r?(r.p(e,n),1&n&&Re(r,1)):(r=ar(e),r.c(),Re(r,1),r.m(t.parentNode,t))},i(e){n||(Re(r),n=!0)},o(e){Ee(r),n=!1},d(e){r&&r.d(e),e&&B(t)}}}function cr(e,t,n){let r,{hidden:s}=t;const i=oe("config");return f(e,i,(e=>n(1,r=e))),e.$$set=e=>{"hidden"in e&&n(0,s=e.hidden)},[s,r,i]}class ur extends He{constructor(e){super(),je(this,e,cr,lr,a,{hidden:0},or)}}function hr(e){E(e,"svelte-1q5dh4a",".spinner.svelte-1q5dh4a{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.circle.svelte-1q5dh4a{box-sizing:border-box;position:absolute;height:100%;width:100%;border-width:2px;border-style:solid;border-radius:50%}.bg.svelte-1q5dh4a{opacity:0.25}.rotating.svelte-1q5dh4a{animation:1s linear 0s infinite normal none running svelte-1q5dh4a-rotate}@keyframes svelte-1q5dh4a-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}")}function fr(e){let t,n,r,s,i,o,a;return{c(){t=O("div"),n=O("div"),r=L(),s=O("div"),j(n,"class","circle bg svelte-1q5dh4a"),z(n,"border-color",e[1]),j(s,"class","circle rotating svelte-1q5dh4a"),z(s,"border-color",e[1]+" "+e[1]+" transparent transparent"),j(t,"class","spinner svelte-1q5dh4a"),z(t,"width",e[0]),z(t,"height",e[0])},m(e,i){M(e,t,i),R(t,n),R(t,r),R(t,s),a=!0},p(e,r){(!a||2&r)&&z(n,"border-color",e[1]),(!a||2&r)&&z(s,"border-color",e[1]+" "+e[1]+" transparent transparent"),(!a||1&r)&&z(t,"width",e[0]),(!a||1&r)&&z(t,"height",e[0])},i(e){a||(pe((()=>{o&&o.end(1),i=Ie(t,En,{delay:500,duration:500}),i.start()})),a=!0)},o(e){i&&i.invalidate(),o=Me(t,En,{duration:100}),a=!1},d(e){e&&B(t),e&&o&&o.end()}}}function dr(e){let t,n,r=!e[2]&&fr(e);return{c(){r&&r.c(),t=D()},m(e,s){r&&r.m(e,s),M(e,t,s),n=!0},p(e,[n]){e[2]?r&&(Ae(),Ee(r,1,1,(()=>{r=null})),Te()):r?(r.p(e,n),4&n&&Re(r,1)):(r=fr(e),r.c(),Re(r,1),r.m(t.parentNode,t))},i(e){n||(Re(r),n=!0)},o(e){Ee(r),n=!1},d(e){r&&r.d(e),e&&B(t)}}}function pr(e,t,n){let{size:r="60px"}=t,{color:s="#FFF"}=t,{hidden:i=!1}=t;return e.$$set=e=>{"size"in e&&n(0,r=e.size),"color"in e&&n(1,s=e.color),"hidden"in e&&n(2,i=e.hidden)},[r,s,i]}class _r extends He{constructor(e){super(),je(this,e,pr,dr,a,{size:0,color:1,hidden:2},hr)}}function mr(e){E(e,"svelte-1s6qb6f",".center-icons.svelte-1s6qb6f{position:absolute;width:100%;height:100%;left:50%;top:50%;transform:translate(-50%, -50%)}")}function gr(e){let t,n,r,s,i,o;return n=new ur({props:{hidden:!e[2]}}),s=new _r({props:{hidden:!e[1],color:e[0]?e[4].color:e[4].iconColor,size:e[3]+10+"px"}}),{c(){t=O("div"),Ne(n.$$.fragment),r=L(),Ne(s.$$.fragment),j(t,"class","center-icons svelte-1s6qb6f"),z(t,"width",e[4].centerIconSize),z(t,"height",e[4].centerIconSize),pe((()=>e[6].call(t)))},m(a,l){M(a,t,l),Le(n,t,null),R(t,r),Le(s,t,null),i=Y(t,e[6].bind(t)),o=!0},p(e,[r]){const i={};4&r&&(i.hidden=!e[2]),n.$set(i);const a={};2&r&&(a.hidden=!e[1]),17&r&&(a.color=e[0]?e[4].color:e[4].iconColor),8&r&&(a.size=e[3]+10+"px"),s.$set(a),(!o||16&r)&&z(t,"width",e[4].centerIconSize),(!o||16&r)&&z(t,"height",e[4].centerIconSize)},i(e){o||(Re(n.$$.fragment,e),Re(s.$$.fragment,e),o=!0)},o(e){Ee(n.$$.fragment,e),Ee(s.$$.fragment,e),o=!1},d(e){e&&B(t),De(n),De(s),i()}}}function br(e,t,n){let r,s,{isBuffering:i}=t,{isSpinnerVisible:o}=t,{isIconVisible:a}=t;const l=oe("config");return f(e,l,(e=>n(4,r=e))),e.$$set=e=>{"isBuffering"in e&&n(0,i=e.isBuffering),"isSpinnerVisible"in e&&n(1,o=e.isSpinnerVisible),"isIconVisible"in e&&n(2,a=e.isIconVisible)},[i,o,a,s,r,l,function(){s=this.offsetWidth,n(3,s)}]}class vr extends He{constructor(e){super(),je(this,e,br,gr,a,{isBuffering:0,isSpinnerVisible:1,isIconVisible:2},mr)}}function yr(e){E(e,"svelte-do64tg",".controls.svelte-do64tg{position:relative;box-sizing:border-box;min-height:40px;max-height:150px;top:100%;transform:translateY(-100%);padding:10px;display:flex;gap:6px;visibility:visible;transition:transform 0.5s ease, visibility 0.5s linear}.hidden.svelte-do64tg{visibility:hidden;transform:translateY(100%)}")}function wr(e){let t,n,r,s;const o=e[9].default,a=d(o,e,e[8],null);return{c(){t=O("div"),a&&a.c(),j(t,"class","controls svelte-do64tg"),z(t,"height",e[2].controlsHeight),z(t,"background","linear-gradient(rgba(0,0,0,0), rgba(0,0,0,.2) 80%)"),K(t,"hidden",e[0])},m(i,o){M(i,t,o),a&&a.m(t,null),n=!0,r||(s=[V(window,"pointermove",e[10]),V(window,"keydown",e[11]),V(t,"pointerover",e[4]),V(t,"pointerout",e[5]),V(t,"transitionend",e[6])],r=!0)},p(e,[r]){a&&a.p&&(!n||256&r)&&m(a,o,e,e[8],n?_(o,e[8],r,null):g(e[8]),null),(!n||4&r)&&z(t,"height",e[2].controlsHeight),1&r&&K(t,"hidden",e[0])},i(e){n||(Re(a,e),n=!0)},o(e){Ee(a,e),n=!1},d(e){e&&B(t),a&&a.d(e),r=!1,i(s)}}}function kr(e,t,n){let r,{$$slots:s={},$$scope:i}=t,{hidden:o}=t,{isPointerOver:a}=t;const l=oe("config");let c,u;f(e,l,(e=>n(2,r=e)));return e.$$set=e=>{"hidden"in e&&n(0,o=e.hidden),"isPointerOver"in e&&n(7,a=e.isPointerOver),"$$scope"in e&&n(8,i=e.$$scope)},[o,u,r,l,function(e){n(7,a=!0)},function(e){n(7,a=!1)},function(e){"visibility"==e.propertyName&&(!o&&u?c.focus({preventScroll:!0}):c=document.activeElement)},a,i,s,()=>n(1,u=!1),e=>n(1,u="Tab"===e.code)]}class xr extends He{constructor(e){super(),je(this,e,kr,wr,a,{hidden:0,isPointerOver:7},yr)}}function Sr(e,t,n){var r=!1,s=!1;return function(){s=n&&!r;var i=this,o=arguments;if(r||(r=!0,setTimeout((function(){if(r=!1,!n)return e.apply(i,o)}),t)),s)return s=!1,e.apply(this,arguments)}}function Ar(e){E(e,"svelte-1539bnd",".bar.svelte-1539bnd{position:absolute;top:0;width:100%;height:100%;transform-origin:0 0;border-style:solid;border-width:1px}")}function Tr(t){let n;return{c(){n=O("div"),j(n,"class","bar svelte-1539bnd"),z(n,"background-color",t[0]),z(n,"border-color",t[0]),z(n,"opacity",t[1]),z(n,"transform","scaleX("+t[2]+")")},m(e,t){M(e,n,t)},p(e,[t]){1&t&&z(n,"background-color",e[0]),1&t&&z(n,"border-color",e[0]),2&t&&z(n,"opacity",e[1]),4&t&&z(n,"transform","scaleX("+e[2]+")")},i:e,o:e,d(e){e&&B(n)}}}function Rr(e,t,n){let{color:r="white"}=t,{opacity:s=1}=t,{value:i=0}=t;return e.$$set=e=>{"color"in e&&n(0,r=e.color),"opacity"in e&&n(1,s=e.opacity),"value"in e&&n(2,i=e.value)},[r,s,i]}class Er extends He{constructor(e){super(),je(this,e,Rr,Tr,a,{color:0,opacity:1,value:2},Ar)}}function $r(e){E(e,"svelte-mhutnt",".chunk-bar.svelte-mhutnt{position:absolute;width:100%;height:100%}.chunk.svelte-mhutnt{position:absolute;width:100%;height:100%;transform-origin:0 0}")}function Ir(e,t,n){const r=e.slice();return r[3]=t[n],r}function Mr(e){let t;return{c(){t=O("div"),j(t,"class","chunk svelte-mhutnt"),z(t,"background-color",e[0]),z(t,"opacity",e[1]),z(t,"transform","translateX("+100*e[3].start+"%) scaleX("+(e[3].end-e[3].start)+")")},m(e,n){M(e,t,n)},p(e,n){1&n&&z(t,"background-color",e[0]),2&n&&z(t,"opacity",e[1]),4&n&&z(t,"transform","translateX("+100*e[3].start+"%) scaleX("+(e[3].end-e[3].start)+")")},d(e){e&&B(t)}}}function Br(t){let n,r=t[2],s=[];for(let e=0;e<r.length;e+=1)s[e]=Mr(Ir(t,r,e));return{c(){n=O("div");for(let e=0;e<s.length;e+=1)s[e].c();j(n,"class","chunk-bar svelte-mhutnt")},m(e,t){M(e,n,t);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(7&t){let i;for(r=e[2],i=0;i<r.length;i+=1){const o=Ir(e,r,i);s[i]?s[i].p(o,t):(s[i]=Mr(o),s[i].c(),s[i].m(n,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},i:e,o:e,d(e){e&&B(n),C(s,e)}}}function Cr(e,t,n){let{color:r="white"}=t,{opacity:s=1}=t,{ranges:i=[]}=t;return e.$$set=e=>{"color"in e&&n(0,r=e.color),"opacity"in e&&n(1,s=e.opacity),"ranges"in e&&n(2,i=e.ranges)},[r,s,i]}class Or extends He{constructor(e){super(),je(this,e,Cr,Br,a,{color:0,opacity:1,ranges:2},$r)}}function Pr(e){E(e,"svelte-kj06qu",".thumb-wrapper.svelte-kj06qu{position:absolute;width:100%;height:100%;top:0;pointer-events:none}.thumb.svelte-kj06qu{position:relative;border-style:none;border-radius:50%;border-width:2px;top:50%;transform:translate(-50%, -50%)}.active.svelte-kj06qu{border-style:solid}")}function Nr(t){let n,r;return{c(){n=O("div"),r=O("div"),j(r,"class","thumb svelte-kj06qu"),z(r,"width",t[2].thumbSize),z(r,"height",t[2].thumbSize),z(r,"background-color",t[2].color),z(r,"border-color",t[2].color),K(r,"active",t[0]),j(n,"class","thumb-wrapper svelte-kj06qu"),z(n,"transform","translateX("+t[1]+"%)")},m(e,t){M(e,n,t),R(n,r)},p(e,[t]){4&t&&z(r,"width",e[2].thumbSize),4&t&&z(r,"height",e[2].thumbSize),4&t&&z(r,"background-color",e[2].color),4&t&&z(r,"border-color",e[2].color),1&t&&K(r,"active",e[0]),2&t&&z(n,"transform","translateX("+e[1]+"%)")},i:e,o:e,d(e){e&&B(n)}}}function Lr(e,t,n){let r,s,{positionValue:i=0}=t,{active:o=!1}=t;const a=oe("config");return f(e,a,(e=>n(2,s=e))),e.$$set=e=>{"positionValue"in e&&n(4,i=e.positionValue),"active"in e&&n(0,o=e.active)},e.$$.update=()=>{16&e.$$.dirty&&n(1,r=100*i)},[o,r,s,a,i]}class Dr extends He{constructor(e){super(),je(this,e,Lr,Nr,a,{positionValue:4,active:0},Pr)}}function Vr(e){E(e,"svelte-wdgqi3",".playbar.svelte-wdgqi3.svelte-wdgqi3{position:relative;min-width:50px;height:100%;flex-grow:4;cursor:pointer;outline:none;touch-action:none}.playbar.svelte-wdgqi3:focus .bars.svelte-wdgqi3{outline-style:dotted}.bars.svelte-wdgqi3.svelte-wdgqi3{position:relative;width:100%;top:50%;transform:translateY(-50%);border-radius:9999px;overflow:hidden;outline-offset:3px;outline-width:2px;outline-style:none}.chunkbars.svelte-wdgqi3.svelte-wdgqi3{position:absolute;width:100%;height:30%}")}function jr(e){let t,n,r,s,i;return n=new Or({props:{color:e[1].bufferedColor,opacity:1,ranges:e[4]}}),s=new Or({props:{color:e[1].color,opacity:1,ranges:e[5]}}),{c(){t=O("div"),Ne(n.$$.fragment),r=L(),Ne(s.$$.fragment),j(t,"class","chunkbars svelte-wdgqi3")},m(e,o){M(e,t,o),Le(n,t,null),R(t,r),Le(s,t,null),i=!0},p(e,t){const r={};2&t&&(r.color=e[1].bufferedColor),16&t&&(r.ranges=e[4]),n.$set(r);const i={};2&t&&(i.color=e[1].color),32&t&&(i.ranges=e[5]),s.$set(i)},i(e){i||(Re(n.$$.fragment,e),Re(s.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),Ee(s.$$.fragment,e),i=!1},d(e){e&&B(t),De(n),De(s)}}}function Hr(e){let t,n,r,s,o,a,l,c,u,h,f;r=new Er({props:{color:e[1].barsBgColor,opacity:1,value:1}}),o=new Er({props:{color:e[1].color,value:e[6]}});let d=e[1].chunkBars&&jr(e);return c=new Dr({props:{positionValue:e[6],active:e[3]}}),{c(){t=O("div"),n=O("div"),Ne(r.$$.fragment),s=L(),Ne(o.$$.fragment),a=L(),d&&d.c(),l=L(),Ne(c.$$.fragment),j(n,"class","bars svelte-wdgqi3"),z(n,"height",e[1].trackHeight),z(n,"outline-color",e[1].focusColor),j(t,"class","playbar svelte-wdgqi3"),j(t,"tabindex","0"),z(t,"margin","0 "+e[0])},m(i,p){M(i,t,p),R(t,n),Le(r,n,null),R(n,s),Le(o,n,null),R(n,a),d&&d.m(n,null),R(t,l),Le(c,t,null),e[18](t),u=!0,h||(f=[V(window,"pointermove",e[9]),V(window,"pointerup",e[10]),V(t,"pointerdown",e[8])],h=!0)},p(e,[s]){const i={};2&s&&(i.color=e[1].barsBgColor),r.$set(i);const a={};2&s&&(a.color=e[1].color),64&s&&(a.value=e[6]),o.$set(a),e[1].chunkBars?d?(d.p(e,s),2&s&&Re(d,1)):(d=jr(e),d.c(),Re(d,1),d.m(n,null)):d&&(Ae(),Ee(d,1,1,(()=>{d=null})),Te()),(!u||2&s)&&z(n,"height",e[1].trackHeight),(!u||2&s)&&z(n,"outline-color",e[1].focusColor);const l={};64&s&&(l.positionValue=e[6]),8&s&&(l.active=e[3]),c.$set(l),(!u||1&s)&&z(t,"margin","0 "+e[0])},i(e){u||(Re(r.$$.fragment,e),Re(o.$$.fragment,e),Re(d),Re(c.$$.fragment,e),u=!0)},o(e){Ee(r.$$.fragment,e),Ee(o.$$.fragment,e),Ee(d),Ee(c.$$.fragment,e),u=!1},d(n){n&&B(t),De(r),De(o),d&&d.d(),De(c),e[18](null),h=!1,i(f)}}}function Fr(e,t,n){let r,{isBottomControlsVisible:s}=t,{marginX:i="10px"}=t,{currentTime:o=0}=t,{duration:a=0}=t,{buffered:l=[]}=t,{played:c=[]}=t,{paused:u}=t,{isScrubbing:h}=t;const d=ie(),p=oe("config");let _,m,g,b,v,y,w;f(e,p,(e=>n(1,r=e)));const k=Sr((e=>{n(6,w=e/a)}),250,!0),x=Sr((e=>{n(4,v=l.map((e=>({start:e.start/a,end:e.end/a})))),n(5,y=c.map((e=>({start:e.start/a,end:e.end/a}))))}),250,!0);function S(e){const t=Math.min(Math.max(e-g.x,0),g.width)/g.width;n(11,o=a*t)}return e.$$set=e=>{"isBottomControlsVisible"in e&&n(14,s=e.isBottomControlsVisible),"marginX"in e&&n(0,i=e.marginX),"currentTime"in e&&n(11,o=e.currentTime),"duration"in e&&n(15,a=e.duration),"buffered"in e&&n(16,l=e.buffered),"played"in e&&n(17,c=e.played),"paused"in e&&n(13,u=e.paused),"isScrubbing"in e&&n(12,h=e.isScrubbing)},e.$$.update=()=>{18434&e.$$.dirty&&s&&r.chunkBars&&x(o),22528&e.$$.dirty&&s&&(h?n(6,w=o/a):k(o))},[i,r,_,m,v,y,w,p,function(e){e.preventDefault(),n(3,m=!0),b=u,n(13,u=!0),g=_.getBoundingClientRect(),S(e.clientX)},function(e){m&&(n(12,h=!0),S(e.clientX))},function(e){m&&(n(13,u=b),n(3,m=!1),n(12,h=!1),d("pointerup"))},o,h,u,s,a,l,c,function(e){ce[e?"unshift":"push"]((()=>{_=e,n(2,_)}))}]}class qr extends He{constructor(e){super(),je(this,e,Fr,Hr,a,{isBottomControlsVisible:14,marginX:0,currentTime:11,duration:15,buffered:16,played:17,paused:13,isScrubbing:12},Vr)}}function zr(e){E(e,"svelte-ievgfv",".button.svelte-ievgfv{box-sizing:border-box;position:relative;height:100%;border-style:none;border-radius:10px;border-width:2px;outline:none;cursor:pointer}@media(hover: hover) and (pointer: fine){.button.svelte-ievgfv:focus{border-style:solid}}")}function Ur(e){let t,n,r,s,o;const a=e[7].default,l=d(a,e,e[6],null);return{c(){t=O("div"),l&&l.c(),j(t,"class","button svelte-ievgfv"),z(t,"width",e[1]+"px"),z(t,"min-width",e[1]+"px"),z(t,"background-color",e[2].color),z(t,"border-color",e[2].focusColor),z(t,"border-radius",e[0]?"9999px":"10px"),j(t,"tabindex","0"),pe((()=>e[8].call(t)))},m(i,a){M(i,t,a),l&&l.m(t,null),n=Y(t,e[8].bind(t)),r=!0,s||(o=[V(t,"pointerdown",Xr),V(t,"pointerup",e[4]),V(t,"keydown",e[5])],s=!0)},p(e,[n]){l&&l.p&&(!r||64&n)&&m(l,a,e,e[6],r?_(a,e[6],n,null):g(e[6]),null),(!r||2&n)&&z(t,"width",e[1]+"px"),(!r||2&n)&&z(t,"min-width",e[1]+"px"),(!r||4&n)&&z(t,"background-color",e[2].color),(!r||4&n)&&z(t,"border-color",e[2].focusColor),(!r||1&n)&&z(t,"border-radius",e[0]?"9999px":"10px")},i(e){r||(Re(l,e),r=!0)},o(e){Ee(l,e),r=!1},d(e){e&&B(t),l&&l.d(e),n(),s=!1,i(o)}}}function Xr(e){e.preventDefault()}function Yr(e,t,n){let r,{$$slots:s={},$$scope:i}=t,{round:o=!1}=t;const a=ie(),l=oe("config");let c;return f(e,l,(e=>n(2,r=e))),e.$$set=e=>{"round"in e&&n(0,o=e.round),"$$scope"in e&&n(6,i=e.$$scope)},[o,c,r,l,function(e){a("pointerup")},function(e){switch(e.code){case"Enter":case"NumpadEnter":case"Space":e.preventDefault(),e.stopPropagation(),a("pointerup")}},i,s,function(){c=this.offsetHeight,n(1,c)}]}class Kr extends He{constructor(e){super(),je(this,e,Yr,Ur,a,{round:0},zr)}}function Gr(e){let t,n;return t=new ir({props:{paused:e[0]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.paused=e[0]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Wr(e){let t,n;return t=new Kr({props:{$$slots:{default:[Gr]},$$scope:{ctx:e}}}),t.$on("pointerup",e[1]),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,[n]){const r={};5&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Zr(e,t,n){let{paused:r}=t;return e.$$set=e=>{"paused"in e&&n(0,r=e.paused)},[r,function(t){ae.call(this,e,t)}]}class Qr extends He{constructor(e){super(),je(this,e,Zr,Wr,a,{paused:0})}}function Jr(e){E(e,"svelte-rnfp7y",".volume-icon.svelte-rnfp7y{position:absolute}")}function es(t){let n,r,s,i,o,a,l,c,u,h,f,d,p,_;return{c(){n=O("div"),r=P("svg"),s=P("g"),i=P("path"),a=P("g"),l=P("path"),c=P("path"),h=P("g"),f=P("path"),d=P("path"),j(i,"fill",o=t[1]?t[3].iconColor:"none"),j(i,"d","M33.913 38.955l14.58-11.046v44.918l-14.58-11.045H22.154V38.955h11.759z"),j(l,"d","M68.27 31.776c10.039 10.058 10.039 26.39 0 36.448"),j(c,"d","M61.062 38.986c6.067 6.079 6.067 15.949 0 22.028"),j(a,"visibility",u=t[2]?"hidden":"visible"),j(f,"d","M59.644 41.173l17.621 17.658"),j(d,"d","M77.265 41.173L59.644 58.831"),j(h,"visibility",p=t[2]?"visible":"hidden"),j(s,"fill","none"),j(s,"stroke",_=t[3].iconColor),j(s,"stroke-width","5"),j(r,"viewBox","0 0 100 100"),j(r,"stroke-linecap","round"),j(r,"stroke-linejoin","round"),j(n,"class","volume-icon svelte-rnfp7y"),z(n,"width",t[0])},m(e,t){M(e,n,t),R(n,r),R(r,s),R(s,i),R(s,a),R(a,l),R(a,c),R(s,h),R(h,f),R(h,d)},p(e,[t]){10&t&&o!==(o=e[1]?e[3].iconColor:"none")&&j(i,"fill",o),4&t&&u!==(u=e[2]?"hidden":"visible")&&j(a,"visibility",u),4&t&&p!==(p=e[2]?"visible":"hidden")&&j(h,"visibility",p),8&t&&_!==(_=e[3].iconColor)&&j(s,"stroke",_),1&t&&z(n,"width",e[0])},i:e,o:e,d(e){e&&B(n)}}}function ts(e,t,n){let r,{size:s="100%"}=t,{filled:i=!0}=t,{muted:o}=t;const a=oe("config");return f(e,a,(e=>n(3,r=e))),e.$$set=e=>{"size"in e&&n(0,s=e.size),"filled"in e&&n(1,i=e.filled),"muted"in e&&n(2,o=e.muted)},[s,i,o,r,a]}class ns extends He{constructor(e){super(),je(this,e,ts,es,a,{size:0,filled:1,muted:2},Jr)}}function rs(e){let t,n;return t=new ns({props:{muted:e[0]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.muted=e[0]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function ss(e){let t,n;return t=new Kr({props:{$$slots:{default:[rs]},$$scope:{ctx:e}}}),t.$on("pointerup",e[1]),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,[n]){const r={};5&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function is(e,t,n){let{muted:r}=t;return e.$$set=e=>{"muted"in e&&n(0,r=e.muted)},[r,function(t){ae.call(this,e,t)}]}class os extends He{constructor(e){super(),je(this,e,is,ss,a,{muted:0})}}function as(e){E(e,"svelte-1qqqte2",".slider.svelte-1qqqte2.svelte-1qqqte2{position:relative;flex-grow:1;min-width:25px;height:100%;outline:none}.slider.svelte-1qqqte2:focus .bars.svelte-1qqqte2{outline-style:dotted}.bars.svelte-1qqqte2.svelte-1qqqte2{position:relative;width:100%;top:50%;transform:translateY(-50%);outline-offset:3px;outline-width:2px;outline-style:none;border-radius:9999px;overflow:hidden}")}function ls(e){let t,n,r,s,o,a,l,c,u,h;return r=new Er({props:{color:e[5].barsBgColor,opacity:1,value:1}}),o=new Er({props:{color:e[5].color,opacity:1,value:e[0]}}),l=new Dr({props:{positionValue:e[0],active:e[4]}}),{c(){t=O("div"),n=O("div"),Ne(r.$$.fragment),s=L(),Ne(o.$$.fragment),a=L(),Ne(l.$$.fragment),j(n,"class","bars svelte-1qqqte2"),z(n,"height",e[5].trackHeight),z(n,"outline-color",e[5].focusColor),j(t,"class","slider svelte-1qqqte2"),z(t,"max-width",e[1]),z(t,"margin","0 "+e[2]),j(t,"tabindex","0")},m(i,f){M(i,t,f),R(t,n),Le(r,n,null),R(n,s),Le(o,n,null),R(t,a),Le(l,t,null),e[11](t),c=!0,u||(h=[V(window,"pointermove",e[8]),V(window,"pointerup",e[9]),V(t,"pointerdown",e[7]),V(t,"keydown",e[10])],u=!0)},p(e,[s]){const i={};32&s&&(i.color=e[5].barsBgColor),r.$set(i);const a={};32&s&&(a.color=e[5].color),1&s&&(a.value=e[0]),o.$set(a),(!c||32&s)&&z(n,"height",e[5].trackHeight),(!c||32&s)&&z(n,"outline-color",e[5].focusColor);const u={};1&s&&(u.positionValue=e[0]),16&s&&(u.active=e[4]),l.$set(u),(!c||2&s)&&z(t,"max-width",e[1]),(!c||4&s)&&z(t,"margin","0 "+e[2])},i(e){c||(Re(r.$$.fragment,e),Re(o.$$.fragment,e),Re(l.$$.fragment,e),c=!0)},o(e){Ee(r.$$.fragment,e),Ee(o.$$.fragment,e),Ee(l.$$.fragment,e),c=!1},d(n){n&&B(t),De(r),De(o),De(l),e[11](null),u=!1,i(h)}}}function cs(e,t,n){let r,s,i,o,{width:a="150px"}=t,{marginX:l="10px"}=t,{value:c=.5}=t;const u=oe("config");function h(e,t){e.preventDefault(),e.stopPropagation(),n(0,c=Math.min(Math.max(c+t,0),1))}function d(e){n(0,c=Math.min(Math.max(e-o.x,0),o.width)/o.width)}return f(e,u,(e=>n(5,r=e))),e.$$set=e=>{"width"in e&&n(1,a=e.width),"marginX"in e&&n(2,l=e.marginX),"value"in e&&n(0,c=e.value)},[c,a,l,s,i,r,u,function(e){e.preventDefault(),n(4,i=!0),o=s.getBoundingClientRect(),d(e.clientX)},function(e){i&&d(e.clientX)},function(e){i&&n(4,i=!1)},function(e){switch(e.code){case"ArrowLeft":case"ArrowDown":h(e,-.1);break;case"ArrowRight":case"ArrowUp":h(e,.1)}},function(e){ce[e?"unshift":"push"]((()=>{s=e,n(3,s)}))}]}class us extends He{constructor(e){super(),je(this,e,cs,ls,a,{width:1,marginX:2,value:0},as)}}function hs(e){let t,n,r;function s(t){e[2](t)}let i={width:e[1]};return void 0!==e[0]&&(i.value=e[0]),t=new us({props:i}),ce.push((()=>Pe(t,"value",s))),{c(){Ne(t.$$.fragment)},m(e,n){Le(t,e,n),r=!0},p(e,[r]){const s={};2&r&&(s.width=e[1]),!n&&1&r&&(n=!0,s.value=e[0],_e((()=>n=!1))),t.$set(s)},i(e){r||(Re(t.$$.fragment,e),r=!0)},o(e){Ee(t.$$.fragment,e),r=!1},d(e){De(t,e)}}}function fs(e,t,n){let{width:r="100px"}=t,{volume:s=1}=t;return e.$$set=e=>{"width"in e&&n(1,r=e.width),"volume"in e&&n(0,s=e.volume)},[s,r,function(e){s=e,n(0,s)}]}class ds extends He{constructor(e){super(),je(this,e,fs,hs,a,{width:1,volume:0})}}function ps(e){E(e,"svelte-15g0vgp",".fullscreen-icon.svelte-15g0vgp{position:absolute}")}function _s(t){let n,r,s,i,o,a,l,c,u,h,f,d,p,_,m,g;return{c(){n=O("div"),r=P("svg"),s=P("g"),i=P("g"),o=P("path"),a=P("path"),l=P("path"),c=P("path"),h=P("g"),f=P("path"),d=P("path"),p=P("path"),_=P("path"),j(o,"d","M71 60.5V71H60"),j(a,"d","M40 71H29V60.5"),j(l,"d","M29 40.5V29h11"),j(c,"d","M60 29h11v11.5"),j(i,"visibility",u=t[1]?"hidden":"visible"),j(f,"d","M60 71V60.5h11"),j(d,"d","M29 60.5h11V71"),j(p,"d","M40 29v11.5H29"),j(_,"d","M71 40.5H60V29"),j(h,"visibility",m=t[1]?"visible":"hidden"),j(s,"fill","none"),j(s,"stroke",g=t[2].iconColor),j(s,"stroke-width","5"),j(r,"viewBox","0 0 100 100"),j(r,"stroke-linecap","round"),j(r,"stroke-linejoin","round"),j(n,"class","fullscreen-icon svelte-15g0vgp"),z(n,"width",t[0])},m(e,t){M(e,n,t),R(n,r),R(r,s),R(s,i),R(i,o),R(i,a),R(i,l),R(i,c),R(s,h),R(h,f),R(h,d),R(h,p),R(h,_)},p(e,[t]){2&t&&u!==(u=e[1]?"hidden":"visible")&&j(i,"visibility",u),2&t&&m!==(m=e[1]?"visible":"hidden")&&j(h,"visibility",m),4&t&&g!==(g=e[2].iconColor)&&j(s,"stroke",g),1&t&&z(n,"width",e[0])},i:e,o:e,d(e){e&&B(n)}}}function ms(e,t,n){let r,{size:s="100%"}=t,{isFullscreen:i}=t;const o=oe("config");return f(e,o,(e=>n(2,r=e))),e.$$set=e=>{"size"in e&&n(0,s=e.size),"isFullscreen"in e&&n(1,i=e.isFullscreen)},[s,i,r,o]}class gs extends He{constructor(e){super(),je(this,e,ms,_s,a,{size:0,isFullscreen:1},ps)}}function bs(e){let t,n;return t=new gs({props:{isFullscreen:e[0]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.isFullscreen=e[0]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function vs(e){let t,n;return t=new Kr({props:{$$slots:{default:[bs]},$$scope:{ctx:e}}}),t.$on("pointerup",e[1]),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,[n]){const r={};5&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function ys(e,t,n){let{isFullscreen:r}=t;return e.$$set=e=>{"isFullscreen"in e&&n(0,r=e.isFullscreen)},[r,function(t){ae.call(this,e,t)}]}class ws extends He{constructor(e){super(),je(this,e,ys,vs,a,{isFullscreen:0})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var ks,xs={exports:{}};function Ss(e,t,n){let{element:r}=t,{isFullscreen:s}=t,{isFullscreenEnabled:i}=t;function o(e){r==e.target&&n(0,s=xs.exports.isFullscreen)}return i=xs.exports.isEnabled,i&&xs.exports.on("change",o),se((()=>{xs.exports.off("change",o)})),e.$$set=e=>{"element"in e&&n(2,r=e.element),"isFullscreen"in e&&n(0,s=e.isFullscreen),"isFullscreenEnabled"in e&&n(1,i=e.isFullscreenEnabled)},e.$$.update=()=>{7&e.$$.dirty&&i&&(s?xs.exports.request(r):xs.exports.exit())},[s,i,r]}ks=xs,function(){var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},t=ks.exports,n=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,s=n.length,i={};r<s;r++)if((t=n[r])&&t[1]in e){for(r=0;r<t.length;r++)i[n[0][r]]=t[r];return i}return!1}(),r={change:n.fullscreenchange,error:n.fullscreenerror},s={request(t,r){return new Promise(function(s,i){var o=function(){this.off("change",o),s()}.bind(this);this.on("change",o);var a=(t=t||e.documentElement)[n.requestFullscreen](r);a instanceof Promise&&a.then(o).catch(i)}.bind(this))},exit(){return new Promise(function(t,r){if(this.isFullscreen){var s=function(){this.off("change",s),t()}.bind(this);this.on("change",s);var i=e[n.exitFullscreen]();i instanceof Promise&&i.then(s).catch(r)}else t()}.bind(this))},toggle(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange(e){this.on("change",e)},onerror(e){this.on("error",e)},on(t,n){var s=r[t];s&&e.addEventListener(s,n,!1)},off(t,n){var s=r[t];s&&e.removeEventListener(s,n,!1)},raw:n};n?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[n.fullscreenEnabled])}}}),t?ks.exports=s:window.screenfull=s):t?ks.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}();class As extends He{constructor(e){super(),je(this,e,Ss,null,a,{element:2,isFullscreen:0,isFullscreenEnabled:1})}}function Ts(e,t,n){var r;return function(){if(!t)return e.apply(this,arguments);var s=this,i=arguments,o=n&&!r;return clearTimeout(r),r=setTimeout((function(){if(r=null,!o)return e.apply(s,i)}),t),o?e.apply(this,arguments):void 0}}function Rs(t){let n,r;return{c:e,m(e,s){n||(r=[V(window,"pointermove",t[0]),V(window,"keydown",t[0])],n=!0)},p:e,i:e,o:e,d(e){n=!1,i(r)}}}function Es(e,t,n){let r,{isIdle:s=!1}=t;const i=Ts((()=>{clearTimeout(r),r=setTimeout((()=>{n(1,s=!0)}),2e3)}),250,!0);return se((()=>{clearTimeout(r)})),e.$$set=e=>{"isIdle"in e&&n(1,s=e.isIdle)},[function(e){n(1,s=!1),i()},s]}class $s extends He{constructor(e){super(),je(this,e,Es,Rs,a,{isIdle:1})}}function Is(t){let n,r;return{c:e,m(e,s){n||(r=V(window,"scroll",t[0]),n=!0)},p:e,i:e,o:e,d(e){n=!1,r()}}}function Ms(e,t,n){let r,{isScrolling:s=!1}=t;const i=Ts((()=>{clearTimeout(r),r=setTimeout((()=>{n(1,s=!1)}),100)}),100,!0);return se((()=>{clearTimeout(r)})),e.$$set=e=>{"isScrolling"in e&&n(1,s=e.isScrolling)},[function(e){n(1,s=!0),i()},s]}class Bs extends He{constructor(e){super(),je(this,e,Ms,Is,a,{isScrolling:1})}}function Cs(e){E(e,"svelte-1a30cmt",".time.svelte-1a30cmt{position:relative;height:100%;text-align:center;display:flex;flex-direction:column;justify-content:center;margin-right:6px}.text.svelte-1a30cmt{position:relative;font-family:'Lucida Sans Typewriter', 'Lucida Console', monaco, 'Bitstream Vera Sans Mono', monospace;font-size:1rem;line-height:1rem;color:white}")}function Os(t){let n,r,s;return{c(){n=O("div"),r=O("div"),s=N(t[0]),j(r,"class","text svelte-1a30cmt"),j(n,"class","time svelte-1a30cmt")},m(e,t){M(e,n,t),R(n,r),R(r,s)},p(e,[t]){1&t&&F(s,e[0])},i:e,o:e,d(e){e&&B(n)}}}function Ps(e,t,n){let r,{duration:s}=t,{currentTime:i}=t,o=0;const a=Sr((()=>{n(0,o=l(i,r))}),250,!0),l=(e=0,t=!1)=>{let n=new Date(1e3*e).toISOString().substr(11,8);return t?n:n.substring(3)};return e.$$set=e=>{"duration"in e&&n(1,s=e.duration),"currentTime"in e&&n(2,i=e.currentTime)},e.$$.update=()=>{2&e.$$.dirty&&(r=s>=3600),4&e.$$.dirty&&i&&a()},[o,s,i]}class Ns extends He{constructor(e){super(),je(this,e,Ps,Os,a,{duration:1,currentTime:2},Cs)}}function Ls(e){E(e,"svelte-1ai3mbf","video::-webkit-media-controls{display:none !important}.aspect.svelte-1ai3mbf.svelte-1ai3mbf{position:relative;width:100%;height:0;padding-top:100%;overflow:hidden;border-radius:8px;-webkit-mask-image:-webkit-radial-gradient(white, black);mask-image:-webkit-radial-gradient(white, black)}.aspect.svelte-1ai3mbf>.svelte-1ai3mbf:first-child{position:absolute;top:0;right:0;bottom:0;left:0;outline:none}video.svelte-1ai3mbf.svelte-1ai3mbf{position:relative;width:100%;height:100%}")}function Ds(e,t,n){const r=e.slice();return r[84]=t[n].src,r[85]=t[n].type,r}function Vs(t){let n,r,s=t[88]+"";return{c(){n=O("p"),r=N(s),z(n,"color","red"),j(n,"class","svelte-1ai3mbf")},m(e,t){M(e,n,t),R(n,r)},p(e,t){4&t[0]&&s!==(s=e[88]+"")&&F(r,s)},i:e,o:e,d(e){e&&B(n)}}}function js(e){let t,n,r,s,o,a,l,c,u,h,f,d,p=!1,_=!0,m=e[31],g=[];for(let t=0;t<m.length;t+=1)g[t]=Hs(Ds(e,m,t));function b(){cancelAnimationFrame(o),n.paused||(o=x(b),p=!0),e[61].call(n)}let v=e[2]&&e[30]&&Fs(e);return c=new tr({props:{$$slots:{default:[Xs]},$$scope:{ctx:e}}}),{c(){t=O("div"),n=O("video"),r=O("track");for(let e=0;e<g.length;e+=1)g[e].c();var i,o;s=O("p"),s.textContent="Sorry, your browser doesn't support HTML5 videos.",a=L(),v&&v.c(),l=L(),Ne(c.$$.fragment),j(r,"kind","captions"),j(n,"width",e[0]),j(n,"height",e[1]),j(n,"preload","none"),j(n,"class","svelte-1ai3mbf"),void 0!==e[9]&&void 0!==e[21]&&void 0!==e[11]||pe(b),void 0===e[19]&&pe((()=>e[62].call(n))),void 0===e[20]&&pe((()=>e[63].call(n))),void 0===e[20]&&pe((()=>e[64].call(n))),void 0===e[10]&&pe((()=>e[65].call(n))),void 0===e[11]&&pe((()=>e[66].call(n))),j(t,"id","video-player-"+(i=46656*Math.random()|0,o=46656*Math.random()|0,(i=("000"+i.toString(36)).slice(-3))+("000"+o.toString(36)).slice(-3))),j(t,"tabindex",u=e[14]?"0":"-1"),j(t,"class","svelte-1ai3mbf")},m(i,o){M(i,t,o),R(t,n),R(n,r);for(let e=0;e<g.length;e+=1)g[e].m(n,null);R(n,s),e[60](n),isNaN(e[13])||(n.volume=e[13]),R(t,a),v&&v.m(t,null),R(t,l),Le(c,t,null),e[74](t),h=!0,f||(d=[V(n,"timeupdate",b),V(n,"durationchange",e[62]),V(n,"progress",e[63]),V(n,"loadedmetadata",e[64]),V(n,"seeking",e[65]),V(n,"seeked",e[65]),V(n,"ended",e[66]),V(n,"play",e[67]),V(n,"pause",e[67]),V(n,"volumechange",e[68]),V(n,"loadeddata",e[33],{once:!0}),V(n,"play",Ws),V(n,"playing",e[34]),V(n,"waiting",e[35]),V(t,"pointerover",e[36]),V(t,"pointerout",e[37]),V(t,"pointerup",e[38])],f=!0)},p(e,r){if(1&r[1]){let t;for(m=e[31],t=0;t<m.length;t+=1){const i=Ds(e,m,t);g[t]?g[t].p(i,r):(g[t]=Hs(i),g[t].c(),g[t].m(n,s))}for(;t<g.length;t+=1)g[t].d(1);g.length=m.length}(!h||1&r[0])&&j(n,"width",e[0]),(!h||2&r[0])&&j(n,"height",e[1]),!p&&512&r[0]&&!isNaN(e[9])&&(n.currentTime=e[9]),p=!1,4096&r[0]&&_!==(_=e[12])&&n[_?"pause":"play"](),8192&r[0]&&!isNaN(e[13])&&(n.volume=e[13]),e[2]&&e[30]?v?(v.p(e,r),1073741828&r[0]&&Re(v,1)):(v=Fs(e),v.c(),Re(v,1),v.m(t,l)):v&&(Ae(),Ee(v,1,1,(()=>{v=null})),Te());const i={};1039839872&r[0]|134217728&r[2]&&(i.$$scope={dirty:r,ctx:e}),c.$set(i),(!h||16384&r[0]&&u!==(u=e[14]?"0":"-1"))&&j(t,"tabindex",u)},i(e){h||(Re(v),Re(c.$$.fragment,e),h=!0)},o(e){Ee(v),Ee(c.$$.fragment,e),h=!1},d(n){n&&B(t),C(g,n),e[60](null),v&&v.d(),De(c),e[74](null),f=!1,i(d)}}}function Hs(e){let t,n,r;return{c(){t=O("source"),c(t.src,n=e[84])||j(t,"src",n),j(t,"type",r=e[85])},m(e,n){M(e,t,n)},p(e,s){1&s[1]&&!c(t.src,n=e[84])&&j(t,"src",n),1&s[1]&&r!==(r=e[85])&&j(t,"type",r)},d(e){e&&B(t)}}}function Fs(e){let t,n;return t=new Zn({props:{src:e[2]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.src=e[2]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function qs(e){let t,n;return t=new Ns({props:{duration:e[19],currentTime:e[9]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};524288&n[0]&&(r.duration=e[19]),512&n[0]&&(r.currentTime=e[9]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function zs(e){let t,n;return t=new ws({props:{isFullscreen:e[24]}}),t.$on("pointerup",e[41]),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};16777216&n[0]&&(r.isFullscreen=e[24]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Us(e){let t,n,r,s,i,o,a,l,c,u,h,f,d,p,_;function m(t){e[69](t)}function g(t){e[70](t)}function b(t){e[71](t)}t=new Qr({props:{paused:e[12]}}),t.$on("pointerup",e[43]);let v={duration:e[19],buffered:e[20],played:e[21],isBottomControlsVisible:e[27]};void 0!==e[9]&&(v.currentTime=e[9]),void 0!==e[12]&&(v.paused=e[12]),void 0!==e[17]&&(v.isScrubbing=e[17]),r=new qr({props:v}),ce.push((()=>Pe(r,"currentTime",m))),ce.push((()=>Pe(r,"paused",g))),ce.push((()=>Pe(r,"isScrubbing",b))),r.$on("pointerup",e[42]);let y=e[7]&&qs(e);function w(t){e[72](t)}c=new os({props:{muted:e[26]}}),c.$on("pointerup",e[44]);let k={};void 0!==e[13]&&(k.volume=e[13]),h=new ds({props:k}),ce.push((()=>Pe(h,"volume",w)));let x=e[23]&&zs(e);return{c(){Ne(t.$$.fragment),n=L(),Ne(r.$$.fragment),a=L(),y&&y.c(),l=L(),Ne(c.$$.fragment),u=L(),Ne(h.$$.fragment),d=L(),x&&x.c(),p=D()},m(e,s){Le(t,e,s),M(e,n,s),Le(r,e,s),M(e,a,s),y&&y.m(e,s),M(e,l,s),Le(c,e,s),M(e,u,s),Le(h,e,s),M(e,d,s),x&&x.m(e,s),M(e,p,s),_=!0},p(e,n){const a={};4096&n[0]&&(a.paused=e[12]),t.$set(a);const u={};524288&n[0]&&(u.duration=e[19]),1048576&n[0]&&(u.buffered=e[20]),2097152&n[0]&&(u.played=e[21]),134217728&n[0]&&(u.isBottomControlsVisible=e[27]),!s&&512&n[0]&&(s=!0,u.currentTime=e[9],_e((()=>s=!1))),!i&&4096&n[0]&&(i=!0,u.paused=e[12],_e((()=>i=!1))),!o&&131072&n[0]&&(o=!0,u.isScrubbing=e[17],_e((()=>o=!1))),r.$set(u),e[7]?y?(y.p(e,n),128&n[0]&&Re(y,1)):(y=qs(e),y.c(),Re(y,1),y.m(l.parentNode,l)):y&&(Ae(),Ee(y,1,1,(()=>{y=null})),Te());const d={};67108864&n[0]&&(d.muted=e[26]),c.$set(d);const _={};!f&&8192&n[0]&&(f=!0,_.volume=e[13],_e((()=>f=!1))),h.$set(_),e[23]?x?(x.p(e,n),8388608&n[0]&&Re(x,1)):(x=zs(e),x.c(),Re(x,1),x.m(p.parentNode,p)):x&&(Ae(),Ee(x,1,1,(()=>{x=null})),Te())},i(e){_||(Re(t.$$.fragment,e),Re(r.$$.fragment,e),Re(y),Re(c.$$.fragment,e),Re(h.$$.fragment,e),Re(x),_=!0)},o(e){Ee(t.$$.fragment,e),Ee(r.$$.fragment,e),Ee(y),Ee(c.$$.fragment,e),Ee(h.$$.fragment,e),Ee(x),_=!1},d(e){De(t,e),e&&B(n),De(r,e),e&&B(a),y&&y.d(e),e&&B(l),De(c,e),e&&B(u),De(h,e),e&&B(d),x&&x.d(e),e&&B(p)}}}function Xs(e){let t,n,r,s,i;function o(t){e[73](t)}let a={hidden:!e[27],$$slots:{default:[Us]},$$scope:{ctx:e}};return void 0!==e[22]&&(a.isPointerOver=e[22]),t=new xr({props:a}),ce.push((()=>Pe(t,"isPointerOver",o))),s=new vr({props:{isIconVisible:e[28],isSpinnerVisible:e[29],isBuffering:e[15]}}),s.$on("togglePause",e[45]),{c(){Ne(t.$$.fragment),r=L(),Ne(s.$$.fragment)},m(e,n){Le(t,e,n),M(e,r,n),Le(s,e,n),i=!0},p(e,r){const i={};134217728&r[0]&&(i.hidden=!e[27]),230306432&r[0]|134217728&r[2]&&(i.$$scope={dirty:r,ctx:e}),!n&&4194304&r[0]&&(n=!0,i.isPointerOver=e[22],_e((()=>n=!1))),t.$set(i);const o={};268435456&r[0]&&(o.isIconVisible=e[28]),536870912&r[0]&&(o.isSpinnerVisible=e[29]),32768&r[0]&&(o.isBuffering=e[15]),s.$set(o)},i(e){i||(Re(t.$$.fragment,e),Re(s.$$.fragment,e),i=!0)},o(e){Ee(t.$$.fragment,e),Ee(s.$$.fragment,e),i=!1},d(e){De(t,e),e&&B(r),De(s,e)}}}function Ys(e){let t,n,r;return n=new _r({props:{color:e[4],size:"60px"}}),{c(){t=O("div"),Ne(n.$$.fragment),j(t,"class","svelte-1ai3mbf")},m(e,s){M(e,t,s),Le(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.color=e[4]),n.$set(r)},i(e){r||(Re(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&B(t),De(n)}}}function Ks(e){let t,n,r,s,o,a,l,c,u,h,f,d,p,_,m,g={ctx:e,current:null,token:null,hasCatch:!0,pending:Ys,then:js,catch:Vs,error:88,blocks:[,,,]};function b(t){e[75](t)}Ce(n=Yn(e[2]),g);let v={};function y(t){e[76](t)}void 0!==e[16]&&(v.isIdle=e[16]),s=new $s({props:v}),ce.push((()=>Pe(s,"isIdle",b)));let w={};function k(t){e[77](t)}function x(t){e[78](t)}void 0!==e[25]&&(w.isScrolling=e[25]),l=new Bs({props:w}),ce.push((()=>Pe(l,"isScrolling",y)));let S={element:e[18]};return void 0!==e[23]&&(S.isFullscreenEnabled=e[23]),void 0!==e[24]&&(S.isFullscreen=e[24]),h=new As({props:S}),ce.push((()=>Pe(h,"isFullscreenEnabled",k))),ce.push((()=>Pe(h,"isFullscreen",x))),{c(){t=O("div"),g.block.c(),r=L(),Ne(s.$$.fragment),a=L(),Ne(l.$$.fragment),u=L(),Ne(h.$$.fragment),j(t,"class","aspect svelte-1ai3mbf"),z(t,"padding-top",100*e[6]+"%"),z(t,"background-color",e[3]),z(t,"border-radius",e[5])},m(n,i){M(n,t,i),g.block.m(t,g.anchor=null),g.mount=()=>t,g.anchor=r,R(t,r),Le(s,t,null),R(t,a),Le(l,t,null),R(t,u),Le(h,t,null),p=!0,_||(m=[V(window,"keydown",e[39]),V(window,"keyup",e[40])],_=!0)},p(r,i){e=r,g.ctx=e,4&i[0]&&n!==(n=Yn(e[2]))&&Ce(n,g)||function(e,t,n){const r=t.slice(),{resolved:s}=e;e.current===e.then&&(r[e.value]=s),e.current===e.catch&&(r[e.error]=s),e.block.p(r,n)}(g,e,i);const a={};!o&&65536&i[0]&&(o=!0,a.isIdle=e[16],_e((()=>o=!1))),s.$set(a);const u={};!c&&33554432&i[0]&&(c=!0,u.isScrolling=e[25],_e((()=>c=!1))),l.$set(u);const _={};262144&i[0]&&(_.element=e[18]),!f&&8388608&i[0]&&(f=!0,_.isFullscreenEnabled=e[23],_e((()=>f=!1))),!d&&16777216&i[0]&&(d=!0,_.isFullscreen=e[24],_e((()=>d=!1))),h.$set(_),(!p||64&i[0])&&z(t,"padding-top",100*e[6]+"%"),(!p||8&i[0])&&z(t,"background-color",e[3]),(!p||32&i[0])&&z(t,"border-radius",e[5])},i(e){p||(Re(g.block),Re(s.$$.fragment,e),Re(l.$$.fragment,e),Re(h.$$.fragment,e),p=!0)},o(e){for(let e=0;e<3;e+=1){Ee(g.blocks[e])}Ee(s.$$.fragment,e),Ee(l.$$.fragment,e),Ee(h.$$.fragment,e),p=!1},d(e){e&&B(t),g.block.d(),g.token=null,g=null,De(s),De(l),De(h),_=!1,i(m)}}}let Gs;function Ws(e){Gs&&Gs!==e.target&&Gs.pause(),Gs=e.target}function Zs(e,t,n){let r,s,i,o,a,l,c,u,{width:h}=t,{height:d}=t,{poster:p}=t,{source:_}=t,{controlsHeight:m}=t,{trackHeight:g}=t,{thumbSize:b}=t,{centerIconSize:y}=t,{playerBgColor:w}=t,{color:k}=t,{focusColor:x}=t,{barsBgColor:S}=t,{iconColor:A}=t,{bufferedColor:T}=t,{chunkBars:R}=t,{borderRadius:E}=t,{loop:$}=t,{skipSeconds:I}=t,{aspectRatio:M}=t,{controlsOnPause:B}=t,{timeDisplay:C}=t;const O=ze({});var P,N;let L,D;f(e,O,(e=>n(82,u=e))),P="config",N=O,re().$$.context.set(P,N);let V,j,F,q=0,z=[],U=[],X=!0,Y=1,K=1,G=!1,W=!1,Z=!1,Q=!1,J=!1,ee=!1,te=!1,ne=!1,se=!1,ie=!1;function oe(e){const t=D.currentTime,r=D.duration;n(8,D.currentTime=e?t>s?t-s:0:t+s<r?t+s:r-.2,D)}return e.$$set=e=>{"width"in e&&n(0,h=e.width),"height"in e&&n(1,d=e.height),"poster"in e&&n(2,p=e.poster),"source"in e&&n(46,_=e.source),"controlsHeight"in e&&n(47,m=e.controlsHeight),"trackHeight"in e&&n(48,g=e.trackHeight),"thumbSize"in e&&n(49,b=e.thumbSize),"centerIconSize"in e&&n(50,y=e.centerIconSize),"playerBgColor"in e&&n(3,w=e.playerBgColor),"color"in e&&n(51,k=e.color),"focusColor"in e&&n(52,x=e.focusColor),"barsBgColor"in e&&n(53,S=e.barsBgColor),"iconColor"in e&&n(4,A=e.iconColor),"bufferedColor"in e&&n(54,T=e.bufferedColor),"chunkBars"in e&&n(55,R=e.chunkBars),"borderRadius"in e&&n(5,E=e.borderRadius),"loop"in e&&n(56,$=e.loop),"skipSeconds"in e&&n(57,I=e.skipSeconds),"aspectRatio"in e&&n(6,M=e.aspectRatio),"controlsOnPause"in e&&n(58,B=e.controlsOnPause),"timeDisplay"in e&&n(7,C=e.timeDisplay)},e.$$.update=()=>{32768&e.$$.dirty[1]&&n(31,r=function(e){let t;if(e)if(e instanceof Array)t=e.map((e=>{const t=Xn(e);return void 0===t?{src:e}:{src:e,type:t}})).filter((e=>e));else{const n=Xn(e);t=void 0===n?[{src:e}]:[{src:e,type:n}]}else t=[];return t}(_)),67108864&e.$$.dirty[1]&&(s=parseFloat(I)),65536&e.$$.dirty[1]&&v(O,u.controlsHeight=m,u),262144&e.$$.dirty[1]&&v(O,u.thumbSize=b,u),131072&e.$$.dirty[1]&&v(O,u.trackHeight=g,u),524288&e.$$.dirty[1]&&v(O,u.centerIconSize=y,u),1048576&e.$$.dirty[1]&&v(O,u.color=k,u),8&e.$$.dirty[0]&&v(O,u.playerBgColor=w,u),2097152&e.$$.dirty[1]&&v(O,u.focusColor=x,u),4194304&e.$$.dirty[1]&&v(O,u.barsBgColor=S,u),16&e.$$.dirty[0]&&v(O,u.iconColor=A,u),8388608&e.$$.dirty[1]&&v(O,u.bufferedColor=T,u),16777216&e.$$.dirty[1]&&v(O,u.chunkBars=R,u),33554432&e.$$.dirty[1]&&v(O,u.loop=$,u),32&e.$$.dirty[0]&&v(O,u.borderRadius=E,u),134217728&e.$$.dirty[1]&&v(O,u.controlsOnPause=B,u),128&e.$$.dirty[0]&&v(O,u.timeDisplay=C,u),8192&e.$$.dirty[0]&&n(26,i=0==Y),2304&e.$$.dirty[0]|33554432&e.$$.dirty[1]&&F&&(n(9,q=0),$&&D.play()),20992&e.$$.dirty[0]&&n(30,o=!G||X&&0==q),86016&e.$$.dirty[0]|402653184&e.$$.dirty[1]&&n(27,a=G&&(X&&B||W&&!te)),33792&e.$$.dirty[0]&&n(29,l=j||Q),151552&e.$$.dirty[0]&&n(28,c=!G||X&&!se)},[h,d,p,w,A,E,M,C,D,q,j,F,X,Y,G,Q,te,se,L,V,z,U,Z,J,ee,ne,i,a,c,l,o,r,O,function(e){n(14,G=!0)},function(e){n(15,Q=!1)},function(e){n(15,Q=!0)},function(e){n(59,W=!0)},function(e){n(59,W=!1)},function(e){Z||ne||n(12,X=!X)},function(e){if(Gs===D){switch(e.code){case"Tab":if(ie)break;a||(e.stopPropagation(),e.preventDefault(),n(27,a=!0));break;case"Space":if(ie)break;e.preventDefault(),Gs.paused?Gs.play():Gs.pause();break;case"ArrowLeft":e.preventDefault(),oe(!0);break;case"ArrowRight":e.preventDefault(),oe()}ie=!0}},function(e){Gs===D&&(ie=!1)},function(e){n(24,ee=!ee)},function(e){D!=D&&n(12,X=!1)},function(e){n(12,X=!X)},function(e){i?(n(13,Y=K),K=1):(K=Y,n(13,Y=0))},function(){n(12,X=!X)},_,m,g,b,y,k,x,S,T,R,$,I,B,W,function(e){ce[e?"unshift":"push"]((()=>{D=e,n(8,D)}))},function(){q=this.currentTime,U=H(this.played),F=this.ended,n(9,q),n(11,F),n(56,$),n(8,D),n(21,U),n(11,F)},function(){V=this.duration,n(19,V)},function(){z=H(this.buffered),n(20,z)},function(){z=H(this.buffered),n(20,z)},function(){j=this.seeking,n(10,j)},function(){F=this.ended,n(11,F)},function(){X=this.paused,n(12,X)},function(){Y=this.volume,n(13,Y)},function(e){q=e,n(9,q),n(11,F),n(56,$),n(8,D)},function(e){X=e,n(12,X)},function(e){se=e,n(17,se)},function(e){Y=e,n(13,Y)},function(e){Z=e,n(22,Z)},function(e){ce[e?"unshift":"push"]((()=>{L=e,n(18,L)}))},function(e){te=e,n(16,te)},function(e){ne=e,n(25,ne)},function(e){J=e,n(23,J)},function(e){ee=e,n(24,ee)}]}class Qs extends He{constructor(e){super(),je(this,e,Zs,Ks,a,{width:0,height:1,poster:2,source:46,controlsHeight:47,trackHeight:48,thumbSize:49,centerIconSize:50,playerBgColor:3,color:51,focusColor:52,barsBgColor:53,iconColor:4,bufferedColor:54,chunkBars:55,borderRadius:5,loop:56,skipSeconds:57,aspectRatio:6,controlsOnPause:58,timeDisplay:7},Ls,[-1,-1,-1])}}function Js(e){E(e,"svelte-1sqfmr5",".aspect.svelte-1sqfmr5{position:relative;width:100%;height:0;padding-top:100%;overflow:hidden;border-radius:8px;-webkit-mask-image:-webkit-radial-gradient(white, black);mask-image:-webkit-radial-gradient(white, black)}")}function ei(t){let n;return{c(){n=O("div"),j(n,"class","aspect svelte-1sqfmr5"),z(n,"padding-top",100*t[2]+"%"),z(n,"background-color",t[0]),z(n,"border-radius",t[1])},m(e,t){M(e,n,t)},p(e,[t]){4&t&&z(n,"padding-top",100*e[2]+"%"),1&t&&z(n,"background-color",e[0]),2&t&&z(n,"border-radius",e[1])},i:e,o:e,d(e){e&&B(n)}}}function ti(e,t,n){let{playerBgColor:r}=t,{borderRadius:s}=t,{aspectRatio:i}=t;return e.$$set=e=>{"playerBgColor"in e&&n(0,r=e.playerBgColor),"borderRadius"in e&&n(1,s=e.borderRadius),"aspectRatio"in e&&n(2,i=e.aspectRatio)},[r,s,i]}class ni extends He{constructor(e){super(),je(this,e,ti,ei,a,{playerBgColor:0,borderRadius:1,aspectRatio:2},Js)}}function ri(e){let t,n;return t=new ni({props:{playerBgColor:e[8],borderRadius:e[15],aspectRatio:e[20]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};256&n&&(r.playerBgColor=e[8]),32768&n&&(r.borderRadius=e[15]),1048576&n&&(r.aspectRatio=e[20]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function si(e){let t,n;return t=new Qs({props:{width:e[0],height:e[1],poster:e[2],source:e[3],controlsHeight:e[4],trackHeight:e[5],thumbSize:e[6],centerIconSize:e[7],playerBgColor:e[8],color:e[9],focusColor:e[10],barsBgColor:e[11],iconColor:e[12],bufferedColor:e[13],chunkBars:e[14],borderRadius:e[15],loop:e[16],skipSeconds:e[17],aspectRatio:e[20],controlsOnPause:e[18],timeDisplay:e[19]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.width=e[0]),2&n&&(r.height=e[1]),4&n&&(r.poster=e[2]),8&n&&(r.source=e[3]),16&n&&(r.controlsHeight=e[4]),32&n&&(r.trackHeight=e[5]),64&n&&(r.thumbSize=e[6]),128&n&&(r.centerIconSize=e[7]),256&n&&(r.playerBgColor=e[8]),512&n&&(r.color=e[9]),1024&n&&(r.focusColor=e[10]),2048&n&&(r.barsBgColor=e[11]),4096&n&&(r.iconColor=e[12]),8192&n&&(r.bufferedColor=e[13]),16384&n&&(r.chunkBars=e[14]),32768&n&&(r.borderRadius=e[15]),65536&n&&(r.loop=e[16]),131072&n&&(r.skipSeconds=e[17]),1048576&n&&(r.aspectRatio=e[20]),262144&n&&(r.controlsOnPause=e[18]),524288&n&&(r.timeDisplay=e[19]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function ii(e){let t,n,r,s;const i=[si,ri],o=[];return t=function(e,t){return e[21]?0:1}(e),n=o[t]=i[t](e),{c(){n.c(),r=D()},m(e,n){o[t].m(e,n),M(e,r,n),s=!0},p(e,[t]){n.p(e,t)},i(e){s||(Re(n),s=!0)},o(e){Ee(n),s=!1},d(e){o[t].d(e),e&&B(r)}}}function oi(e,t,n){let r,s,i,o="undefined"!=typeof window,{width:a=1920}=t,{height:l=1080}=t,{poster:c=""}=t,{source:u=""}=t,{controlsHeight:h="55px"}=t,{trackHeight:f="6px"}=t,{thumbSize:d="15px"}=t,{centerIconSize:p="60px"}=t,{playerBgColor:_="black"}=t,{color:m="#FF3E00"}=t,{focusColor:g="white"}=t,{barsBgColor:b="white"}=t,{iconColor:v="white"}=t,{bufferedColor:y="#FF9600"}=t,{chunkBars:w=!1}=t,{borderRadius:k="8px"}=t,{loop:x=!1}=t,{skipSeconds:S=5}=t,{controlsOnPause:A=!0}=t,{timeDisplay:T=!1}=t;return e.$$set=e=>{"width"in e&&n(0,a=e.width),"height"in e&&n(1,l=e.height),"poster"in e&&n(2,c=e.poster),"source"in e&&n(3,u=e.source),"controlsHeight"in e&&n(4,h=e.controlsHeight),"trackHeight"in e&&n(5,f=e.trackHeight),"thumbSize"in e&&n(6,d=e.thumbSize),"centerIconSize"in e&&n(7,p=e.centerIconSize),"playerBgColor"in e&&n(8,_=e.playerBgColor),"color"in e&&n(9,m=e.color),"focusColor"in e&&n(10,g=e.focusColor),"barsBgColor"in e&&n(11,b=e.barsBgColor),"iconColor"in e&&n(12,v=e.iconColor),"bufferedColor"in e&&n(13,y=e.bufferedColor),"chunkBars"in e&&n(14,w=e.chunkBars),"borderRadius"in e&&n(15,k=e.borderRadius),"loop"in e&&n(16,x=e.loop),"skipSeconds"in e&&n(17,S=e.skipSeconds),"controlsOnPause"in e&&n(18,A=e.controlsOnPause),"timeDisplay"in e&&n(19,T=e.timeDisplay)},e.$$.update=()=>{1&e.$$.dirty&&n(22,r=parseInt(a)),2&e.$$.dirty&&n(23,s=parseInt(l)),12582912&e.$$.dirty&&n(20,i=s/r)},[a,l,c,u,h,f,d,p,_,m,g,b,v,y,w,k,x,S,A,T,i,o,r,s]}class ai extends He{constructor(e){super(),je(this,e,oi,ii,a,{width:0,height:1,poster:2,source:3,controlsHeight:4,trackHeight:5,thumbSize:6,centerIconSize:7,playerBgColor:8,color:9,focusColor:10,barsBgColor:11,iconColor:12,bufferedColor:13,chunkBars:14,borderRadius:15,loop:16,skipSeconds:17,controlsOnPause:18,timeDisplay:19})}}const li=(e,t)=>{if(e){const n=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/;return e.split(" ").map(((e,r)=>n.test(e)?{type:"link",content:e}:e.includes("$file")?{type:"file",content:void 0!==t?t:"$file"}:{type:"text",content:e}))}return[]};function ci(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function ui(e){E(e,"svelte-1ftzncb",'.modal.svelte-1ftzncb{display:none;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0, 0, 0);background-color:rgba(0, 0, 0, 0.4)}.modal-content.svelte-1ftzncb{background-color:#fefefe;padding:16px 16px 8px 16px;border:1px solid #888;max-width:600px;width:75%}.btn.svelte-1ftzncb{position:relative;display:inline-block;box-sizing:border-box;border:none;border-radius:4px;padding:0 8px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;text-transform:uppercase;color:#0f2b42;background-color:transparent;font-size:14px;font-weight:500;line-height:36px;overflow:hidden;outline:none;cursor:pointer}.btn.svelte-1ftzncb::-moz-focus-inner{border:none}.btn.svelte-1ftzncb::before{content:"";position:absolute;left:0;right:0;top:0;bottom:0;background-color:currentColor;opacity:0;transition:opacity 0.2s}.btn.svelte-1ftzncb::after{content:"";position:absolute;left:50%;top:50%;border-radius:50%;padding:50%;width:32px;height:32px;background-color:currentColor;opacity:0;transform:translate(-50%, -50%) scale(1) ;transition:opacity 1s, transform 0.5s}.btn.svelte-1ftzncb:hover::before{opacity:0.04}.btn.svelte-1ftzncb:focus::before{opacity:0.12}.btn.svelte-1ftzncb:hover:focus::before{opacity:0.16}.btn.svelte-1ftzncb:active::after{opacity:0.16;transform:translate(-50%, -50%) scale(0);transition:transform 0s}')}function hi(e){let t,n,r,s,o,a,l,c,u,h;const f=e[5].default,p=d(f,e,e[4],null);return{c(){t=O("div"),p&&p.c(),n=L(),r=O("div"),s=O("div"),o=L(),a=O("button"),a.innerHTML="<span>FECHAR</span>",z(s,"flex-grow","1"),j(a,"class","btn svelte-1ftzncb"),z(r,"display","flex"),z(r,"width","100%"),j(t,"class","modal-content svelte-1ftzncb")},m(i,f){M(i,t,f),p&&p.m(t,null),R(t,n),R(t,r),R(r,s),R(r,o),R(r,a),c=!0,u||(h=[V(a,"click",e[6]),y(l=ci.call(null,t)),V(t,"click_outside",e[7])],u=!0)},p(e,t){p&&p.p&&(!c||16&t)&&m(p,f,e,e[4],c?_(f,e[4],t,null):g(e[4]),null)},i(e){c||(Re(p,e),c=!0)},o(e){Ee(p,e),c=!1},d(e){e&&B(t),p&&p.d(e),u=!1,i(h)}}}function fi(e){let t,n,r=e[2]&&hi(e);return{c(){t=O("div"),r&&r.c(),j(t,"class","modal svelte-1ftzncb")},m(s,i){M(s,t,i),r&&r.m(t,null),e[8](t),n=!0},p(e,[n]){e[2]?r?(r.p(e,n),4&n&&Re(r,1)):(r=hi(e),r.c(),Re(r,1),r.m(t,null)):r&&(Ae(),Ee(r,1,1,(()=>{r=null})),Te())},i(e){n||(Re(r),n=!0)},o(e){Ee(r),n=!1},d(n){n&&B(t),r&&r.d(),e[8](null)}}}function di(e,t,n){let r,{$$slots:s={},$$scope:i}=t,o=!1;function a(){n(1,r.style.display="none",r),n(2,o=!1)}return e.$$set=e=>{"$$scope"in e&&n(4,i=e.$$scope)},[a,r,o,function(){n(1,r.style.display="flex",r),n(2,o=!0)},i,s,()=>a(),()=>{a()},function(e){ce[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class pi extends He{constructor(e){super(),je(this,e,di,fi,a,{openModal:3,closeModal:0},ui)}get openModal(){return this.$$.ctx[3]}get closeModal(){return this.$$.ctx[0]}}function _i(e){E(e,"svelte-e8w6ax",".spinner.svelte-e8w6ax{animation:svelte-e8w6ax-rotator 1.4s linear infinite;height:40px;width:40px}@keyframes svelte-e8w6ax-rotator{0%{transform:rotate(0deg)}100%{transform:rotate(270deg)}}.path.svelte-e8w6ax{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:svelte-e8w6ax-dash 1.4s ease-in-out infinite,\n        svelte-e8w6ax-colors 5.6s ease-in-out infinite}@keyframes svelte-e8w6ax-colors{0%{stroke:#1b4d75}50%{stroke:#0f2b42}100%{stroke:#1b4d75}}@keyframes svelte-e8w6ax-dash{0%{stroke-dashoffset:187\n        }50%{stroke-dashoffset:46.75;transform:rotate(135deg)}100%{stroke-dashoffset:187;transform:rotate(450deg)}}")}function mi(t){let n,r;return{c(){n=P("svg"),r=P("circle"),j(r,"class","path svelte-e8w6ax"),j(r,"fill","none"),j(r,"stroke-width","6"),j(r,"stroke-linecap","round"),j(r,"cx","33"),j(r,"cy","33"),j(r,"r","30"),j(n,"class","spinner svelte-e8w6ax"),j(n,"width","65px"),j(n,"height","65px"),j(n,"viewBox","0 0 66 66"),j(n,"xmlns","http://www.w3.org/2000/svg")},m(e,t){M(e,n,t),R(n,r)},p:e,i:e,o:e,d(e){e&&B(n)}}}class gi extends He{constructor(e){super(),je(this,e,null,mi,a,{},_i)}}function bi(e){E(e,"svelte-yhnnif",".waitDiv.svelte-yhnnif{height:56px;display:flex;align-items:center;justify-content:center}.botDiv.svelte-yhnnif{font-size:12px;position:absolute;bottom:4px;right:16px}.image.svelte-yhnnif{cursor:pointer;height:100%;width:100%;object-fit:cover}.imageModal.svelte-yhnnif{max-width:600px;height:100%;width:100%;object-fit:cover}.audioDiv.svelte-yhnnif{margin:0;width:268px !important;margin-top:4px !important}.file.svelte-yhnnif{margin:0 8px;text-overflow:ellipsis;overflow:hidden;width:188px}")}function vi(e,t,n){const r=e.slice();return r[10]=t[n],r}function yi(e,t,n){const r=e.slice();return r[10]=t[n],r}function wi(t){let n,r,s;return r=new gi({}),{c(){n=O("div"),Ne(r.$$.fragment),j(n,"class","waitDiv svelte-yhnnif")},m(e,t){M(e,n,t),Le(r,n,null),s=!0},p:e,i(e){s||(Re(r.$$.fragment,e),s=!0)},o(e){Ee(r.$$.fragment,e),s=!1},d(e){e&&B(n),De(r)}}}function ki(e){let t,n;return t=new ai({props:{source:e[1],controlsHeight:"24px",color:e[5].palette.primary.main}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.source=e[1]),32&n&&(r.color=e[5].palette.primary.main),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function xi(e){let t,n,r,s,i,o,a,l;return i=new pi({props:{$$slots:{default:[Ei]},$$scope:{ctx:e}}}),e[9](i),{c(){t=O("img"),s=L(),Ne(i.$$.fragment),c(t.src,n=e[1])||j(t,"src",n),j(t,"alt",r="Imagem "+(e[4]?"enviada":"recebida")),j(t,"class","image svelte-yhnnif")},m(n,r){M(n,t,r),M(n,s,r),Le(i,n,r),o=!0,a||(l=V(t,"click",e[8]),a=!0)},p(e,s){(!o||2&s&&!c(t.src,n=e[1]))&&j(t,"src",n),(!o||16&s&&r!==(r="Imagem "+(e[4]?"enviada":"recebida")))&&j(t,"alt",r);const a={};32786&s&&(a.$$scope={dirty:s,ctx:e}),i.$set(a)},i(e){o||(Re(i.$$.fragment,e),o=!0)},o(e){Ee(i.$$.fragment,e),o=!1},d(n){n&&B(t),n&&B(s),e[9](null),De(i,n),a=!1,l()}}}function Si(t){let n,r,s,i;return{c(){n=O("audio"),r=O("source"),c(r.src,s=t[1])||j(r,"src",s),j(r,"type",i=t[2]?.includes(".webm")?"audio/webm":t[2]?.includes(".mp3")?"audio/mpeg":"audio/ogg"),n.controls=!0,j(n,"class","audioDiv svelte-yhnnif")},m(e,t){M(e,n,t),R(n,r)},p(e,t){2&t&&!c(r.src,s=e[1])&&j(r,"src",s),4&t&&i!==(i=e[2]?.includes(".webm")?"audio/webm":e[2]?.includes(".mp3")?"audio/mpeg":"audio/ogg")&&j(r,"type",i)},i:e,o:e,d(e){e&&B(n)}}}function Ai(e){let t,n,r,s,i,o,a,l,c,u;return n=new xn({props:{path:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}}),l=new xn({props:{path:"M8 17V15H16V17H8M16 10L12 14L8 10H10.5V6H13.5V10H16M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2M12 4C7.58 4 4 7.58 4 12C4 16.42 7.58 20 12 20C16.42 20 20 16.42 20 12C20 7.58 16.42 4 12 4Z"}}),{c(){t=O("div"),Ne(n.$$.fragment),r=L(),s=O("p"),i=N(e[2]),o=L(),a=O("a"),Ne(l.$$.fragment),j(s,"class","file svelte-yhnnif"),j(a,"href",e[1]),j(a,"download",e[2]),j(a,"target","_blank"),j(a,"rel","noreferrer"),j(a,"style",c=`color: ${e[5].palette.bubbleText.sent}`),j(t,"class",b(fn`
          display: flex;
        `)+" svelte-yhnnif")},m(e,c){M(e,t,c),Le(n,t,null),R(t,r),R(t,s),R(s,i),R(t,o),R(t,a),Le(l,a,null),u=!0},p(e,t){(!u||4&t)&&F(i,e[2]),(!u||2&t)&&j(a,"href",e[1]),(!u||4&t)&&j(a,"download",e[2]),(!u||32&t&&c!==(c=`color: ${e[5].palette.bubbleText.sent}`))&&j(a,"style",c)},i(e){u||(Re(n.$$.fragment,e),Re(l.$$.fragment,e),u=!0)},o(e){Ee(n.$$.fragment,e),Ee(l.$$.fragment,e),u=!1},d(e){e&&B(t),De(n),De(l)}}}function Ti(e){let t,n,r=li(e[1],e[2]),s=[];for(let t=0;t<r.length;t+=1)s[t]=Mi(vi(e,r,t));const i=e=>Ee(s[e],1,1,(()=>{s[e]=null}));return{c(){t=O("div");for(let e=0;e<s.length;e+=1)s[e].c();j(t,"class",b(fn`
          white-space: pre-line;
        `)+" svelte-yhnnif")},m(e,r){M(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0},p(e,n){if(14&n){let o;for(r=li(e[1],e[2]),o=0;o<r.length;o+=1){const i=vi(e,r,o);s[o]?(s[o].p(i,n),Re(s[o],1)):(s[o]=Mi(i),s[o].c(),Re(s[o],1),s[o].m(t,null))}for(Ae(),o=r.length;o<s.length;o+=1)i(o);Te()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Re(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ee(s[e]);n=!1},d(e){e&&B(t),C(s,e)}}}function Ri(e){let t,n,r=li(e[1]),s=[];for(let t=0;t<r.length;t+=1)s[t]=Bi(yi(e,r,t));const i=e=>Ee(s[e],1,1,(()=>{s[e]=null}));return{c(){t=O("div");for(let e=0;e<s.length;e+=1)s[e].c();j(t,"class",b(fn`
          white-space: pre-line;
        `)+" svelte-yhnnif")},m(e,r){M(e,t,r);for(let e=0;e<s.length;e+=1)s[e].m(t,null);n=!0},p(e,n){if(2&n){let o;for(r=li(e[1]),o=0;o<r.length;o+=1){const i=yi(e,r,o);s[o]?(s[o].p(i,n),Re(s[o],1)):(s[o]=Bi(i),s[o].c(),Re(s[o],1),s[o].m(t,null))}for(Ae(),o=r.length;o<s.length;o+=1)i(o);Te()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Re(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)Ee(s[e]);n=!1},d(e){e&&B(t),C(s,e)}}}function Ei(e){let t,n,r;return{c(){t=O("img"),c(t.src,n=e[1])||j(t,"src",n),j(t,"alt",r="Imagem "+(e[4]?"enviada":"recebida")),j(t,"class","imageModal svelte-yhnnif")},m(e,n){M(e,t,n)},p(e,s){2&s&&!c(t.src,n=e[1])&&j(t,"src",n),16&s&&r!==(r="Imagem "+(e[4]?"enviada":"recebida"))&&j(t,"alt",r)},d(e){e&&B(t)}}}function $i(e){let t,n;return t=new Un({props:{content:e[10].content,type:e[10].type,downloadLink:e[3]}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};6&n&&(r.content=e[10].content),6&n&&(r.type=e[10].type),8&n&&(r.downloadLink=e[3]),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Ii(e){let t,n;return t=new Un({props:{content:e[10].content,type:e[10].type}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};6&n&&(r.content=e[10].content),6&n&&(r.type=e[10].type),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Mi(e){let t,n,r,s;const i=[Ii,$i],o=[];function a(e,t){return"file"!==e[10].type?0:1}return t=a(e),n=o[t]=i[t](e),{c(){n.c(),r=D()},m(e,n){o[t].m(e,n),M(e,r,n),s=!0},p(e,s){let l=t;t=a(e),t===l?o[t].p(e,s):(Ae(),Ee(o[l],1,1,(()=>{o[l]=null})),Te(),n=o[t],n?n.p(e,s):(n=o[t]=i[t](e),n.c()),Re(n,1),n.m(r.parentNode,r))},i(e){s||(Re(n),s=!0)},o(e){Ee(n),s=!1},d(e){o[t].d(e),e&&B(r)}}}function Bi(e){let t,n;return t=new Un({props:{content:e[10].content,type:e[10].type}}),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.content=e[10].content),2&n&&(r.type=e[10].type),t.$set(r)},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Ci(e){let t,n,r,s,i,o,a;const l=[Ri,Ti,Ai,Si,xi,ki,wi],c=[];function u(e,t){return"text"===e[0]?0:"fileText"===e[0]?1:"file"===e[0]||"document"===e[0]?2:"audio"===e[0]?3:"image"===e[0]?4:"video"===e[0]?5:"wait"===e[0]?6:-1}return~(r=u(e))&&(s=c[r]=l[r](e)),{c(){t=O("div"),n=O("div"),s&&s.c(),j(n,"class",i=b(e[7].bubblePaper)+" svelte-yhnnif"),j(t,"class",o=b(e[7].bubbleDiv)+" svelte-yhnnif")},m(e,s){M(e,t,s),R(t,n),~r&&c[r].m(n,null),a=!0},p(e,[h]){let f=r;r=u(e),r===f?~r&&c[r].p(e,h):(s&&(Ae(),Ee(c[f],1,1,(()=>{c[f]=null})),Te()),~r?(s=c[r],s?s.p(e,h):(s=c[r]=l[r](e),s.c()),Re(s,1),s.m(n,null)):s=null),(!a||128&h&&i!==(i=b(e[7].bubblePaper)+" svelte-yhnnif"))&&j(n,"class",i),(!a||128&h&&o!==(o=b(e[7].bubbleDiv)+" svelte-yhnnif"))&&j(t,"class",o)},i(e){a||(Re(s),a=!0)},o(e){Ee(s),a=!1},d(e){e&&B(t),~r&&c[r].d()}}}function Oi(e,t,n){let r;f(e,Ue,(e=>n(5,r=e)));let s,{type:i}=t,{content:o}=t,{fileName:a}=t,{fileId:l}=t,{sender:c}=t,u={};return e.$$set=e=>{"type"in e&&n(0,i=e.type),"content"in e&&n(1,o=e.content),"fileName"in e&&n(2,a=e.fileName),"fileId"in e&&n(3,l=e.fileId),"sender"in e&&n(4,c=e.sender)},e.$$.update=()=>{49&e.$$.dirty&&n(7,u={bubbleDiv:fn`
      display: flex;
      width: 100%;
      justify-content: ${c?"flex-end":"unset"};
    `,bubblePaper:fn`
      border-radius: ${r.shape.bubbleBorderRadius} !important;
      max-width: ${"text"===i?"80%":"image"===i||"video"===i?"250px":"audio"===i?"268px":"fit-content"};
      width: ${"text"===i?"fit-content":"image"===i||"video"===i?"250px":"audio"===i?"268px":"fit-content"};
      min-width: ${"image"===i||"video"===i?"250px":"audio"===i?"268px":"unset"};
      padding: ${"audio"===i?"8px":"16px"};
      background-color: ${c?r.palette.bubble.sent:r.palette.bubble.received};
      color: ${c?r.palette.bubbleText.sent:r.palette.bubbleText.received};
      position: relative;
      margin: 1px 16px 7px 16px;
    `})},[i,o,a,l,c,r,s,u,()=>{s.openModal()},function(e){ce[e?"unshift":"push"]((()=>{s=e,n(6,s)}))}]}class Pi extends He{constructor(e){super(),je(this,e,Oi,Ci,a,{type:0,content:1,fileName:2,fileId:3,sender:4},bi)}}const Ni={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const s=e[t],i=t+1<e.length,o=i?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|l>>6,f=63&l;a||(f=64,i||(h=64)),r.push(n[c],n[u],n[h],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t}(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==i||null==o||null==a)throw Error();const l=s<<2|i>>4;if(r.push(l),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Li{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Di(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Vi(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}class ji extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hi.prototype.create)}}class Hi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?function(e,t){return e.replace(Fi,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new ji(r,o,n)}}const Fi=/\{\$([^}]+)}/g;function qi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(zi(n)&&zi(i)){if(!qi(n,i))return!1}else if(n!==i)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function zi(e){return null!==e&&"object"==typeof e}function Ui(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}class Xi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Yi),void 0===r.error&&(r.error=Yi),void 0===r.complete&&(r.complete=Yi);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Yi(){}function Ki(e,t=1e3,n=2){const r=t*Math.pow(n,e),s=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+s)}function Gi(e){return e&&e._delegate?e._delegate:e}class Wi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zi="[DEFAULT]";class Qi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Li;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Ji(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Ji(e){return e===Zi?void 0:e}class eo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Qi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var to;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(to||(to={}));const no={debug:to.DEBUG,verbose:to.VERBOSE,info:to.INFO,warn:to.WARN,error:to.ERROR,silent:to.SILENT},ro=to.INFO,so={[to.DEBUG]:"log",[to.VERBOSE]:"log",[to.INFO]:"info",[to.WARN]:"warn",[to.ERROR]:"error"},io=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),s=so[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${r}]  ${e.name}:`,...n)};class oo{constructor(e){this.name=e,this._logLevel=ro,this._logHandler=io,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in to))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?no[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,to.DEBUG,...e),this._logHandler(this,to.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,to.VERBOSE,...e),this._logHandler(this,to.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,to.INFO,...e),this._logHandler(this,to.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,to.WARN,...e),this._logHandler(this,to.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,to.ERROR,...e),this._logHandler(this,to.ERROR,...e)}}class ao{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const lo="@firebase/app",co="0.7.9",uo=new oo("@firebase/app"),ho="[DEFAULT]",fo={[lo]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},po=new Map,_o=new Map;function mo(e,t){try{e.container.addComponent(t)}catch(n){uo.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function go(e){const t=e.name;if(_o.has(t))return uo.debug(`There were multiple attempts to register component ${t}.`),!1;_o.set(t,e);for(const t of po.values())mo(t,e);return!0}function bo(e,t){return e.container.getProvider(t)}const vo=new Hi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class yo{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vo.create("app-deleted",{appName:this._name})}}const wo="9.5.0";function ko(e="[DEFAULT]"){const t=po.get(e);if(!t)throw vo.create("no-app",{appName:e});return t}function xo(e,t,n){var r;let s=null!==(r=fo[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void uo.warn(e.join(" "))}go(new Wi(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}var So;So="",go(new Wi("platform-logger",(e=>new ao(e)),"PRIVATE")),xo(lo,co,So),xo(lo,co,"esm2017"),xo("fire-js","");function Ao(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function To(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}xo("firebase","9.5.0","app");const Ro=To,Eo=new Hi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$o=new oo("@firebase/auth");function Io(e,...t){$o.logLevel<=to.ERROR&&$o.error(`Auth (9.5.0): ${e}`,...t)}function Mo(e,...t){throw Co(e,...t)}function Bo(e,...t){return Co(e,...t)}function Co(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Eo.create(e,...t)}function Oo(e,t,...n){if(!e)throw Co(t,...n)}function Po(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Io(t),new Error(t)}function No(e,t){e||Po(t)}const Lo=new Map;function Do(e){No(e instanceof Function,"Expected a class definition");let t=Lo.get(e);return t?(No(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lo.set(e,t),t)}function Vo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function jo(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ho(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==jo()&&"https:"!==jo()&&!Vi()&&!("connection"in navigator)||navigator.onLine}class Fo{constructor(e,t){this.shortDelay=e,this.longDelay=t,No(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Di())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Ho()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qo(e,t){No(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class zo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Uo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Xo=new Fo(3e4,6e4);function Yo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ko(e,t,n,r,s={}){return Go(e,s,(()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const o=Ui(Object.assign({key:e.config.apiKey},i)).slice(1),a=new(zo.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&a.set("X-Firebase-Locale",e.languageCode),zo.fetch()(Zo(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))}))}async function Go(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Uo),t);try{const t=new Qo(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Jo(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Jo(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Jo(e,"email-already-in-use",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const r=Object.assign(Object.assign({},Ro()),{[t]:n});return new Hi("auth","Firebase",r).create(t,{appName:e.name})}(e,a,o);Mo(e,a)}}catch(t){if(t instanceof ji)throw t;Mo(e,"network-request-failed")}}async function Wo(e,t,n,r,s={}){const i=await Ko(e,t,n,r,s);return"mfaPendingCredential"in i&&Mo(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Zo(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?qo(e.config,s):`${e.config.apiScheme}://${s}`}class Qo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Bo(this.auth,"timeout"))),Xo.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jo(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Bo(e,t,r);return s.customData._tokenResponse=n,s}function ea(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function ta(e){return 1e3*Number(e)}function na(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Io("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return Ni.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(Io("Failed to decode base64 JWT payload"),null)}catch(e){return Io("Caught error parsing JWT payload as JSON",e),null}}async function ra(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ji&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class sa{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class ia{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ea(this.lastLoginAt),this.creationTime=ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oa(e){var t;const n=e.auth,r=await e.getIdToken(),s=await ra(e,async function(e,t){return Ko(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Oo(null==s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map((e=>{var{providerId:t}=e,n=Ao(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&i.passwordHash||(null==a?void 0:a.length)),f=!!u&&h,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ia(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(e,d)}class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oo(e.idToken,"internal-error"),Oo(void 0!==e.idToken,"internal-error"),Oo(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=na(e);return Oo(t,"internal-error"),Oo(void 0!==t.exp,"internal-error"),Oo(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Oo(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Go(e,{},(()=>{const n=Ui({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Zo(e,r,"/v1/token",`key=${s}`);return zo.fetch()(i,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new aa;return n&&(Oo("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Oo("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Oo("number"==typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Po("not implemented")}}function la(e,t){Oo("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ca{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Ao(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new sa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.metadata=new ia(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ra(this,this.stsTokenManager.getToken(this.auth,e));return Oo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Gi(e),r=await n.getIdToken(t),s=na(r);Oo(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"==typeof s.firebase?s.firebase:void 0,o=null==i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ea(ta(s.auth_time)),issuedAtTime:ea(ta(s.iat)),expirationTime:ea(ta(s.exp)),signInProvider:o||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Gi(e);await oa(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Oo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ca(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Oo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await oa(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ra(this,async function(e,t){return Ko(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,d=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,_=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,g=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:v,isAnonymous:y,providerData:w,stsTokenManager:k}=t;Oo(b&&k,e,"internal-error");const x=aa.fromJSON(this.name,k);Oo("string"==typeof b,e,"internal-error"),la(u,e.name),la(h,e.name),Oo("boolean"==typeof v,e,"internal-error"),Oo("boolean"==typeof y,e,"internal-error"),la(f,e.name),la(d,e.name),la(p,e.name),la(_,e.name),la(m,e.name),la(g,e.name);const S=new ca({uid:b,auth:e,email:h,emailVerified:v,displayName:u,isAnonymous:y,photoURL:d,phoneNumber:f,tenantId:p,stsTokenManager:x,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(S.providerData=w.map((e=>Object.assign({},e)))),_&&(S._redirectEventId=_),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new aa;r.updateFromServerResponse(t);const s=new ca({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await oa(s),s}}class ua{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ua.type="NONE";const ha=ua;function fa(e,t,n){return`firebase:${e}:${t}:${n}`}class da{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=fa(this.userKey,r.apiKey,s),this.fullPersistenceKey=fa("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ca._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new da(Do(ha),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||Do(ha);const i=fa(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(i);if(t){const r=ca._fromJSON(e,t);n!==s&&(o=r),s=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(i)}catch(e){}}))),new da(s,e,n)):new da(s,e,n)}}function pa(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ba(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_a(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ya(t))return"Blackberry";if(wa(t))return"Webos";if(ma(t))return"Safari";if((t.includes("chrome/")||ga(t))&&!t.includes("edge/"))return"Chrome";if(va(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function _a(e=Di()){return/firefox\//i.test(e)}function ma(e=Di()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ga(e=Di()){return/crios\//i.test(e)}function ba(e=Di()){return/iemobile/i.test(e)}function va(e=Di()){return/android/i.test(e)}function ya(e=Di()){return/blackberry/i.test(e)}function wa(e=Di()){return/webos/i.test(e)}function ka(e=Di()){return/iphone|ipad|ipod/i.test(e)}function xa(){return function(){const e=Di();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Sa(e=Di()){return ka(e)||va(e)||wa(e)||ya(e)||/windows phone/i.test(e)||ba(e)}function Aa(e,t=[]){let n;switch(e){case"Browser":n=pa(Di());break;case"Worker":n=`${pa(Di())}-${e}`;break;default:n=e}return`${n}/JsCore/9.5.0/${t.length?t.join(","):"FirebaseCore-web"}`}class Ta{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ea(this),this.idTokenSubscription=new Ea(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Eo,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Do(t)),this._initializationPromise=this.queue((async()=>{var n,r;this._deleted||(this.persistenceManager=await da.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,i=await this.tryRedirectSignIn(e);r&&r!==s||!(null==i?void 0:i.user)||(n=i.user)}return n?n._redirectEventId?(Oo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oa(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Gi(e):null;return t&&Oo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&Oo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Do(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hi("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Do(e)||this._popupRedirectResolver;Oo(t,this,"argument-error"),this.redirectPersistenceManager=await da.create(this,[Do(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return Oo(i,this,"internal-error"),i.then((()=>s(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ra(e){return Gi(e)}class Ea{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Xi(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Oo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class $a{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Po("not implemented")}_getIdTokenResponse(e){return Po("not implemented")}_linkToIdToken(e,t){return Po("not implemented")}_getReauthenticationResolver(e){return Po("not implemented")}}async function Ia(e,t){return Wo(e,"POST","/v1/accounts:signInWithIdp",Yo(e,t))}class Ma extends $a{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Ao(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Ma(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ia(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ia(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ia(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ui(t)}return e}}class Ba{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ca extends Ba{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Oa extends Ca{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Oa.credential(e.oauthAccessToken)}catch(e){return null}}}Oa.FACEBOOK_SIGN_IN_METHOD="facebook.com",Oa.PROVIDER_ID="facebook.com";class Pa extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ma._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Pa.credential(t,n)}catch(e){return null}}}Pa.GOOGLE_SIGN_IN_METHOD="google.com",Pa.PROVIDER_ID="google.com";class Na extends Ca{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Na.credential(e.oauthAccessToken)}catch(e){return null}}}Na.GITHUB_SIGN_IN_METHOD="github.com",Na.PROVIDER_ID="github.com";class La extends Ca{constructor(){super("twitter.com")}static credential(e,t){return Ma._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return La.credential(t,n)}catch(e){return null}}}La.TWITTER_SIGN_IN_METHOD="twitter.com",La.PROVIDER_ID="twitter.com";class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await ca._fromIdTokenResponse(e,n,r),i=Va(n);return new Da({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Va(n);return new Da({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Va(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function ja(e){var t;const n=Ra(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Da({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await async function(e,t){return Wo(e,"POST","/v1/accounts:signUp",Yo(e,t))}(n,{returnSecureToken:!0}),s=await Da._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}class Ha extends ji{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ha.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ha(e,t,n,r)}}function Fa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ha._fromErrorAndOperation(e,n,t,r);throw n}))}const qa="__sak";class za{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qa,"1"),this.storage.removeItem(qa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ua extends za{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Di();return ma(e)||ka(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Sa(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);xa()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ua.type="LOCAL";const Xa=Ua;class Ya extends za{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ya.type="SESSION";const Ka=Ya;class Ga{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ga(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Wa(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ga.receivers=[];class Za{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise(((o,a)=>{const l=Wa("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function Qa(){return window}function Ja(){return void 0!==Qa().WorkerGlobalScope&&"function"==typeof Qa().importScripts}const el="firebaseLocalStorageDb",tl="firebaseLocalStorage",nl="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function sl(e,t){return e.transaction([tl],t?"readwrite":"readonly").objectStore(tl)}function il(){const e=indexedDB.open(el,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(tl,{keyPath:nl})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(tl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(el);return new rl(e).toPromise()}(),t(await il()))}))}))}async function ol(e,t,n){const r=sl(e,!0).put({[nl]:t,value:n});return new rl(r).toPromise()}function al(e,t){const n=sl(e,!0).delete(t);return new rl(n).toPromise()}class ll{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await il()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ja()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ga._getInstance(Ja()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Za(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await il();return await ol(e,qa,"1"),await al(e,qa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ol(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=sl(e,!1).get(t),r=await new rl(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>al(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=sl(e,!1).getAll();return new rl(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ll.type="LOCAL";const cl=ll;function ul(e){return new Promise(((t,n)=>{const r=document.createElement("script");var s,i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Bo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(i=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==i?i:document).appendChild(r)}))}new Fo(3e4,6e4);class hl extends $a{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ia(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ia(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ia(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fl(e){return async function(e,t,n=!1){const r="signIn",s=await Fa(e,r,t),i=await Da._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}(e.auth,new hl(e),e.bypassAuthState)}function dl(e){const{auth:t,user:n}=e;return Oo(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e,s="reauthenticate";try{const i=await ra(e,Fa(r,s,t,e),n);Oo(i.idToken,r,"internal-error");const o=na(i.idToken);Oo(o,r,"internal-error");const{sub:a}=o;return Oo(e.uid===a,r,"user-mismatch"),Da._forOperation(e,s,i)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Mo(r,"user-mismatch"),e}}(n,new hl(e),e.bypassAuthState)}async function pl(e){const{auth:t,user:n}=e;return Oo(n,t,"internal-error"),async function(e,t,n=!1){const r=await ra(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Da._forOperation(e,"link",r)}(n,new hl(e),e.bypassAuthState)}class _l{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fl;case"linkViaPopup":case"linkViaRedirect":return pl;case"reauthViaPopup":case"reauthViaRedirect":return dl;default:Mo(this.auth,"internal-error")}}resolve(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ml=new Fo(2e3,1e4);class gl extends _l{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,gl.currentPopupAction&&gl.currentPopupAction.cancel(),gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oo(e,this.auth,"internal-error"),e}async onExecution(){No(1===this.filter.length,"Popup operations only handle one event");const e=Wa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Bo(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Bo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Bo(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,ml.get())};e()}}gl.currentPopupAction=null;const bl="pendingRedirect",vl=new Map;class yl extends _l{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=vl.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return fa(bl,e.config.apiKey,e.name)}(t),r=function(e){return Do(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}vl.set(this.auth._key(),e)}return this.bypassAuthState||vl.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function wl(e,t,n=!1){const r=Ra(e),s=function(e,t){return t?Do(t):(Oo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),i=new yl(r,s,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class kl{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Sl(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Bo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xl(e))}saveEventToCache(e){this.cachedEventUids.add(xl(e)),this.lastProcessedEventTime=Date.now()}}function xl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Sl({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Al=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tl=/^https?/;async function Rl(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Ko(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(El(e))return}catch(e){}Mo(e,"unauthorized-domain")}function El(e){const t=Vo(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Tl.test(n))return!1;if(Al.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const $l=new Fo(3e4,6e4);function Il(){const e=Qa().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Ml(e){return new Promise(((t,n)=>{var r,s,i;function o(){Il(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Il(),n(Bo(e,"network-request-failed"))},timeout:$l.get()})}if(null===(s=null===(r=Qa().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Qa().gapi)||void 0===i?void 0:i.load)){const t=function(e){return`__${e}${Math.floor(1e6*Math.random())}`}("iframefcb");return Qa()[t]=()=>{gapi.load?o():n(Bo(e,"network-request-failed"))},ul(`https://apis.google.com/js/api.js?onload=${t}`)}o()}})).catch((e=>{throw Bl=null,e}))}let Bl=null;const Cl=new Fo(5e3,15e3),Ol={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nl(e){const t=e.config;Oo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?qo(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:wo},s=Pl.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ui(r).slice(1)}`}async function Ll(e){const t=await function(e){return Bl=Bl||Ml(e),Bl}(e),n=Qa().gapi;return Oo(n,e,"internal-error"),t.open({where:document.body,url:Nl(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ol,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Bo(e,"network-request-failed"),i=Qa().setTimeout((()=>{r(s)}),Cl.get());function o(){Qa().clearTimeout(i),n(t)}t.ping(o).then(o,(()=>{r(s)}))}))))}const Dl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function jl(e,t,n,r=500,s=600){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Dl),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Di().toLowerCase();n&&(a=ga(c)?"_blank":n),_a(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Di()){var t;return ka(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Vl(null);const h=window.open(t||"",a,u);Oo(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Vl(h)}const Hl="__/auth/handler",Fl="emulator/auth/handler";function ql(e,t,n,r,s,i){Oo(e.config.authDomain,e,"auth-domain-config-required"),Oo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:wo,eventId:s};if(t instanceof Ba){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))o[e]=t}if(t instanceof Ca){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Hl}`;return qo(e,Fl)}(e)}?${Ui(a).slice(1)}`}const zl="webStorageSupport";const Ul=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ka,this._completeRedirectFn=wl}async _openPopup(e,t,n,r){var s;No(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return jl(e,ql(e,t,n,Vo(),r),Wa())}async _openRedirect(e,t,n,r){return await this._originValidation(e),function(e){Qa().location.href=e}(ql(e,t,n,Vo(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(No(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await Ll(e),n=new kl(e);return t.register("authEvent",(t=>{Oo(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zl,{type:zl},(n=>{var r;const s=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==s&&t(!!s),Mo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Rl(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sa()||ma()||ka()}};var Xl,Yl="@firebase/auth",Kl="0.19.3";class Gl{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Xl="Browser",go(new Wi("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=n.options;return(e=>{Oo(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),Oo(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:s,clientPlatform:Xl,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aa(Xl)},i=new Ta(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Do);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,t),i})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),go(new Wi("auth-internal",(e=>(e=>new Gl(e))(Ra(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),xo(Yl,Kl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Xl)),xo(Yl,Kl,"esm2017");var Wl={exports:{}};(function(e){function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var s,i=new Promise((function(i,o){n(s=e[t].apply(e,r)).then(i,o)}));return i.request=s,i}function s(e,t,n){var s=r(e,t,n);return s.then((function(e){if(e)return new u(e,s.request)}))}function i(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,s){s.forEach((function(s){s in n.prototype&&(e.prototype[s]=function(){return r(this[t],s,arguments)})}))}function a(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function l(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return s(this[t],r,arguments)})}))}function c(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function _(e,t,n){var s=r(indexedDB,"open",[e,t]),i=s.request;return i&&(i.onupgradeneeded=function(e){n&&n(new d(i.result,e.oldVersion,i.transaction))}),s.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}i(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),l(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),i(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new u(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},i(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),l(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},i(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},i(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},i(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],s=this._store||this._index,i=s[e].apply(s,n.slice(0,-1));i.onsuccess=function(){r(i.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(s){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():s(r)):s(r)}))}))})})),e.openDb=_,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})})(Wl.exports);const Zl="@firebase/installations",Ql="0.5.4",Jl=1e4,ec="w:0.5.4",tc="FIS_v2",nc=36e5,rc=new Hi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function sc(e){return e instanceof ji&&e.code.includes("request-failed")}function ic({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function oc(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ac(e,t){const n=(await t.json()).error;return rc.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function lc({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function cc(e,{refreshToken:t}){const n=lc(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}async function uc(e){const t=await e();return t.status>=500&&t.status<600?e():t}function hc(e){return new Promise((t=>{setTimeout(t,e)}))}const fc=/^[cdef][\w-]{21}$/;function dc(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return fc.test(t)?t:""}catch(e){return""}}function pc(e){return`${e.appName}!${e.appId}`}const _c=new Map;function mc(e,t){const n=pc(e);gc(n,t),function(e,t){const n=function(){!bc&&"BroadcastChannel"in self&&(bc=new BroadcastChannel("[Firebase] FID Change"),bc.onmessage=e=>{gc(e.data.key,e.data.fid)});return bc}();n&&n.postMessage({key:e,fid:t});0===_c.size&&bc&&(bc.close(),bc=null)}(n,t)}function gc(e,t){const n=_c.get(e);if(n)for(const e of n)e(t)}let bc=null;const vc="firebase-installations-store";let yc=null;function wc(){return yc||(yc=Wl.exports.openDb("firebase-installations-database",1,(e=>{if(0===e.oldVersion)e.createObjectStore(vc)}))),yc}async function kc(e,t){const n=pc(e),r=(await wc()).transaction(vc,"readwrite"),s=r.objectStore(vc),i=await s.get(n);return await s.put(t,n),await r.complete,i&&i.fid===t.fid||mc(e,t.fid),t}async function xc(e){const t=pc(e),n=(await wc()).transaction(vc,"readwrite");await n.objectStore(vc).delete(t),await n.complete}async function Sc(e,t){const n=pc(e),r=(await wc()).transaction(vc,"readwrite"),s=r.objectStore(vc),i=await s.get(n),o=t(i);return void 0===o?await s.delete(n):await s.put(o,n),await r.complete,!o||i&&i.fid===o.fid||mc(e,o.fid),o}async function Ac(e){let t;const n=await Sc(e,(n=>{const r=function(e){return Ec(e||{fid:dc(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(rc.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,{fid:t}){const n=ic(e),r=lc(e),s={fid:t,authVersion:tc,appId:e.appId,sdkVersion:ec},i={method:"POST",headers:r,body:JSON.stringify(s)},o=await uc((()=>fetch(n,i)));if(o.ok){const e=await o.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:oc(e.authToken)}}throw await ac("Create Installation",o)}(e,t);return kc(e,n)}catch(n){throw sc(n)&&409===n.customData.serverCode?await xc(e):await kc(e,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Tc(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Tc(e){let t=await Rc(e);for(;1===t.registrationStatus;)await hc(100),t=await Rc(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ac(e);return n||t}return t}function Rc(e){return Sc(e,(e=>{if(!e)throw rc.create("installation-not-found");return Ec(e)}))}function Ec(e){return 1===(t=e).registrationStatus&&t.registrationTime+Jl<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function $c({appConfig:e,platformLoggerProvider:t},n){const r=function(e,{fid:t}){return`${ic(e)}/${t}/authTokens:generate`}(e,n),s=cc(e,n),i=t.getImmediate({optional:!0});i&&s.append("x-firebase-client",i.getPlatformInfoString());const o={installation:{sdkVersion:ec}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await uc((()=>fetch(r,a)));if(l.ok){return oc(await l.json())}throw await ac("Generate Auth Token",l)}async function Ic(e,t=!1){let n;const r=await Sc(e.appConfig,(r=>{if(!Bc(r))throw rc.create("not-registered");const s=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+nc}(e)}(s))return r;if(1===s.requestStatus)return n=async function(e,t){let n=await Mc(e.appConfig);for(;1===n.authToken.requestStatus;)await hc(100),n=await Mc(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Ic(e,t):r}(e,t),r;{if(!navigator.onLine)throw rc.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await $c(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await kc(e.appConfig,r),n}catch(n){if(!sc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await kc(e.appConfig,n)}else await xc(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Mc(e){return Sc(e,(e=>{if(!Bc(e))throw rc.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Jl<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Bc(e){return void 0!==e&&2===e.registrationStatus}async function Cc(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await Ac(e);t&&await t}(n.appConfig);return(await Ic(n,t)).token}function Oc(e){return rc.create("missing-app-config-values",{valueName:e})}const Pc="installations",Nc=e=>{const t=bo(e.getProvider("app").getImmediate(),Pc).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Ac(t.appConfig);return r?r.catch(console.error):Ic(t).catch(console.error),n.fid}(t),getToken:e=>Cc(t,e)}};go(new Wi(Pc,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Oc("App Configuration");if(!e.name)throw Oc("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Oc(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,platformLoggerProvider:bo(t,"platform-logger"),_delete:()=>Promise.resolve()}}),"PUBLIC")),go(new Wi("installations-internal",Nc,"PRIVATE")),xo(Zl,Ql),xo(Zl,Ql,"esm2017");const Lc="analytics",Dc="https://www.googletagmanager.com/gtag/js",Vc=new oo("@firebase/analytics");function jc(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Hc(e,t,n,r){return async function(s,i,o){try{"event"===s?await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await jc(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(e){Vc.error(e)}}(e,t,n,i,o):"config"===s?await async function(e,t,n,r,s,i){const o=r[s];try{if(o)await t[o];else{const e=(await jc(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){Vc.error(e)}e("config",s,i)}(e,t,n,r,i,o):e("set",i)}catch(e){Vc.error(e)}}}const Fc=new Hi("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'});const qc=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function zc(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Uc(e,t=qc,n){const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw Fc.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Fc.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Yc;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Xc({appId:r,apiKey:s,measurementId:i},o,a,t)}async function Xc(e,{throttleEndTimeMillis:t,backoffCount:n},r,s=qc){const{appId:i,measurementId:o}=e;try{await function(e,t){return new Promise(((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(i),r(Fc.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){if(o)return Vc.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e.message}]`),{appId:i,measurementId:o};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:zc(r)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(i,s);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw Fc.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(i),t}catch(t){if(!function(e){if(!(e instanceof ji&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(i),o)return Vc.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${t.message}]`),{appId:i,measurementId:o};throw t}const a=503===Number(t.customData.httpStatus)?Ki(n,s.intervalMillis,30):Ki(n,s.intervalMillis),l={throttleEndTimeMillis:Date.now()+a,backoffCount:n+1};return s.setThrottleMetadata(i,l),Vc.debug(`Calling attemptFetch again in ${a} millis`),Xc(e,l,r,s)}}class Yc{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}async function Kc(){if("object"!=typeof indexedDB)return Vc.warn(Fc.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}catch(e){return Vc.warn(Fc.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0}async function Gc(e,t,n,r,s,i,o){var a;const l=Uc(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Vc.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Vc.error(e))),t.push(l);const c=Kc().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Dc))return t;return null})()||function(e,t){const n=document.createElement("script");n.src=`${Dc}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(i,u.measurementId),s("js",new Date);const f=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return f.origin="firebase",f.update=!0,null!=h&&(f.firebase_id=h),s("config",u.measurementId,f),u.measurementId}class Wc{constructor(e){this.app=e}_delete(){return delete Zc[this.app.options.appId],Promise.resolve()}}let Zc={},Qc=[];const Jc={};let eu,tu,nu="dataLayer",ru=!1;function su(){const e=[];if(Vi()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Fc.create("invalid-analytics-context",{errorInfo:t});Vc.warn(n.message)}}function iu(e,t,n){su();const r=e.options.appId;if(!r)throw Fc.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Fc.create("no-api-key");Vc.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zc[r])throw Fc.create("already-exists",{id:r});if(!ru){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(nu);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(...e){window[r].push(arguments)};return window[s]&&"function"==typeof window[s]&&(i=window[s]),window[s]=Hc(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(Zc,Qc,Jc,nu,"gtag");tu=e,eu=t,ru=!0}Zc[r]=Gc(e,Qc,Jc,t,eu,nu,n);return new Wc(e)}function ou(e,t,n,r){e=Gi(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(tu,Zc[e.app.options.appId],t,n,r).catch((e=>Vc.error(e)))}const au="@firebase/analytics",lu="0.7.4";go(new Wi(Lc,((e,{options:t})=>iu(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),go(new Wi("analytics-internal",(function(e){try{const t=e.getProvider(Lc).getImmediate();return{logEvent:(e,n,r)=>ou(t,e,n,r)}}catch(e){throw Fc.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),xo(au,lu),xo(au,lu,"esm2017");const cu=function(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:ho,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw vo.create("bad-app-name",{appName:String(r)});const s=po.get(r);if(s){if(qi(e,s.options)&&qi(n,s.config))return s;throw vo.create("duplicate-app",{appName:r})}const i=new eo(r);for(const e of _o.values())i.addComponent(e);const o=new yo(e,n,i);return po.set(r,o),o}({apiKey:"AIzaSyDcNPKmI_NDRfNQQD7cH2YcQB8m-M24zrk",authDomain:"tykhe-auth.firebaseapp.com",databaseURL:"https://tykhe-auth.firebaseio.com",projectId:"tykhe-auth",storageBucket:"tykhe-auth.appspot.com",messagingSenderId:"1051915871341",appId:"1:1051915871341:web:ba87d3fb1bf42d2d430b64"});!function(e=ko()){const t=bo(e=Gi(e),Lc);t.isInitialized()?t.getImmediate():function(e,t={}){const n=bo(e,Lc);if(n.isInitialized()){const e=n.getImmediate();if(qi(t,n.getOptions()))return e;throw Fc.create("already-initialized")}n.initialize({options:t})}(e)}(cu);const uu=function(e=ko()){const t=bo(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=bo(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(qi(n.getOptions(),null!=t?t:{}))return e;Mo(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ul,persistence:[cl,Xa,Ka]})}(cu);new Pa;(new Oa).addScope("user_birthday");const hu=ze([]),fu=ze(null),du=ze(""),pu=ze(!1),_u=ze(!1),mu=qe({user:null,isLoggedIn:!1},(e=>uu.onAuthStateChanged((async t=>{e(t?{user:t,isLoggedIn:!0}:{user:null,isLoggedIn:!1})})))),gu=ze("");var bu=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vu=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],yu=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=bu.exec(e||""),i={},o=14;o--;)i[vu[o]]=s[o]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,i.path),i.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,i.query),i};var wu={exports:{}};try{wu.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){wu.exports=!1}var ku=wu.exports,xu="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Su(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||ku))return new XMLHttpRequest}catch(e){}if(!t)try{return new(xu[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function Au(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Tu=setTimeout,Ru=clearTimeout;function Eu(e,t){t.useNativeTimers?(e.setTimeoutFn=Tu.bind(xu),e.clearTimeoutFn=Ru.bind(xu)):(e.setTimeoutFn=setTimeout.bind(xu),e.clearTimeoutFn=clearTimeout.bind(xu))}var $u=Iu;function Iu(e){if(e)return function(e){for(var t in Iu.prototype)e[t]=Iu.prototype[t];return e}(e)}Iu.prototype.on=Iu.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Iu.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Iu.prototype.off=Iu.prototype.removeListener=Iu.prototype.removeAllListeners=Iu.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<r.length;s++)if((n=r[s])===t||n.fn===t){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Iu.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var s=(n=n.slice(0)).length;r<s;++r)n[r].apply(this,t)}return this},Iu.prototype.emitReserved=Iu.prototype.emit,Iu.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Iu.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Mu=Object.create(null);Mu.open="0",Mu.close="1",Mu.ping="2",Mu.pong="3",Mu.message="4",Mu.upgrade="5",Mu.noop="6";const Bu=Object.create(null);Object.keys(Mu).forEach((e=>{Bu[Mu[e]]=e}));const Cu={type:"error",data:"parser error"},Ou="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Pu="function"==typeof ArrayBuffer,Nu=({type:e,data:t},n,r)=>{return Ou&&t instanceof Blob?n?r(t):Lu(t,r):Pu&&(t instanceof ArrayBuffer||(s=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer))?n?r(t):Lu(new Blob([t]),r):r(Mu[e]+(t||""));var s},Lu=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)};for(var Du="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ju=0;ju<Du.length;ju++)Vu[Du.charCodeAt(ju)]=ju;const Hu="function"==typeof ArrayBuffer,Fu=(e,t)=>{if("string"!=typeof e)return{type:"message",data:zu(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:qu(e.substring(1),t)};return Bu[n]?e.length>1?{type:Bu[n],data:e.substring(1)}:{type:Bu[n]}:Cu},qu=(e,t)=>{if(Hu){const n=function(e){var t,n,r,s,i,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=Vu[e.charCodeAt(t)],r=Vu[e.charCodeAt(t+1)],s=Vu[e.charCodeAt(t+2)],i=Vu[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|s>>2,u[l++]=(3&s)<<6|63&i;return c}(e);return zu(n,t)}return{base64:!0,data:e}},zu=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e,Uu=String.fromCharCode(30);class Xu extends $u{constructor(e){super(),this.writable=!1,Eu(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t){const n=new Error(e);return n.type="TransportError",n.description=t,super.emit("error",n),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(e){const t=Fu(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emit("packet",e)}onClose(){this.readyState="closed",super.emit("close")}}var Yu,Ku="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Gu={},Wu=0,Zu=0;function Qu(e){var t="";do{t=Ku[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function Ju(){var e=Qu(+new Date);return e!==Yu?(Wu=0,Yu=e):e+"."+Qu(Wu++)}for(;Zu<64;Zu++)Gu[Ku[Zu]]=Zu;Ju.encode=Qu,Ju.decode=function(e){var t=0;for(Zu=0;Zu<e.length;Zu++)t=64*t+Gu[e.charAt(Zu)];return t};var eh=Ju,th={encode:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},decode:function(e){for(var t={},n=e.split("&"),r=0,s=n.length;r<s;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}};class nh extends Xu{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(e){((e,t)=>{const n=e.split(Uu),r=[];for(let e=0;e<n.length;e++){const s=Fu(n[e],t);if(r.push(s),"error"===s.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose(),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach(((e,i)=>{Nu(e,!1,(e=>{r[i]=e,++s===n&&t(r.join(Uu))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=eh()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const r=th.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}}function rh(){}const sh=null!=new Su({xdomain:!1}).responseType;class ih extends $u{constructor(e,t){super(),Eu(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=Au(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new Su(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=ih.requestsCount++,ih.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(e){this.emit("data",e),this.onSuccess()}onError(e){this.emit("error",e),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=rh,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete ih.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&this.onData(e)}abort(){this.cleanup()}}if(ih.requestsCount=0,ih.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",oh);else if("function"==typeof addEventListener){addEventListener("onpagehide"in xu?"pagehide":"unload",oh,!1)}function oh(){for(let e in ih.requests)ih.requests.hasOwnProperty(e)&&ih.requests[e].abort()}const ah="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),lh=xu.WebSocket||xu.MozWebSocket,ch="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class uh extends Xu{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=ch?{}:Au(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=ch?new lh(e,t,n):t?new lh(e,t):new lh(e)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Nu(n,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(e){}r&&ah((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=eh()),this.supportsBinary||(e.b64=1);const r=th.encode(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!(!lh||"__initialize"in lh&&this.name===uh.prototype.name)}}const hh={websocket:uh,polling:class extends nh{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=sh&&!t}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new ih(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e=>{this.onError("xhr post error",e)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e=>{this.onError("xhr poll error",e)})),this.pollXhr=e}}};class fh extends $u{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=yu(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=yu(t.host).host),Eu(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=th.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=function(e){const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new hh[e](n)}open(){let e;if(this.opts.rememberUpgrade&&fh.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(e){let t=this.createTransport(e),n=!1;fh.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;fh.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function s(){n||(n=!0,c(),t.close(),t=null)}const i=e=>{const n=new Error("probe error: "+e);n.transport=t.name,s(),this.emitReserved("upgradeError",n)};function o(){i("transport closed")}function a(){i("socket closed")}function l(e){t&&e.name!==t.name&&s()}const c=()=>{t.removeListener("open",r),t.removeListener("error",i),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",r),t.once("error",i),t.once("close",o),this.once("close",a),this.once("upgrading",l),t.open()}onOpen(){if(this.readyState="open",fh.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}onError(e){fh.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}fh.protocol=4,fh.protocol;const dh="function"==typeof ArrayBuffer,ph=Object.prototype.toString,_h="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ph.call(Blob),mh="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ph.call(File);function gh(e){return dh&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||_h&&e instanceof Blob||mh&&e instanceof File}function bh(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(bh(e[t]))return!0;return!1}if(gh(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return bh(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&bh(e[t]))return!0;return!1}function vh(e){const t=[],n=e.data,r=e;return r.data=yh(n,t),r.attachments=t.length,{packet:r,buffers:t}}function yh(e,t){if(!e)return e;if(gh(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=yh(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=yh(e[r],t));return n}return e}function wh(e,t){return e.data=kh(e.data,t),e.attachments=void 0,e}function kh(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=kh(e[n],t);else if("object"==typeof e)for(const n in e)e.hasOwnProperty(n)&&(e[n]=kh(e[n],t));return e}var xh;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(xh||(xh={}));class Sh extends $u{constructor(){super()}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===xh.BINARY_EVENT||t.type===xh.BINARY_ACK?(this.reconstructor=new Ah(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t);else{if(!gh(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===xh[n.type])throw new Error("unknown packet type "+n.type);if(n.type===xh.BINARY_EVENT||n.type===xh.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(r,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!Sh.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}static isPayloadValid(e,t){switch(e){case xh.CONNECT:return"object"==typeof t;case xh.DISCONNECT:return void 0===t;case xh.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case xh.EVENT:case xh.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case xh.ACK:case xh.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Ah{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=wh(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Th=Object.freeze({__proto__:null,protocol:5,get PacketType(){return xh},Encoder:class{encode(e){return e.type!==xh.EVENT&&e.type!==xh.ACK||!bh(e)?[this.encodeAsString(e)]:(e.type=e.type===xh.EVENT?xh.BINARY_EVENT:xh.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==xh.BINARY_EVENT&&e.type!==xh.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),t}encodeAsBinary(e){const t=vh(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},Decoder:Sh});function Rh(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Eh=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $h extends $u{constructor(e,t,n){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Rh(e,"open",this.onopen.bind(this)),Rh(e,"packet",this.onpacket.bind(this)),Rh(e,"error",this.onerror.bind(this)),Rh(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Eh.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const n={type:xh.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),n.id=e}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?this.packet(n):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){const n=this.flags.timeout;if(void 0===n)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),n);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,[null,...e])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this.packet({type:xh.CONNECT,data:e})})):this.packet({type:xh.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",e)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case xh.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xh.EVENT:case xh.BINARY_EVENT:this.onevent(e);break;case xh.ACK:case xh.BINARY_ACK:this.onack(e);break;case xh.DISCONNECT:this.ondisconnect();break;case xh.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:xh.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>this.packet(e))),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xh.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var Ih=Mh;function Mh(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Mh.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Mh.prototype.reset=function(){this.attempts=0},Mh.prototype.setMin=function(e){this.ms=e},Mh.prototype.setMax=function(e){this.max=e},Mh.prototype.setJitter=function(e){this.jitter=e};class Bh extends $u{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Eu(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Ih({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Th;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new fh(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Rh(t,"open",(function(){n.onopen(),e&&e()})),s=Rh(t,"error",(t=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&r();const n=this.setTimeoutFn((()=>{r(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(r),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Rh(e,"ping",this.onping.bind(this)),Rh(e,"data",this.ondata.bind(this)),Rh(e,"error",this.onerror.bind(this)),Rh(e,"close",this.onclose.bind(this)),Rh(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new $h(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ch={};function Oh(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=yu(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+t,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=Ch[s]&&i in Ch[s].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Bh(r,t):(Ch[s]||(Ch[s]=new Bh(r,t)),a=Ch[s]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Oh,{Manager:Bh,Socket:$h,io:Oh,connect:Oh});const Ph=async({newSocket:e,userAuth:t})=>{e.on("connect",(async()=>{var n;_u.set(!0),(null==t?void 0:t.isLoggedIn)&&(e.on("joined_room",(e=>{var n,r;(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.isAnonymous)&&du.set(e.chat._id);const s=null===(r=e.chat)||void 0===r?void 0:r.messages.flatMap((e=>{var t,n,r,s;return"text"===e.messageType?{type:"text",sender:"customer"===e.whoSent,message:{content:e.text},bot:"bot"===e.whoSent,manager:"manager"===e.whoSent}:"fileText"===e.messageType?{type:"fileText",sender:"customer"===e.whoSent,message:{content:e.text,filename:0!==e.files.length?null!==(n=null===(t=e.files[0])||void 0===t?void 0:t.originalName)&&void 0!==n?n:null===(r=e.files[0])||void 0===r?void 0:r.name:void 0,fileId:0!==e.files.length?null===(s=e.files[0])||void 0===s?void 0:s.url:void 0},bot:"bot"===e.whoSent,manager:"manager"===e.whoSent}:e.files.map((t=>{var n,r;return{type:null===(n=t.fileType)||void 0===n?void 0:n.split("/")[0],sender:"customer"===e.whoSent,message:{content:t.url,filename:null!==(r=t.originalName)&&void 0!==r?r:t.name},bot:"bot"===e.whoSent,manager:"manager"===e.whoSent}}))}));hu.update((e=>[...s,...e]))})),(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.isAnonymous)||(async({socket:e,userAuth:t})=>{var n;const r=await(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.getIdToken());r&&e.emit("join_category",{firebaseToken:r})})({socket:e,userAuth:t})),e.on("error_join_room",(e=>{})),e.on("new_message",(e=>{"customer"!==e.whoSent&&hu.update((t=>{var n,r,s;return[{type:e.messageType,message:{content:e.text,filename:"fileText"===e.messageType&&(null===(n=e.files)||void 0===n?void 0:n.length)>0?null!==(r=e.files[0].originalName)&&void 0!==r?r:e.files[0].name:void 0,fileId:(null===(s=e.files)||void 0===s?void 0:s.length)>0?e.files[0].url:void 0},sender:"customer"===e.whoSent,bot:"bot"===e.whoSent,manager:"manager"===e.whoSent},...t]}))})),e.on("new_file",(e=>{if("customer"!==e.whoSent){const t=e.files.map((t=>{var n,r;return{type:null===(n=t.fileType)||void 0===n?void 0:n.split("/")[0],message:{content:t.url,filename:null!==(r=t.originalName)&&void 0!==r?r:t.name},sender:"customer"===e.whoSent,bot:"bot"===e.whoSent,manager:"manager"===e.whoSent}}));hu.update((e=>[...t,...e]))}})),e.on("confirm_message",(e=>{"customer"===e.whoSent&&hu.update((t=>{let n=[...t];const r=n.findIndex((t=>t.message.content===e.originalText));return e.newText?n[r]=Object.assign(Object.assign({},n[r]),{message:Object.assign(Object.assign({},n[r].message),{content:e.newText})}):n.splice(r,1),n}))})),null==e||e.on("transfer_category",(async n=>{var r;const s=await(null===(r=null==t?void 0:t.user)||void 0===r?void 0:r.getIdToken());e.emit("transfer_category",{firebaseToken:s,chatId:n.chatId});let i=h(du);e.emit("leave_room",{chatId:i})}))}))};var Nh={exports:{}},Lh=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Dh=Lh,Vh=Object.prototype.toString;function jh(e){return"[object Array]"===Vh.call(e)}function Hh(e){return void 0===e}function Fh(e){return null!==e&&"object"==typeof e}function qh(e){if("[object Object]"!==Vh.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function zh(e){return"[object Function]"===Vh.call(e)}function Uh(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),jh(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}var Xh={isArray:jh,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Vh.call(e)},isBuffer:function(e){return null!==e&&!Hh(e)&&null!==e.constructor&&!Hh(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Fh,isPlainObject:qh,isUndefined:Hh,isDate:function(e){return"[object Date]"===Vh.call(e)},isFile:function(e){return"[object File]"===Vh.call(e)},isBlob:function(e){return"[object Blob]"===Vh.call(e)},isFunction:zh,isStream:function(e){return Fh(e)&&zh(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Uh,merge:function e(){var t={};function n(n,r){qh(t[r])&&qh(n)?t[r]=e(t[r],n):qh(n)?t[r]=e({},n):jh(n)?t[r]=n.slice():t[r]=n}for(var r=0,s=arguments.length;r<s;r++)Uh(arguments[r],n);return t},extend:function(e,t,n){return Uh(t,(function(t,r){e[r]=n&&"function"==typeof t?Dh(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},Yh=Xh;function Kh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Gh=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(Yh.isURLSearchParams(t))r=t.toString();else{var s=[];Yh.forEach(t,(function(e,t){null!=e&&(Yh.isArray(e)?t+="[]":e=[e],Yh.forEach(e,(function(e){Yh.isDate(e)?e=e.toISOString():Yh.isObject(e)&&(e=JSON.stringify(e)),s.push(Kh(t)+"="+Kh(e))})))})),r=s.join("&")}if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},Wh=Xh;function Zh(){this.handlers=[]}Zh.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},Zh.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Zh.prototype.forEach=function(e){Wh.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Qh=Zh,Jh=Xh,ef=function(e,t,n,r,s){return e.config=t,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},tf=ef,nf=function(e,t,n,r,s){var i=new Error(e);return tf(i,t,n,r,s)},rf=nf,sf=Xh,of=sf.isStandardBrowserEnv()?{write:function(e,t,n,r,s,i){var o=[];o.push(e+"="+encodeURIComponent(t)),sf.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),sf.isString(r)&&o.push("path="+r),sf.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},af=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},lf=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},cf=Xh,uf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],hf=Xh,ff=hf.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=hf.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function df(e){this.message=e}df.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},df.prototype.__CANCEL__=!0;var pf=df,_f=Xh,mf=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(rf("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)},gf=of,bf=Gh,vf=function(e,t){return e&&!af(t)?lf(e,t):t},yf=function(e){var t,n,r,s={};return e?(cf.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=cf.trim(e.substr(0,r)).toLowerCase(),n=cf.trim(e.substr(r+1)),t){if(s[t]&&uf.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s},wf=ff,kf=nf,xf=Cf,Sf=pf,Af=function(e){return new Promise((function(t,n){var r,s=e.data,i=e.headers,o=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}_f.isFormData(s)&&delete i["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(c+":"+u)}var h=vf(e.baseURL,e.url);function f(){if(l){var r="getAllResponseHeaders"in l?yf(l.getAllResponseHeaders()):null,s={data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l};mf((function(e){t(e),a()}),(function(e){n(e),a()}),s),l=null}}if(l.open(e.method.toUpperCase(),bf(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(f)},l.onabort=function(){l&&(n(kf("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(kf("Network Error",e,null,l)),l=null},l.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||xf.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(kf(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},_f.isStandardBrowserEnv()){var d=(e.withCredentials||wf(h))&&e.xsrfCookieName?gf.read(e.xsrfCookieName):void 0;d&&(i[e.xsrfHeaderName]=d)}"setRequestHeader"in l&&_f.forEach(i,(function(e,t){void 0===s&&"content-type"===t.toLowerCase()?delete i[t]:l.setRequestHeader(t,e)})),_f.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&"json"!==o&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(r=function(e){l&&(n(!e||e&&e.type?new Sf("canceled"):e),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r))),s||(s=null),l.send(s)}))},Tf=Xh,Rf=function(e,t){Jh.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Ef=ef,$f={"Content-Type":"application/x-www-form-urlencoded"};function If(e,t){!Tf.isUndefined(e)&&Tf.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Mf,Bf={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Mf=Af),Mf),transformRequest:[function(e,t){return Rf(t,"Accept"),Rf(t,"Content-Type"),Tf.isFormData(e)||Tf.isArrayBuffer(e)||Tf.isBuffer(e)||Tf.isStream(e)||Tf.isFile(e)||Tf.isBlob(e)?e:Tf.isArrayBufferView(e)?e.buffer:Tf.isURLSearchParams(e)?(If(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Tf.isObject(e)||t&&"application/json"===t["Content-Type"]?(If(t,"application/json"),function(e,t,n){if(Tf.isString(e))try{return(t||JSON.parse)(e),Tf.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Bf.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&Tf.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw Ef(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tf.forEach(["delete","get","head"],(function(e){Bf.headers[e]={}})),Tf.forEach(["post","put","patch"],(function(e){Bf.headers[e]=Tf.merge($f)}));var Cf=Bf,Of=Xh,Pf=Cf,Nf=function(e){return!(!e||!e.__CANCEL__)},Lf=Xh,Df=function(e,t,n){var r=this||Pf;return Of.forEach(n,(function(n){e=n.call(r,e,t)})),e},Vf=Nf,jf=Cf,Hf=pf;function Ff(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hf("canceled")}var qf=Xh,zf=function(e,t){t=t||{};var n={};function r(e,t){return qf.isPlainObject(e)&&qf.isPlainObject(t)?qf.merge(e,t):qf.isPlainObject(t)?qf.merge({},t):qf.isArray(t)?t.slice():t}function s(n){return qf.isUndefined(t[n])?qf.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function i(e){if(!qf.isUndefined(t[e]))return r(void 0,t[e])}function o(n){return qf.isUndefined(t[n])?qf.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function a(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a};return qf.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||s,r=t(e);qf.isUndefined(r)&&t!==a||(n[e]=r)})),n},Uf="0.24.0",Xf=Uf,Yf={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Yf[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Kf={};Yf.transitional=function(e,t,n){function r(e,t){return"[Axios v"+Xf+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,s,i){if(!1===e)throw new Error(r(s," has been removed"+(t?" in "+t:"")));return t&&!Kf[s]&&(Kf[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}};var Gf={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),s=r.length;s-- >0;){var i=r[s],o=t[i];if(o){var a=e[i],l=void 0===a||o(a,i,e);if(!0!==l)throw new TypeError("option "+i+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:Yf},Wf=Xh,Zf=Gh,Qf=Qh,Jf=function(e){return Ff(e),e.headers=e.headers||{},e.data=Df.call(e,e.data,e.headers,e.transformRequest),e.headers=Lf.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Lf.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||jf.adapter)(e).then((function(t){return Ff(e),t.data=Df.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Vf(t)||(Ff(e),t&&t.response&&(t.response.data=Df.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},ed=zf,td=Gf,nd=td.validators;function rd(e){this.defaults=e,this.interceptors={request:new Qf,response:new Qf}}rd.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=ed(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&td.assertOptions(t,{silentJSONParsing:nd.transitional(nd.boolean),forcedJSONParsing:nd.transitional(nd.boolean),clarifyTimeoutError:nd.transitional(nd.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var s,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var o=[Jf,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(i),s=Promise.resolve(e);o.length;)s=s.then(o.shift(),o.shift());return s}for(var a=e;n.length;){var l=n.shift(),c=n.shift();try{a=l(a)}catch(e){c(e);break}}try{s=Jf(a)}catch(e){return Promise.reject(e)}for(;i.length;)s=s.then(i.shift(),i.shift());return s},rd.prototype.getUri=function(e){return e=ed(this.defaults,e),Zf(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Wf.forEach(["delete","get","head","options"],(function(e){rd.prototype[e]=function(t,n){return this.request(ed(n||{},{method:e,url:t,data:(n||{}).data}))}})),Wf.forEach(["post","put","patch"],(function(e){rd.prototype[e]=function(t,n,r){return this.request(ed(r||{},{method:e,url:t,data:n}))}}));var sd=rd,id=pf;function od(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new id(e),t(n.reason))}))}od.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},od.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},od.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},od.source=function(){var e;return{token:new od((function(t){e=t})),cancel:e}};var ad=od,ld=Xh,cd=Lh,ud=sd,hd=zf;var fd=function e(t){var n=new ud(t),r=cd(ud.prototype.request,n);return ld.extend(r,ud.prototype,n),ld.extend(r,n),r.create=function(n){return e(hd(t,n))},r}(Cf);fd.Axios=ud,fd.Cancel=pf,fd.CancelToken=ad,fd.isCancel=Nf,fd.VERSION=Uf,fd.all=function(e){return Promise.all(e)},fd.spread=function(e){return function(t){return e.apply(null,t)}},fd.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},Nh.exports=fd,Nh.exports.default=fd;var dd,pd=Nh.exports,_d=new Uint8Array(16);function md(){if(!dd&&!(dd="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dd(_d)}var gd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function bd(e){return"string"==typeof e&&gd.test(e)}for(var vd=[],yd=0;yd<256;++yd)vd.push((yd+256).toString(16).substr(1));function wd(e,t,n){var r=(e=e||{}).random||(e.rng||md)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=r[s];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(vd[e[t+0]]+vd[e[t+1]]+vd[e[t+2]]+vd[e[t+3]]+"-"+vd[e[t+4]]+vd[e[t+5]]+"-"+vd[e[t+6]]+vd[e[t+7]]+"-"+vd[e[t+8]]+vd[e[t+9]]+"-"+vd[e[t+10]]+vd[e[t+11]]+vd[e[t+12]]+vd[e[t+13]]+vd[e[t+14]]+vd[e[t+15]]).toLowerCase();if(!bd(n))throw TypeError("Stringified UUID is invalid");return n}(r)}const kd=async e=>{let t=h(fu),n=h(mu),r=null==n?void 0:n.user;r?Sd({message:e,socket:t,user:r}):(hu.set([e]),({newSocket:t,newUser:r}=await(async()=>{var e;pu.set(!0);const t=null===(e=await ja(uu))||void 0===e?void 0:e.user,n=Oh("https://chat-server.tykhe.dev",{auth:{token:h(gu)}});if(t){const e={user:t,isLoggedIn:!0};await Ph({newSocket:n,userAuth:e})}return{newSocket:n,newUser:t}})()),fu.set(t))},xd=async(e,t)=>{let n=h(mu),r=h(fu),s=h(du);if((null==e?void 0:e.length)>0){const i=[],o=[];for(let t=0;t<e.length;t++){const n=wd();i.push({type:"wait",message:{content:URL.createObjectURL(e[t]),filename:e[t].name,fileId:n},sender:!0,bot:!1}),o.push(n)}hu.update((e=>[...i,...e])),await Ad({files:e,filesIds:o,fileType:t,user:null==n?void 0:n.user,chatId:s,socket:r})}},Sd=async({message:e,user:t,socket:n,store:r=!0})=>{try{const s=await t.getIdToken();null==n||n.emit("send_message",{message:{messageType:e.type,text:e.message.content,whoSent:"customer"},firebaseToken:s}),r&&hu.update((t=>[e,...t]))}catch(e){const t={type:"text",sender:!1,message:{content:"Não foi possível enviar a mensagem 😢"},bot:!0};hu.update((e=>[t,...e]))}},Ad=async({files:e,filesIds:t,fileType:n,user:r,socket:s,chatId:i})=>{try{let o=r;o||(o=(await ja(uu)).user);const a=await o.getIdToken();let l=new FormData;l.append("chatId",i),l.append("whoSent","customer"),l.append("msgFilesType",n);for(let n=0;n<e.length;n++)l.append("msgFiles",e[n]),l.append("msgFilesIds",t[n]);const c=await pd.post("https://chat-server.tykhe.dev/mensagens/arquivo",l,{headers:{Authorization:`Bearer ${a}`}});hu.update((e=>{var t,n;let r=e;if((null===(t=c.data.filesWithError)||void 0===t?void 0:t.length)>0){let t=c.data.filesWithError;r=e.filter((e=>-1===t.findIndex((t=>t.id===e.message.fileId))));r=[{type:"text",sender:!1,message:{content:`Não foi possível enviar ${1===t.length?"o arquivo":"alguns arquivos"} 😢`},bot:!0},...r]}let s=null===(n=c.data.message)||void 0===n?void 0:n.files;return s&&(r=r.map((e=>{var t;if("wait"===e.type){const n=s.findIndex((t=>t.fileId===e.message.fileId));n>=0&&(e.type=s[n].fileType,e.message.content=s[n].url,e.message.filename=null!==(t=s[n].originalName)&&void 0!==t?t:s[n].name)}return e}))),r})),null==s||s.emit("sendMessage",{message:c.data.message,firebaseToken:a})}catch(e){const t={type:"text",sender:!1,message:{content:"Não foi possível enviar o arquivo 😢"},bot:!0};hu.update((e=>[t,...e]))}};function Td(e){E(e,"svelte-1qt3n88",".tooltip.svelte-1qt3n88.svelte-1qt3n88{position:relative;display:inline-block}.tooltip.svelte-1qt3n88 .tooltip_container.svelte-1qt3n88{visibility:hidden;opacity:0;width:250px;position:absolute;z-index:99999;bottom:calc(100% + 12px);left:50%;margin-left:-125px;background-color:transparent;display:flex;justify-content:center;transition:visibility 0.3s linear,opacity 0.3s linear}.tooltip.svelte-1qt3n88 .tooltip_text.svelte-1qt3n88{background-color:#333333;color:white;text-align:center;padding:8px 16px;border-radius:24px}.tooltip.svelte-1qt3n88:hover .tooltip_container.svelte-1qt3n88{visibility:visible;opacity:1}")}function Rd(e){let t,n,r;return{c(){t=O("div"),n=O("span"),r=N(e[0]),j(n,"class","tooltip_text svelte-1qt3n88"),j(t,"class","tooltip_container svelte-1qt3n88")},m(e,s){M(e,t,s),R(t,n),R(n,r)},p(e,t){1&t&&F(r,e[0])},d(e){e&&B(t)}}}function Ed(e){let t,n,r;const s=e[3].default,i=d(s,e,e[2],null);let o=!e[1]&&Rd(e);return{c(){t=O("div"),i&&i.c(),n=L(),o&&o.c(),j(t,"class","tooltip svelte-1qt3n88")},m(e,s){M(e,t,s),i&&i.m(t,null),R(t,n),o&&o.m(t,null),r=!0},p(e,[n]){i&&i.p&&(!r||4&n)&&m(i,s,e,e[2],r?_(s,e[2],n,null):g(e[2]),null),e[1]?o&&(o.d(1),o=null):o?o.p(e,n):(o=Rd(e),o.c(),o.m(t,null))},i(e){r||(Re(i,e),r=!0)},o(e){Ee(i,e),r=!1},d(e){e&&B(t),i&&i.d(e),o&&o.d()}}}function $d(e,t,n){let{$$slots:r={},$$scope:s}=t,{tooltipText:i=""}=t,{forceClose:o=!1}=t;return e.$$set=e=>{"tooltipText"in e&&n(0,i=e.tooltipText),"forceClose"in e&&n(1,o=e.forceClose),"$$scope"in e&&n(2,s=e.$$scope)},[i,o,s,r]}class Id extends He{constructor(e){super(),je(this,e,$d,Ed,a,{tooltipText:0,forceClose:1},Td)}}var Md={exports:{}};!function(e,t){e.exports=function(){function e(e){return new Int8Array(e)}function t(e){return new Int16Array(e)}function n(e){return new Int32Array(e)}function r(e){return new Float32Array(e)}function s(e){return new Float64Array(e)}function i(e){if(1==e.length)return r(e[0]);var t=e[0];e=e.slice(1);for(var n=[],s=0;s<t;s++)n.push(i(e));return n}function o(e){if(1==e.length)return n(e[0]);var t=e[0];e=e.slice(1);for(var r=[],s=0;s<t;s++)r.push(o(e));return r}function a(e){if(1==e.length)return t(e[0]);var n=e[0];e=e.slice(1);for(var r=[],s=0;s<n;s++)r.push(a(e));return r}function l(e){if(1==e.length)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(l(e));return n}var c={fill:function(e,t,n,r){if(2==arguments.length)for(var s=0;s<e.length;s++)e[s]=arguments[1];else for(s=t;s<n;s++)e[s]=r}},u={arraycopy:function(e,t,n,r,s){for(var i=t+s;t<i;)n[r++]=e[t++]}},h={};function f(e){this.ordinal=e}h.SQRT2=1.4142135623730951,h.FAST_LOG10=function(e){return Math.log10(e)},h.FAST_LOG10_X=function(e,t){return Math.log10(e)*t},f.short_block_allowed=new f(0),f.short_block_coupled=new f(1),f.short_block_dispensed=new f(2),f.short_block_forced=new f(3);var d={};function p(e){this.ordinal=e}d.MAX_VALUE=34028235e31,p.vbr_off=new p(0),p.vbr_mt=new p(1),p.vbr_rh=new p(2),p.vbr_abr=new p(3),p.vbr_mtrh=new p(4),p.vbr_default=p.vbr_mtrh;var _={System:u,VbrMode:p,Float:d,ShortBlock:f,Util:h,Arrays:c,new_array_n:l,new_byte:e,new_double:s,new_float:r,new_float_n:i,new_int:n,new_int_n:o,new_short:t,new_short_n:a,assert:function(e){}},m=_.System,g=_.Util,b=_.Arrays,v=_.new_float;function y(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*g.SQRT2*.5/2384e-9,.017876148*g.SQRT2*.5/2384e-9,.003134727*g.SQRT2*.5/2384e-9,.002457142*g.SQRT2*.5/2384e-9,971317e-9*g.SQRT2*.5/2384e-9,218868e-9*g.SQRT2*.5/2384e-9,101566e-9*g.SQRT2*.5/2384e-9,13828e-9*g.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=12,n=36,r=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],s=r[L.SHORT_TYPE],i=r[L.SHORT_TYPE],o=r[L.SHORT_TYPE],a=r[L.SHORT_TYPE],l=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function c(t,n,r){for(var s,i,o,a=10,l=n+238-14-286,c=-15;c<0;c++){var u,h,f;u=e[a+-10],h=t[l+-224]*u,f=t[n+224]*u,u=e[a+-9],h+=t[l+-160]*u,f+=t[n+160]*u,u=e[a+-8],h+=t[l+-96]*u,f+=t[n+96]*u,u=e[a+-7],h+=t[l+-32]*u,f+=t[n+32]*u,u=e[a+-6],h+=t[l+32]*u,f+=t[n+-32]*u,u=e[a+-5],h+=t[l+96]*u,f+=t[n+-96]*u,u=e[a+-4],h+=t[l+160]*u,f+=t[n+-160]*u,u=e[a+-3],h+=t[l+224]*u,f+=t[n+-224]*u,u=e[a+-2],h+=t[n+-256]*u,f-=t[l+256]*u,u=e[a+-1],h+=t[n+-192]*u,f-=t[l+192]*u,u=e[a+0],h+=t[n+-128]*u,f-=t[l+128]*u,u=e[a+1],h+=t[n+-64]*u,f-=t[l+64]*u,u=e[a+2],h+=t[n+0]*u,f-=t[l+0]*u,u=e[a+3],h+=t[n+64]*u,f-=t[l+-64]*u,u=e[a+4],h+=t[n+128]*u,f-=t[l+-128]*u,u=e[a+5],h+=t[n+192]*u,u=(f-=t[l+-192]*u)-(h*=e[a+6]),r[30+2*c]=f+h,r[31+2*c]=e[a+7]*u,a+=18,n--,l++}f=t[n+-16]*e[a+-10],h=t[n+-32]*e[a+-2],f+=(t[n+-48]-t[n+16])*e[a+-9],h+=t[n+-96]*e[a+-1],f+=(t[n+-80]+t[n+48])*e[a+-8],h+=t[n+-160]*e[a+0],f+=(t[n+-112]-t[n+80])*e[a+-7],h+=t[n+-224]*e[a+1],f+=(t[n+-144]+t[n+112])*e[a+-6],h-=t[n+32]*e[a+2],f+=(t[n+-176]-t[n+144])*e[a+-5],h-=t[n+96]*e[a+3],f+=(t[n+-208]+t[n+176])*e[a+-4],h-=t[n+160]*e[a+4],f+=(t[n+-240]-t[n+208])*e[a+-3],s=(h-=t[n+224])-f,i=h+f,f=r[14],h=r[15]-f,r[31]=i+f,r[30]=s+h,r[15]=s-h,r[14]=i-f,o=r[28]-r[0],r[0]+=r[28],r[28]=o*e[a+-36+7],o=r[29]-r[1],r[1]+=r[29],r[29]=o*e[a+-36+7],o=r[26]-r[2],r[2]+=r[26],r[26]=o*e[a+-72+7],o=r[27]-r[3],r[3]+=r[27],r[27]=o*e[a+-72+7],o=r[24]-r[4],r[4]+=r[24],r[24]=o*e[a+-108+7],o=r[25]-r[5],r[5]+=r[25],r[25]=o*e[a+-108+7],o=r[22]-r[6],r[6]+=r[22],r[22]=o*g.SQRT2,o=r[23]-r[7],r[7]+=r[23],r[23]=o*g.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],o=r[6],r[6]=r[31]-o,r[31]=r[31]+o,o=r[7],r[7]=r[30]-o,r[30]=r[30]+o,o=r[22],r[22]=r[15]-o,r[15]=r[15]+o,o=r[23],r[23]=r[14]-o,r[14]=r[14]+o,o=r[20]-r[8],r[8]+=r[20],r[20]=o*e[a+-180+7],o=r[21]-r[9],r[9]+=r[21],r[21]=o*e[a+-180+7],o=r[18]-r[10],r[10]+=r[18],r[18]=o*e[a+-216+7],o=r[19]-r[11],r[11]+=r[19],r[19]=o*e[a+-216+7],o=r[16]-r[12],r[12]+=r[16],r[16]=o*e[a+-252+7],o=r[17]-r[13],r[13]+=r[17],r[17]=o*e[a+-252+7],o=-r[20]+r[24],r[20]+=r[24],r[24]=o*e[a+-216+7],o=-r[21]+r[25],r[21]+=r[25],r[25]=o*e[a+-216+7],o=r[4]-r[8],r[4]+=r[8],r[8]=o*e[a+-216+7],o=r[5]-r[9],r[5]+=r[9],r[9]=o*e[a+-216+7],o=r[0]-r[12],r[0]+=r[12],r[12]=o*e[a+-72+7],o=r[1]-r[13],r[1]+=r[13],r[13]=o*e[a+-72+7],o=r[16]-r[28],r[16]+=r[28],r[28]=o*e[a+-72+7],o=-r[17]+r[29],r[17]+=r[29],r[29]=o*e[a+-72+7],o=g.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=o,o=g.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=o,o=g.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=o-r[18],o=g.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=o-r[19],o=r[2],r[19]-=r[3],r[3]-=o,r[2]=r[31]-o,r[31]+=o,o=r[3],r[11]-=r[19],r[18]-=o,r[3]=r[30]-o,r[30]+=o,o=r[18],r[27]-=r[11],r[19]-=o,r[18]=r[15]-o,r[15]+=o,o=r[19],r[10]-=o,r[19]=r[14]-o,r[14]+=o,o=r[10],r[11]-=o,r[10]=r[23]-o,r[23]+=o,o=r[11],r[26]-=o,r[11]=r[22]-o,r[22]+=o,o=r[26],r[27]-=o,r[26]=r[7]-o,r[7]+=o,o=r[27],r[27]=r[6]-o,r[6]+=o,o=g.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=o,o=g.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=o,o=g.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=o,o=g.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=o,o=-g.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=o-r[8],o=-g.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=o-r[9],o=-g.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=o-r[25],o=-g.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=o-r[24],o=r[24]-r[16],r[24]=o,o=r[20]-o,r[20]=o,o=r[28]-o,r[28]=o,o=r[25]-r[17],r[25]=o,o=r[21]-o,r[21]=o,o=r[29]-o,r[29]=o,o=r[17]-r[1],r[17]=o,o=r[9]-o,r[9]=o,o=r[25]-o,r[25]=o,o=r[5]-o,r[5]=o,o=r[21]-o,r[21]=o,o=r[13]-o,r[13]=o,o=r[29]-o,r[29]=o,o=r[1]-r[0],r[1]=o,o=r[16]-o,r[16]=o,o=r[17]-o,r[17]=o,o=r[8]-o,r[8]=o,o=r[9]-o,r[9]=o,o=r[24]-o,r[24]=o,o=r[25]-o,r[25]=o,o=r[4]-o,r[4]=o,o=r[5]-o,r[5]=o,o=r[20]-o,r[20]=o,o=r[21]-o,r[21]=o,o=r[12]-o,r[12]=o,o=r[13]-o,r[13]=o,o=r[28]-o,r[28]=o,o=r[29]-o,r[29]=o,o=r[0],r[0]+=r[31],r[31]-=o,o=r[1],r[1]+=r[30],r[30]-=o,o=r[16],r[16]+=r[15],r[15]-=o,o=r[17],r[17]+=r[14],r[14]-=o,o=r[8],r[8]+=r[23],r[23]-=o,o=r[9],r[9]+=r[22],r[22]-=o,o=r[24],r[24]+=r[7],r[7]-=o,o=r[25],r[25]+=r[6],r[6]-=o,o=r[4],r[4]+=r[27],r[27]-=o,o=r[5],r[5]+=r[26],r[26]-=o,o=r[20],r[20]+=r[11],r[11]-=o,o=r[21],r[21]+=r[10],r[10]-=o,o=r[12],r[12]+=r[19],r[19]-=o,o=r[13],r[13]+=r[18],r[18]-=o,o=r[28],r[28]+=r[3],r[3]-=o,o=r[29],r[29]+=r[2],r[2]-=o}function u(e,t){for(var n=0;n<3;n++){var s,i,o,a,l,c;i=(a=e[t+6]*r[L.SHORT_TYPE][0]-e[t+15])+(s=e[t+0]*r[L.SHORT_TYPE][2]-e[t+9]),o=a-s,l=(a=e[t+15]*r[L.SHORT_TYPE][0]+e[t+6])+(s=e[t+9]*r[L.SHORT_TYPE][2]+e[t+0]),c=-a+s,s=2069978111953089e-26*(e[t+3]*r[L.SHORT_TYPE][1]-e[t+12]),a=2069978111953089e-26*(e[t+12]*r[L.SHORT_TYPE][1]+e[t+3]),e[t+0]=190752519173728e-25*i+s,e[t+15]=190752519173728e-25*-l+a,o=.8660254037844387*o*1907525191737281e-26,l=.5*l*1907525191737281e-26+a,e[t+3]=o-l,e[t+6]=o+l,i=.5*i*1907525191737281e-26-s,c=.8660254037844387*c*1907525191737281e-26,e[t+9]=i+c,e[t+12]=i-c,t++}}function h(e,t,n){var r,s,o,a,l,c,u,h,f,d,p,_,m,g,b,v,y,w;o=n[17]-n[9],l=n[15]-n[11],c=n[14]-n[12],u=n[0]+n[8],h=n[1]+n[7],f=n[2]+n[6],d=n[3]+n[5],e[t+17]=u+f-d-(h-n[4]),s=(u+f-d)*i[19]+(h-n[4]),r=(o-l-c)*i[18],e[t+5]=r+s,e[t+6]=r-s,a=(n[16]-n[10])*i[18],h=h*i[19]+n[4],r=o*i[12]+a+l*i[13]+c*i[14],s=-u*i[16]+h-f*i[17]+d*i[15],e[t+1]=r+s,e[t+2]=r-s,r=o*i[13]-a-l*i[14]+c*i[12],s=-u*i[17]+h-f*i[15]+d*i[16],e[t+9]=r+s,e[t+10]=r-s,r=o*i[14]-a+l*i[12]-c*i[13],s=u*i[15]-h+f*i[16]-d*i[17],e[t+13]=r+s,e[t+14]=r-s,p=n[8]-n[0],m=n[6]-n[2],g=n[5]-n[3],b=n[17]+n[9],v=n[16]+n[10],y=n[15]+n[11],w=n[14]+n[12],e[t+0]=b+y+w+(v+n[13]),r=(b+y+w)*i[19]-(v+n[13]),s=(p-m+g)*i[18],e[t+11]=r+s,e[t+12]=r-s,_=(n[7]-n[1])*i[18],v=n[13]-v*i[19],r=b*i[15]-v+y*i[16]+w*i[17],s=p*i[14]+_+m*i[12]+g*i[13],e[t+3]=r+s,e[t+4]=r-s,r=-b*i[17]+v-y*i[15]-w*i[16],s=p*i[13]+_-m*i[14]-g*i[12],e[t+7]=r+s,e[t+8]=r-s,r=-b*i[16]+v-y*i[17]-w*i[15],s=p*i[12]-_+m*i[13]-g*i[14],e[t+15]=r+s,e[t+16]=r-s}this.mdct_sub48=function(e,i,f){for(var d=i,p=286,_=0;_<e.channels_out;_++){for(var g=0;g<e.mode_gr;g++){for(var y,w=e.l3_side.tt[g][_],k=w.xr,x=0,S=e.sb_sample[_][1-g],A=0,T=0;T<9;T++)for(c(d,p,S[A]),c(d,p+32,S[A+1]),A+=2,p+=64,y=1;y<32;y+=2)S[A-1][y]*=-1;for(y=0;y<32;y++,x+=18){var R=w.block_type,E=e.sb_sample[_][g],$=e.sb_sample[_][1-g];if(0!=w.mixed_block_flag&&y<2&&(R=0),e.amp_filter[y]<1e-12)b.fill(k,x+0,x+18,0);else{if(e.amp_filter[y]<1)for(T=0;T<18;T++)$[T][l[y]]*=e.amp_filter[y];if(R==L.SHORT_TYPE){for(T=-t/4;T<0;T++){var I=r[L.SHORT_TYPE][T+3];k[x+3*T+9]=E[9+T][l[y]]*I-E[8-T][l[y]],k[x+3*T+18]=E[14-T][l[y]]*I+E[15+T][l[y]],k[x+3*T+10]=E[15+T][l[y]]*I-E[14-T][l[y]],k[x+3*T+19]=$[2-T][l[y]]*I+$[3+T][l[y]],k[x+3*T+11]=$[3+T][l[y]]*I-$[2-T][l[y]],k[x+3*T+20]=$[8-T][l[y]]*I+$[9+T][l[y]]}u(k,x)}else{var M=v(18);for(T=-n/4;T<0;T++){var B,C;B=r[R][T+27]*$[T+9][l[y]]+r[R][T+36]*$[8-T][l[y]],C=r[R][T+9]*E[T+9][l[y]]-r[R][T+18]*E[8-T][l[y]],M[T+9]=B-C*s[3+T+9],M[T+18]=B*s[3+T+9]+C}h(k,x,M)}}if(R!=L.SHORT_TYPE&&0!=y)for(T=7;T>=0;--T){var O,P;O=k[x+T]*o[20+T]+k[x+-1-T]*a[28+T],P=k[x+T]*a[28+T]-k[x+-1-T]*o[20+T],k[x+-1-T]=O,k[x+T]=P}}}if(d=f,p=286,1==e.mode_gr)for(var N=0;N<18;N++)m.arraycopy(e.sb_sample[_][1][N],0,e.sb_sample[_][0][N],0,32)}}}var w=y,k=_.System,x=_.new_float,S=_.new_float_n;function A(){this.l=x(L.SBMAX_l),this.s=S([L.SBMAX_s,3]);var e=this;this.assign=function(t){k.arraycopy(t.l,0,e.l,0,L.SBMAX_l);for(var n=0;n<L.SBMAX_s;n++)for(var r=0;r<3;r++)e.s[n][r]=t.s[n][r]}}var T=A;function R(){this.thm=new T,this.en=new T}var E=R,$=_.System,I=_.VbrMode,M=_.new_array_n,B=_.new_float,C=_.new_float_n,O=_.new_int,P=_.assert;function N(){var e=w,t=E,n=N.FFTOFFSET,r=N.MPG_MD_MS_LR,s=null;this.psy=null;var i=null,o=null,a=null;this.setModules=function(e,t,n,r){s=e,this.psy=t,i=t,o=r,a=n};var l=new e;function c(e){var t,n;if(0!=e.ATH.useAdjust)if(n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,(n*=e.ATH.aaSensitivityP)>.03125)e.ATH.adjust>=1?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var r=31.98*n+625e-6;e.ATH.adjust>=r?(e.ATH.adjust*=.075*r+.925,e.ATH.adjust<r&&(e.ATH.adjust=r)):e.ATH.adjustLimit>=r?e.ATH.adjust=r:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=r}else e.ATH.adjust=1}function u(e){var t,n;for(P(0<=e.bitrate_index&&e.bitrate_index<16),P(0<=e.mode_ext&&e.mode_ext<4),e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var r=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(r=4),e.bitrate_blockType_Hist[e.bitrate_index][r]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][r]++,e.bitrate_blockType_Hist[15][5]++}}function h(e,t){var n,r,s=e.internal_flags;if(0==s.lame_encode_frame_init){var i,o,a=B(2014),c=B(2014);for(s.lame_encode_frame_init=1,i=0,o=0;i<286+576*(1+s.mode_gr);++i)i<576*s.mode_gr?(a[i]=0,2==s.channels_out&&(c[i]=0)):(a[i]=t[0][o],2==s.channels_out&&(c[i]=t[1][o]),++o);for(r=0;r<s.mode_gr;r++)for(n=0;n<s.channels_out;n++)s.l3_side.tt[r][n].block_type=N.SHORT_TYPE;l.mdct_sub48(s,a,c),P(s.mf_size>=N.BLKSIZE+e.framesize-N.FFTOFFSET),P(s.mf_size>=512+e.framesize-32)}}this.lame_encode_mp3_frame=function(e,f,d,p,_,m){var g,b=M([2,2]);b[0][0]=new t,b[0][1]=new t,b[1][0]=new t,b[1][1]=new t;var v,y=M([2,2]);y[0][0]=new t,y[0][1]=new t,y[1][0]=new t,y[1][1]=new t;var w,k,x,S=[null,null],A=e.internal_flags,T=C([2,4]),R=[.5,.5],E=[[0,0],[0,0]],B=[[0,0],[0,0]];if(S[0]=f,S[1]=d,0==A.lame_encode_frame_init&&h(e,S),A.padding=0,(A.slot_lag-=A.frac_SpF)<0&&(A.slot_lag+=e.out_samplerate,A.padding=1),0!=A.psymodel){var P=[null,null],L=0,D=O(2);for(x=0;x<A.mode_gr;x++){for(k=0;k<A.channels_out;k++)P[k]=S[k],L=576+576*x-N.FFTOFFSET;if(0!=(e.VBR==I.vbr_mtrh||e.VBR==I.vbr_mt?i.L3psycho_anal_vbr(e,P,L,x,b,y,E[x],B[x],T[x],D):i.L3psycho_anal_ns(e,P,L,x,b,y,E[x],B[x],T[x],D)))return-4;for(e.mode==gn.JOINT_STEREO&&(R[x]=T[x][2]+T[x][3],R[x]>0&&(R[x]=T[x][3]/R[x])),k=0;k<A.channels_out;k++){var V=A.l3_side.tt[x][k];V.block_type=D[k],V.mixed_block_flag=0}}}else for(x=0;x<A.mode_gr;x++)for(k=0;k<A.channels_out;k++)A.l3_side.tt[x][k].block_type=N.NORM_TYPE,A.l3_side.tt[x][k].mixed_block_flag=0,B[x][k]=E[x][k]=700;if(c(A),l.mdct_sub48(A,S[0],S[1]),A.mode_ext=N.MPG_MD_LR_LR,e.force_ms)A.mode_ext=N.MPG_MD_MS_LR;else if(e.mode==gn.JOINT_STEREO){var j=0,H=0;for(x=0;x<A.mode_gr;x++)for(k=0;k<A.channels_out;k++)j+=B[x][k],H+=E[x][k];if(j<=1*H){var F=A.l3_side.tt[0],q=A.l3_side.tt[A.mode_gr-1];F[0].block_type==F[1].block_type&&q[0].block_type==q[1].block_type&&(A.mode_ext=N.MPG_MD_MS_LR)}}if(A.mode_ext==r?(v=y,w=B):(v=b,w=E),e.analysis&&null!=A.pinfo)for(x=0;x<A.mode_gr;x++)for(k=0;k<A.channels_out;k++)A.pinfo.ms_ratio[x]=A.ms_ratio[x],A.pinfo.ms_ener_ratio[x]=R[x],A.pinfo.blocktype[x][k]=A.l3_side.tt[x][k].block_type,A.pinfo.pe[x][k]=w[x][k],$.arraycopy(A.l3_side.tt[x][k].xr,0,A.pinfo.xr[x][k],0,576),A.mode_ext==r&&(A.pinfo.ers[x][k]=A.pinfo.ers[x][k+2],$.arraycopy(A.pinfo.energy[x][k+2],0,A.pinfo.energy[x][k],0,A.pinfo.energy[x][k].length));if(e.VBR==I.vbr_off||e.VBR==I.vbr_abr){var z,U;for(z=0;z<18;z++)A.nsPsy.pefirbuf[z]=A.nsPsy.pefirbuf[z+1];for(U=0,x=0;x<A.mode_gr;x++)for(k=0;k<A.channels_out;k++)U+=w[x][k];for(A.nsPsy.pefirbuf[18]=U,U=A.nsPsy.pefirbuf[9],z=0;z<9;z++)U+=(A.nsPsy.pefirbuf[z]+A.nsPsy.pefirbuf[18-z])*N.fircoef[z];for(U=3350*A.mode_gr*A.channels_out/U,x=0;x<A.mode_gr;x++)for(k=0;k<A.channels_out;k++)w[x][k]*=U}if(A.iteration_loop.iteration_loop(e,w,R,v),s.format_bitstream(e),g=s.copy_buffer(A,p,_,m,1),e.bWriteVbrTag&&o.addVbrFrame(e),e.analysis&&null!=A.pinfo){for(k=0;k<A.channels_out;k++){var X;for(X=0;X<n;X++)A.pinfo.pcmdata[k][X]=A.pinfo.pcmdata[k][X+e.framesize];for(X=n;X<1600;X++)A.pinfo.pcmdata[k][X]=S[k][X-n]}a.set_frame_pinfo(e,v)}return u(A),g}}N.ENCDELAY=576,N.POSTDELAY=1152,N.MDCTDELAY=48,N.FFTOFFSET=224+N.MDCTDELAY,N.DECDELAY=528,N.SBLIMIT=32,N.CBANDS=64,N.SBPSY_l=21,N.SBPSY_s=12,N.SBMAX_l=22,N.SBMAX_s=13,N.PSFB21=6,N.PSFB12=6,N.BLKSIZE=1024,N.HBLKSIZE=N.BLKSIZE/2+1,N.BLKSIZE_s=256,N.HBLKSIZE_s=N.BLKSIZE_s/2+1,N.NORM_TYPE=0,N.START_TYPE=1,N.SHORT_TYPE=2,N.STOP_TYPE=3,N.MPG_MD_LR_LR=0,N.MPG_MD_LR_I=1,N.MPG_MD_MS_LR=2,N.MPG_MD_MS_I=3,N.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5];var L=N,D=_.Util,V=_.new_float;function j(){var e=V(L.BLKSIZE),t=V(L.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(e,t,r){var s,i,o,a=0,l=t+(r<<=1);s=4;do{var c,u,h,f,d,p,_;_=s>>1,p=(d=s<<1)+(f=s),s=d<<1,o=(i=t)+_;do{k=e[i+0]-e[i+f],w=e[i+0]+e[i+f],T=e[i+d]-e[i+p],S=e[i+d]+e[i+p],e[i+d]=w-S,e[i+0]=w+S,e[i+p]=k-T,e[i+f]=k+T,k=e[o+0]-e[o+f],w=e[o+0]+e[o+f],T=D.SQRT2*e[o+p],S=D.SQRT2*e[o+d],e[o+d]=w-S,e[o+0]=w+S,e[o+p]=k-T,e[o+f]=k+T,o+=s,i+=s}while(i<l);for(u=n[a+0],c=n[a+1],h=1;h<_;h++){var m,g;m=1-2*c*c,g=2*c*u,i=t+h,o=t+f-h;do{var b,v,y,w,k,x,S,A,T,R;v=g*e[i+f]-m*e[o+f],b=m*e[i+f]+g*e[o+f],k=e[i+0]-b,w=e[i+0]+b,x=e[o+0]-v,y=e[o+0]+v,v=g*e[i+p]-m*e[o+p],b=m*e[i+p]+g*e[o+p],T=e[i+d]-b,S=e[i+d]+b,R=e[o+d]-v,A=e[o+d]+v,v=c*S-u*R,b=u*S+c*R,e[i+d]=w-b,e[i+0]=w+b,e[o+p]=x-v,e[o+f]=x+v,v=u*A-c*T,b=c*A+u*T,e[o+d]=y-b,e[o+0]=y+b,e[i+p]=k-v,e[i+f]=k+v,o+=s,i+=s}while(i<l);u=(m=u)*n[a+0]-c*n[a+1],c=m*n[a+1]+c*n[a+0]}a+=2}while(s<r)}var s=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,n,i,o,a){for(var l=0;l<3;l++){var c=L.BLKSIZE_s/2,u=65535&192*(l+1),h=L.BLKSIZE_s/8-1;do{var f,d,p,_,m,g=255&s[h<<2];d=(f=t[g]*o[i][a+g+u])-(m=t[127-g]*o[i][a+g+u+128]),f+=m,_=(p=t[g+64]*o[i][a+g+u+64])-(m=t[63-g]*o[i][a+g+u+192]),p+=m,c-=4,n[l][c+0]=f+p,n[l][c+2]=f-p,n[l][c+1]=d+_,n[l][c+3]=d-_,d=(f=t[g+1]*o[i][a+g+u+1])-(m=t[126-g]*o[i][a+g+u+129]),f+=m,_=(p=t[g+65]*o[i][a+g+u+65])-(m=t[62-g]*o[i][a+g+u+193]),p+=m,n[l][c+L.BLKSIZE_s/2+0]=f+p,n[l][c+L.BLKSIZE_s/2+2]=f-p,n[l][c+L.BLKSIZE_s/2+1]=d+_,n[l][c+L.BLKSIZE_s/2+3]=d-_}while(--h>=0);r(n[l],c,L.BLKSIZE_s/2)}},this.fft_long=function(t,n,i,o,a){var l=L.BLKSIZE/8-1,c=L.BLKSIZE/2;do{var u,h,f,d,p,_=255&s[l];h=(u=e[_]*o[i][a+_])-(p=e[_+512]*o[i][a+_+512]),u+=p,d=(f=e[_+256]*o[i][a+_+256])-(p=e[_+768]*o[i][a+_+768]),f+=p,n[0+(c-=4)]=u+f,n[c+2]=u-f,n[c+1]=h+d,n[c+3]=h-d,h=(u=e[_+1]*o[i][a+_+1])-(p=e[_+513]*o[i][a+_+513]),u+=p,d=(f=e[_+257]*o[i][a+_+257])-(p=e[_+769]*o[i][a+_+769]),f+=p,n[c+L.BLKSIZE/2+0]=u+f,n[c+L.BLKSIZE/2+2]=u-f,n[c+L.BLKSIZE/2+1]=h+d,n[c+L.BLKSIZE/2+3]=h-d}while(--l>=0);r(n,c,L.BLKSIZE/2)},this.init_fft=function(n){for(var r=0;r<L.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/L.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/L.BLKSIZE);for(r=0;r<L.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/L.BLKSIZE_s))}}var H=j,F=_.VbrMode,q=_.Float,z=_.ShortBlock,U=_.Util,X=_.Arrays,Y=_.new_float,K=_.new_float_n,G=_.new_int,W=_.assert;function Z(){var e=new H,t=2.302585092994046,n=2,r=16,s=2,i=16,o=.34,a=1/217621504/(L.BLKSIZE/2),l=.01,c=.8,u=.6,h=.3,f=3.5,d=21,p=.2302585093;function _(e){return e}function m(e,t){for(var n=0,r=0;r<L.BLKSIZE/2;++r)n+=e[r]*t.ATH.eql_w[r];return n*=a}function g(t,n,r,s,i,o,a,l,c,u,h){var f=t.internal_flags;if(c<2)e.fft_long(f,s[i],c,u,h),e.fft_short(f,o[a],c,u,h);else if(2==c){for(var d=L.BLKSIZE-1;d>=0;--d){var p=s[i+0][d],g=s[i+1][d];s[i+0][d]=(p+g)*U.SQRT2*.5,s[i+1][d]=(p-g)*U.SQRT2*.5}for(var b=2;b>=0;--b)for(d=L.BLKSIZE_s-1;d>=0;--d)p=o[a+0][b][d],g=o[a+1][b][d],o[a+0][b][d]=(p+g)*U.SQRT2*.5,o[a+1][b][d]=(p-g)*U.SQRT2*.5}for(n[0]=_(s[i+0][0]),n[0]*=n[0],d=L.BLKSIZE/2-1;d>=0;--d){var v=s[i+0][L.BLKSIZE/2-d],y=s[i+0][L.BLKSIZE/2+d];n[L.BLKSIZE/2-d]=_(.5*(v*v+y*y))}for(b=2;b>=0;--b)for(r[b][0]=o[a+0][b][0],r[b][0]*=r[b][0],d=L.BLKSIZE_s/2-1;d>=0;--d)v=o[a+0][b][L.BLKSIZE_s/2-d],y=o[a+0][b][L.BLKSIZE_s/2+d],r[b][L.BLKSIZE_s/2-d]=_(.5*(v*v+y*y));var w=0;for(d=11;d<L.HBLKSIZE;d++)w+=n[d];if(f.tot_ener[c]=w,t.analysis){for(d=0;d<L.HBLKSIZE;d++)f.pinfo.energy[l][c][d]=f.pinfo.energy_save[c][d],f.pinfo.energy_save[c][d]=n[d];f.pinfo.pe[l][c]=f.pe[c]}2==t.athaa_loudapprox&&c<2&&(f.loudness_sq[l][c]=f.loudness_sq_save[c],f.loudness_sq_save[c]=m(n,f))}var b,v,y,w=8,k=23,x=15,S=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function A(){b=Math.pow(10,(w+1)/16),v=Math.pow(10,(k+1)/16),y=Math.pow(10,x/10)}var T=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],R=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],E=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function $(e,t,n,r,s,i){var o,a,l;if(t>e){if(!(t<e*v))return e+t;o=t/e}else{if(e>=t*v)return e+t;o=e/t}if(e+=t,r+3<=6){if(o>=b)return e;var c=0|U.FAST_LOG10_X(o,16);return e*R[c]}return c=0|U.FAST_LOG10_X(o,16),t=0!=i?s.ATH.cb_s[n]*s.ATH.adjust:s.ATH.cb_l[n]*s.ATH.adjust,e<y*t?e>t?(a=1,c<=13&&(a=E[c]),l=U.FAST_LOG10_X(e/t,10/15),e*((T[c]-a)*l+a)):c>13?e:e*E[c]:e*T[c]}var I=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function M(e,t,n){var r;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(r=t>e?t/e:e/t,-2<=n&&n<=2){if(r>=b)return e+t;var s=0|U.FAST_LOG10_X(r,16);return(e+t)*I[s]}return r<v?e+t:(e<t&&(e=t),e)}function B(e,t){var n=e.internal_flags;if(n.channels_out>1){for(var r=0;r<L.SBMAX_l;r++){var s=n.thm[0].l[r],i=n.thm[1].l[r];n.thm[0].l[r]+=i*t,n.thm[1].l[r]+=s*t}for(r=0;r<L.SBMAX_s;r++)for(var o=0;o<3;o++)s=n.thm[0].s[r][o],i=n.thm[1].s[r][o],n.thm[0].s[r][o]+=i*t,n.thm[1].s[r][o]+=s*t}}function C(e){for(var t=0;t<L.SBMAX_l;t++)if(!(e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t])){var n=e.mld_l[t]*e.en[3].l[t],r=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n));n=e.mld_l[t]*e.en[2].l[t];var s=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n));e.thm[2].l[t]=r,e.thm[3].l[t]=s}for(t=0;t<L.SBMAX_s;t++)for(var i=0;i<3;i++)e.thm[0].s[t][i]>1.58*e.thm[1].s[t][i]||e.thm[1].s[t][i]>1.58*e.thm[0].s[t][i]||(n=e.mld_s[t]*e.en[3].s[t][i],r=Math.max(e.thm[2].s[t][i],Math.min(e.thm[3].s[t][i],n)),n=e.mld_s[t]*e.en[2].s[t][i],s=Math.max(e.thm[3].s[t][i],Math.min(e.thm[2].s[t][i],n)),e.thm[2].s[t][i]=r,e.thm[3].s[t][i]=s)}function O(e,t,n){var r=t,s=Math.pow(10,n);t*=2,r*=2;for(var i=0;i<L.SBMAX_l;i++)u=e.ATH.cb_l[e.bm_l[i]]*s,(a=Math.min(Math.max(e.thm[0].l[i],u),Math.max(e.thm[1].l[i],u)))*t<(l=Math.max(e.thm[2].l[i],u))+(c=Math.max(e.thm[3].l[i],u))&&(l*=h=a*r/(l+c),c*=h),e.thm[2].l[i]=Math.min(l,e.thm[2].l[i]),e.thm[3].l[i]=Math.min(c,e.thm[3].l[i]);for(s*=L.BLKSIZE_s/L.BLKSIZE,i=0;i<L.SBMAX_s;i++)for(var o=0;o<3;o++){var a,l,c,u,h;u=e.ATH.cb_s[e.bm_s[i]]*s,(a=Math.min(Math.max(e.thm[0].s[i][o],u),Math.max(e.thm[1].s[i][o],u)))*t<(l=Math.max(e.thm[2].s[i][o],u))+(c=Math.max(e.thm[3].s[i][o],u))&&(l*=h=a*t/(l+c),c*=h),e.thm[2].s[i][o]=Math.min(e.thm[2].s[i][o],l),e.thm[3].s[i][o]=Math.min(e.thm[3].s[i][o],c)}}function P(e,t,n,r,s){var i,o,a=0,l=0;for(i=o=0;i<L.SBMAX_s;++o,++i){for(var c=e.bo_s[i],u=e.npart_s,h=c<u?c:u;o<h;)W(t[o]>=0),W(n[o]>=0),a+=t[o],l+=n[o],o++;if(e.en[r].s[i][s]=a,e.thm[r].s[i][s]=l,o>=u){++i;break}W(t[o]>=0),W(n[o]>=0);var f=e.PSY.bo_s_weight[i],d=1-f;a=f*t[o],l=f*n[o],e.en[r].s[i][s]+=a,e.thm[r].s[i][s]+=l,a=d*t[o],l=d*n[o]}for(;i<L.SBMAX_s;++i)e.en[r].s[i][s]=0,e.thm[r].s[i][s]=0}function N(e,t,n,r){var s,i,o=0,a=0;for(s=i=0;s<L.SBMAX_l;++i,++s){for(var l=e.bo_l[s],c=e.npart_l,u=l<c?l:c;i<u;)W(t[i]>=0),W(n[i]>=0),o+=t[i],a+=n[i],i++;if(e.en[r].l[s]=o,e.thm[r].l[s]=a,i>=c){++s;break}W(t[i]>=0),W(n[i]>=0);var h=e.PSY.bo_l_weight[s],f=1-h;o=h*t[i],a=h*n[i],e.en[r].l[s]+=o,e.thm[r].l[s]+=a,o=f*t[i],a=f*n[i]}for(;s<L.SBMAX_l;++s)e.en[r].l[s]=0,e.thm[r].l[s]=0}function D(e,t,n,r,o,a){var l,c,u=e.internal_flags;for(c=l=0;c<u.npart_s;++c){for(var h=0,f=u.numlines_s[c],d=0;d<f;++d,++l)h+=t[a][l];n[c]=h}for(W(c==u.npart_s),l=c=0;c<u.npart_s;c++){var p=u.s3ind_s[c][0],_=u.s3_ss[l++]*n[p];for(++p;p<=u.s3ind_s[c][1];)_+=u.s3_ss[l]*n[p],++l,++p;var m=s*u.nb_s1[o][c];if(r[c]=Math.min(_,m),u.blocktype_old[1&o]==L.SHORT_TYPE){m=i*u.nb_s2[o][c];var g=r[c];r[c]=Math.min(m,g)}u.nb_s2[o][c]=u.nb_s1[o][c],u.nb_s1[o][c]=_,W(r[c]>=0)}for(;c<=L.CBANDS;++c)n[c]=0,r[c]=0}function V(e,t,n,r){var s=e.internal_flags;e.short_blocks!=z.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var i=0;i<s.channels_out;i++)r[i]=L.NORM_TYPE,e.short_blocks==z.short_block_dispensed&&(t[i]=1),e.short_blocks==z.short_block_forced&&(t[i]=0),0!=t[i]?(W(s.blocktype_old[i]!=L.START_TYPE),s.blocktype_old[i]==L.SHORT_TYPE&&(r[i]=L.STOP_TYPE)):(r[i]=L.SHORT_TYPE,s.blocktype_old[i]==L.NORM_TYPE&&(s.blocktype_old[i]=L.START_TYPE),s.blocktype_old[i]==L.STOP_TYPE&&(s.blocktype_old[i]=L.SHORT_TYPE)),n[i]=s.blocktype_old[i],s.blocktype_old[i]=r[i]}function j(e,t,n){return n>=1?e:n<=0?t:t>0?Math.pow(e/t,n)*t:0}var Z=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Q(e,n){for(var r=309.07,s=0;s<L.SBMAX_s-1;s++)for(var i=0;i<3;i++){var o=e.thm.s[s][i];if(o>0){var a=o*n,l=e.en.s[s][i];l>a&&(r+=l>1e10*a?Z[s]*(10*t):Z[s]*U.FAST_LOG10(l/a))}}return r}var J=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ee(e,n){for(var r=281.0575,s=0;s<L.SBMAX_l-1;s++){var i=e.thm.l[s];if(i>0){var o=i*n,a=e.en.l[s];a>o&&(r+=a>1e10*o?J[s]*(10*t):J[s]*U.FAST_LOG10(a/o))}}return r}function te(e,t,n,r,s){var i,o;for(i=o=0;i<e.npart_l;++i){var a,l=0,c=0;for(a=0;a<e.numlines_l[i];++a,++o){var u=t[o];l+=u,c<u&&(c=u)}n[i]=l,r[i]=c,s[i]=l*e.rnumlines_l[i],W(e.rnumlines_l[i]>=0),W(n[i]>=0),W(r[i]>=0),W(s[i]>=0)}}function ne(e,t,n,r){var s=S.length-1,i=0,o=n[i]+n[i+1];for(o>0?((a=t[i])<t[i+1]&&(a=t[i+1]),W(e.numlines_l[i]+e.numlines_l[i+1]-1>0),(l=0|(o=20*(2*a-o)/(o*(e.numlines_l[i]+e.numlines_l[i+1]-1))))>s&&(l=s),r[i]=l):r[i]=0,i=1;i<e.npart_l-1;i++){var a,l;(o=n[i-1]+n[i]+n[i+1])>0?((a=t[i-1])<t[i]&&(a=t[i]),a<t[i+1]&&(a=t[i+1]),W(e.numlines_l[i-1]+e.numlines_l[i]+e.numlines_l[i+1]-1>0),(l=0|(o=20*(3*a-o)/(o*(e.numlines_l[i-1]+e.numlines_l[i]+e.numlines_l[i+1]-1))))>s&&(l=s),r[i]=l):r[i]=0}W(i==e.npart_l-1),(o=n[i-1]+n[i])>0?((a=t[i-1])<t[i]&&(a=t[i]),W(e.numlines_l[i-1]+e.numlines_l[i]-1>0),(l=0|(o=20*(2*a-o)/(o*(e.numlines_l[i-1]+e.numlines_l[i]-1))))>s&&(l=s),r[i]=l):r[i]=0,W(i==e.npart_l-1)}var re=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function se(t,n,r,s,i,o,a,l){var c=t.internal_flags;if(s<2)e.fft_long(c,a[l],s,n,r);else if(2==s)for(var u=L.BLKSIZE-1;u>=0;--u){var h=a[l+0][u],f=a[l+1][u];a[l+0][u]=(h+f)*U.SQRT2*.5,a[l+1][u]=(h-f)*U.SQRT2*.5}for(o[0]=_(a[l+0][0]),o[0]*=o[0],u=L.BLKSIZE/2-1;u>=0;--u){var d=a[l+0][L.BLKSIZE/2-u],p=a[l+0][L.BLKSIZE/2+u];o[L.BLKSIZE/2-u]=_(.5*(d*d+p*p))}var m=0;for(u=11;u<L.HBLKSIZE;u++)m+=o[u];if(c.tot_ener[s]=m,t.analysis){for(u=0;u<L.HBLKSIZE;u++)c.pinfo.energy[i][s][u]=c.pinfo.energy_save[s][u],c.pinfo.energy_save[s][u]=o[u];c.pinfo.pe[i][s]=c.pe[s]}}function ie(t,n,r,s,i,o,a,l){var c=t.internal_flags;if(0==i&&s<2&&e.fft_short(c,a[l],s,n,r),2==s)for(var u=L.BLKSIZE_s-1;u>=0;--u){var h=a[l+0][i][u],f=a[l+1][i][u];a[l+0][i][u]=(h+f)*U.SQRT2*.5,a[l+1][i][u]=(h-f)*U.SQRT2*.5}for(o[i][0]=a[l+0][i][0],o[i][0]*=o[i][0],u=L.BLKSIZE_s/2-1;u>=0;--u){var d=a[l+0][i][L.BLKSIZE_s/2-u],p=a[l+0][i][L.BLKSIZE_s/2+u];o[i][L.BLKSIZE_s/2-u]=_(.5*(d*d+p*p))}}function oe(e,t,n,r){var s=e.internal_flags;2==e.athaa_loudapprox&&n<2&&(s.loudness_sq[t][n]=s.loudness_sq_save[n],s.loudness_sq_save[n]=m(r,s))}this.L3psycho_anal_ns=function(e,t,s,i,o,a,l,f,p,_){var m,b,v,y,w,k,x,A,T,R,E=e.internal_flags,I=K([2,L.BLKSIZE]),M=K([2,3,L.BLKSIZE_s]),H=Y(L.CBANDS+1),q=Y(L.CBANDS+1),z=Y(L.CBANDS+2),U=G(2),Z=G(2),J=K([2,576]),se=G(L.CBANDS+2),ie=G(L.CBANDS+2);for(X.fill(ie,0),m=E.channels_out,e.mode==gn.JOINT_STEREO&&(m=4),T=e.VBR==F.vbr_off?0==E.ResvMax?0:E.ResvSize/E.ResvMax*.5:e.VBR==F.vbr_rh||e.VBR==F.vbr_mtrh||e.VBR==F.vbr_mt?.6:1,b=0;b<E.channels_out;b++){var oe=t[b],ae=s+576-350-d+192;for(y=0;y<576;y++){var le,ce;for(le=oe[ae+y+10],ce=0,w=0;w<(d-1)/2-1;w+=2)le+=re[w]*(oe[ae+y+w]+oe[ae+y+d-w]),ce+=re[w+1]*(oe[ae+y+w+1]+oe[ae+y+d-w-1]);J[b][y]=le+ce}o[i][b].en.assign(E.en[b]),o[i][b].thm.assign(E.thm[b]),m>2&&(a[i][b].en.assign(E.en[b+2]),a[i][b].thm.assign(E.thm[b+2]))}for(b=0;b<m;b++){var ue,he=Y(12),fe=[0,0,0,0],de=Y(12),pe=1,_e=Y(L.CBANDS),me=Y(L.CBANDS),ge=[0,0,0,0],be=Y(L.HBLKSIZE),ve=K([3,L.HBLKSIZE_s]);for(W(E.npart_s<=L.CBANDS),W(E.npart_l<=L.CBANDS),y=0;y<3;y++)he[y]=E.nsPsy.last_en_subshort[b][y+6],W(E.nsPsy.last_en_subshort[b][y+4]>0),de[y]=he[y]/E.nsPsy.last_en_subshort[b][y+4],fe[0]+=he[y];if(2==b)for(y=0;y<576;y++){var ye,we;ye=J[0][y],we=J[1][y],J[0][y]=ye+we,J[1][y]=ye-we}var ke=J[1&b],xe=0;for(y=0;y<9;y++){for(var Se=xe+64,Ae=1;xe<Se;xe++)Ae<Math.abs(ke[xe])&&(Ae=Math.abs(ke[xe]));E.nsPsy.last_en_subshort[b][y]=he[y+3]=Ae,fe[1+y/3]+=Ae,Ae>he[y+3-2]?(W(he[y+3-2]>0),Ae/=he[y+3-2]):Ae=he[y+3-2]>10*Ae?he[y+3-2]/(10*Ae):0,de[y+3]=Ae}if(e.analysis){var Te=de[0];for(y=1;y<12;y++)Te<de[y]&&(Te=de[y]);E.pinfo.ers[i][b]=E.pinfo.ers_save[b],E.pinfo.ers_save[b]=Te}for(ue=3==b?E.nsPsy.attackthre_s:E.nsPsy.attackthre,y=0;y<12;y++)0==ge[y/3]&&de[y]>ue&&(ge[y/3]=y%3+1);for(y=1;y<4;y++){var Re;fe[y-1]>fe[y]?(W(fe[y]>0),Re=fe[y-1]/fe[y]):(W(fe[y-1]>0),Re=fe[y]/fe[y-1]),Re<1.7&&(ge[y]=0,1==y&&(ge[0]=0))}for(0!=ge[0]&&0!=E.nsPsy.lastAttacks[b]&&(ge[0]=0),3!=E.nsPsy.lastAttacks[b]&&ge[0]+ge[1]+ge[2]+ge[3]==0||(pe=0,0!=ge[1]&&0!=ge[0]&&(ge[1]=0),0!=ge[2]&&0!=ge[1]&&(ge[2]=0),0!=ge[3]&&0!=ge[2]&&(ge[3]=0)),b<2?Z[b]=pe:0==pe&&(Z[0]=Z[1]=0),p[b]=E.tot_ener[b],g(e,be,ve,I,1&b,M,1&b,i,b,t,s),te(E,be,H,_e,me),ne(E,_e,me,se),A=0;A<3;A++){var Ee,$e;for(D(e,ve,q,z,b,A),P(E,q,z,b,A),x=0;x<L.SBMAX_s;x++){if($e=E.thm[b].s[x][A],$e*=c,ge[A]>=2||1==ge[A+1]){var Ie=0!=A?A-1:2;Ae=j(E.thm[b].s[x][Ie],$e,u*T),$e=Math.min($e,Ae)}1==ge[A]?(Ie=0!=A?A-1:2,Ae=j(E.thm[b].s[x][Ie],$e,h*T),$e=Math.min($e,Ae)):(0!=A&&3==ge[A-1]||0==A&&3==E.nsPsy.lastAttacks[b])&&(Ie=2!=A?A+1:0,Ae=j(E.thm[b].s[x][Ie],$e,h*T),$e=Math.min($e,Ae)),Ee=he[3*A+3]+he[3*A+4]+he[3*A+5],6*he[3*A+5]<Ee&&($e*=.5,6*he[3*A+4]<Ee&&($e*=.5)),E.thm[b].s[x][A]=$e}}for(E.nsPsy.lastAttacks[b]=ge[2],k=0,v=0;v<E.npart_l;v++){for(var Me=E.s3ind[v][0],Be=H[Me]*S[se[Me]],Ce=E.s3_ll[k++]*Be;++Me<=E.s3ind[v][1];)Be=H[Me]*S[se[Me]],Ce=$(Ce,E.s3_ll[k++]*Be,Me,Me-v,E,0);Ce*=.158489319246111,E.blocktype_old[1&b]==L.SHORT_TYPE?z[v]=Ce:z[v]=j(Math.min(Ce,Math.min(n*E.nb_1[b][v],r*E.nb_2[b][v])),Ce,T),E.nb_2[b][v]=E.nb_1[b][v],E.nb_1[b][v]=Ce}for(;v<=L.CBANDS;++v)H[v]=0,z[v]=0;N(E,H,z,b)}for(e.mode!=gn.STEREO&&e.mode!=gn.JOINT_STEREO||e.interChRatio>0&&B(e,e.interChRatio),e.mode==gn.JOINT_STEREO&&(C(E),R=e.msfix,Math.abs(R)>0&&O(E,R,e.ATHlower*E.ATH.adjust)),V(e,Z,_,U),b=0;b<m;b++){var Oe,Pe,Ne,Le=0;b>1?(Oe=f,Le=-2,Pe=L.NORM_TYPE,_[0]!=L.SHORT_TYPE&&_[1]!=L.SHORT_TYPE||(Pe=L.SHORT_TYPE),Ne=a[i][b-2]):(Oe=l,Le=0,Pe=_[b],Ne=o[i][b]),Pe==L.SHORT_TYPE?Oe[Le+b]=Q(Ne,E.masking_lower):Oe[Le+b]=ee(Ne,E.masking_lower),e.analysis&&(E.pinfo.pe[i][b]=Oe[Le+b])}return 0};var ae=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function le(e,t,n,r,s,i,o,a,l,c){for(var u=K([2,576]),h=e.internal_flags,f=h.channels_out,p=e.mode==gn.JOINT_STEREO?4:f,_=0;_<f;_++){firbuf=t[_];for(var m=n+576-350-d+192,g=0;g<576;g++){var b,v;b=firbuf[m+g+10],v=0;for(var y=0;y<(d-1)/2-1;y+=2)b+=ae[y]*(firbuf[m+g+y]+firbuf[m+g+d-y]),v+=ae[y+1]*(firbuf[m+g+y+1]+firbuf[m+g+d-y-1]);u[_][g]=b+v}s[r][_].en.assign(h.en[_]),s[r][_].thm.assign(h.thm[_]),p>2&&(i[r][_].en.assign(h.en[_+2]),i[r][_].thm.assign(h.thm[_+2]))}for(_=0;_<p;_++){var w=Y(12),k=Y(12),x=[0,0,0,0],S=u[1&_],A=0,T=3==_?h.nsPsy.attackthre_s:h.nsPsy.attackthre,R=1;if(2==_)for(g=0,y=576;y>0;++g,--y){var E=u[0][g],$=u[1][g];u[0][g]=E+$,u[1][g]=E-$}for(g=0;g<3;g++)k[g]=h.nsPsy.last_en_subshort[_][g+6],W(h.nsPsy.last_en_subshort[_][g+4]>0),w[g]=k[g]/h.nsPsy.last_en_subshort[_][g+4],x[0]+=k[g];for(g=0;g<9;g++){for(var I=A+64,M=1;A<I;A++)M<Math.abs(S[A])&&(M=Math.abs(S[A]));h.nsPsy.last_en_subshort[_][g]=k[g+3]=M,x[1+g/3]+=M,M>k[g+3-2]?(W(k[g+3-2]>0),M/=k[g+3-2]):M=k[g+3-2]>10*M?k[g+3-2]/(10*M):0,w[g+3]=M}for(g=0;g<3;++g){var B=k[3*g+3]+k[3*g+4]+k[3*g+5],C=1;6*k[3*g+5]<B&&(C*=.5,6*k[3*g+4]<B&&(C*=.5)),a[_][g]=C}if(e.analysis){var O=w[0];for(g=1;g<12;g++)O<w[g]&&(O=w[g]);h.pinfo.ers[r][_]=h.pinfo.ers_save[_],h.pinfo.ers_save[_]=O}for(g=0;g<12;g++)0==l[_][g/3]&&w[g]>T&&(l[_][g/3]=g%3+1);for(g=1;g<4;g++){var P=x[g-1],N=x[g];Math.max(P,N)<4e4&&P<1.7*N&&N<1.7*P&&(1==g&&l[_][0]<=l[_][g]&&(l[_][0]=0),l[_][g]=0)}l[_][0]<=h.nsPsy.lastAttacks[_]&&(l[_][0]=0),3!=h.nsPsy.lastAttacks[_]&&l[_][0]+l[_][1]+l[_][2]+l[_][3]==0||(R=0,0!=l[_][1]&&0!=l[_][0]&&(l[_][1]=0),0!=l[_][2]&&0!=l[_][1]&&(l[_][2]=0),0!=l[_][3]&&0!=l[_][2]&&(l[_][3]=0)),_<2?c[_]=R:0==R&&(c[0]=c[1]=0),o[_]=h.tot_ener[_]}}function ce(e,t,n){if(0==n)for(var r=0;r<e.npart_s;r++)e.nb_s2[t][r]=e.nb_s1[t][r],e.nb_s1[t][r]=0}function ue(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}function he(e,t,n,r){var s=S.length-1,i=0,o=n[i]+n[i+1];for(o>0?((a=t[i])<t[i+1]&&(a=t[i+1]),W(e.numlines_s[i]+e.numlines_s[i+1]-1>0),(l=0|(o=20*(2*a-o)/(o*(e.numlines_s[i]+e.numlines_s[i+1]-1))))>s&&(l=s),r[i]=l):r[i]=0,i=1;i<e.npart_s-1;i++){var a,l;o=n[i-1]+n[i]+n[i+1],W(i+1<e.npart_s),o>0?((a=t[i-1])<t[i]&&(a=t[i]),a<t[i+1]&&(a=t[i+1]),W(e.numlines_s[i-1]+e.numlines_s[i]+e.numlines_s[i+1]-1>0),(l=0|(o=20*(3*a-o)/(o*(e.numlines_s[i-1]+e.numlines_s[i]+e.numlines_s[i+1]-1))))>s&&(l=s),r[i]=l):r[i]=0}W(i==e.npart_s-1),(o=n[i-1]+n[i])>0?((a=t[i-1])<t[i]&&(a=t[i]),W(e.numlines_s[i-1]+e.numlines_s[i]-1>0),(l=0|(o=20*(2*a-o)/(o*(e.numlines_s[i-1]+e.numlines_s[i]-1))))>s&&(l=s),r[i]=l):r[i]=0,W(i==e.npart_s-1)}function fe(e,t,n,r,s,i){var o,a,l,c=e.internal_flags,u=new float[L.CBANDS],h=Y(L.CBANDS),f=new int[L.CBANDS];for(l=a=0;l<c.npart_s;++l){var d=0,p=0,_=c.numlines_s[l];for(o=0;o<_;++o,++a){var m=t[i][a];d+=m,p<m&&(p=m)}n[l]=d,u[l]=p,h[l]=d/_,W(h[l]>=0)}for(W(l==c.npart_s);l<L.CBANDS;++l)u[l]=0,h[l]=0;for(he(c,u,h,f),a=l=0;l<c.npart_s;l++){var g,b,v,y,w,k=c.s3ind_s[l][0],x=c.s3ind_s[l][1];for(g=f[k],b=1,y=c.s3_ss[a]*n[k]*S[f[k]],++a,++k;k<=x;)g+=f[k],b+=1,y=M(y,v=c.s3_ss[a]*n[k]*S[f[k]],k-l),++a,++k;y*=w=.5*S[g=(1+2*g)/(2*b)],r[l]=y,c.nb_s2[s][l]=c.nb_s1[s][l],c.nb_s1[s][l]=y,v=u[l],v*=c.minval_s[l],v*=w,r[l]>v&&(r[l]=v),c.masking_lower>1&&(r[l]*=c.masking_lower),r[l]>n[l]&&(r[l]=n[l]),c.masking_lower<1&&(r[l]*=c.masking_lower),W(r[l]>=0)}for(;l<L.CBANDS;++l)n[l]=0,r[l]=0}function de(e,t,s,i,o){var a,l=Y(L.CBANDS),c=Y(L.CBANDS),u=G(L.CBANDS+2);te(e,t,s,l,c),ne(e,l,c,u);var f=0;for(a=0;a<e.npart_l;a++){var d,p,_,m=e.s3ind[a][0],g=e.s3ind[a][1],b=0,v=0;for(b=u[m],v+=1,p=e.s3_ll[f]*s[m]*S[u[m]],++f,++m;m<=g;)b+=u[m],v+=1,p=M(p,d=e.s3_ll[f]*s[m]*S[u[m]],m-a),++f,++m;if(p*=_=.5*S[b=(1+2*b)/(2*v)],e.blocktype_old[1&o]==L.SHORT_TYPE){var y=n*e.nb_1[o][a];i[a]=y>0?Math.min(p,y):Math.min(p,s[a]*h)}else{var w=r*e.nb_2[o][a],k=n*e.nb_1[o][a];w<=0&&(w=p),k<=0&&(k=p),y=e.blocktype_old[1&o]==L.NORM_TYPE?Math.min(k,w):k,i[a]=Math.min(p,y)}e.nb_2[o][a]=e.nb_1[o][a],e.nb_1[o][a]=p,d=l[a],d*=e.minval_l[a],d*=_,i[a]>d&&(i[a]=d),e.masking_lower>1&&(i[a]*=e.masking_lower),i[a]>s[a]&&(i[a]=s[a]),e.masking_lower<1&&(i[a]*=e.masking_lower),W(i[a]>=0)}for(;a<L.CBANDS;++a)s[a]=0,i[a]=0}function pe(e,t){var n=e.internal_flags;e.short_blocks!=z.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var r=0;r<n.channels_out;r++)e.short_blocks==z.short_block_dispensed&&(t[r]=1),e.short_blocks==z.short_block_forced&&(t[r]=0)}function _e(e,t,n){for(var r=e.internal_flags,s=0;s<r.channels_out;s++){var i=L.NORM_TYPE;0!=t[s]?(W(r.blocktype_old[s]!=L.START_TYPE),r.blocktype_old[s]==L.SHORT_TYPE&&(i=L.STOP_TYPE)):(i=L.SHORT_TYPE,r.blocktype_old[s]==L.NORM_TYPE&&(r.blocktype_old[s]=L.START_TYPE),r.blocktype_old[s]==L.STOP_TYPE&&(r.blocktype_old[s]=L.SHORT_TYPE)),n[s]=r.blocktype_old[s],r.blocktype_old[s]=i}}function me(e,t,n,r,s,i,o){for(var a,l,c=2*i,u=i>0?Math.pow(10,s):1,h=0;h<o;++h){var f=e[2][h],d=e[3][h],p=t[0][h],_=t[1][h],m=t[2][h],g=t[3][h];if(p<=1.58*_&&_<=1.58*p){var b=n[h]*d,v=n[h]*f;l=Math.max(m,Math.min(g,b)),a=Math.max(g,Math.min(m,v))}else l=m,a=g;if(i>0){var y,w,k=r[h]*u;if(y=Math.min(Math.max(p,k),Math.max(_,k)),(w=(m=Math.max(l,k))+(g=Math.max(a,k)))>0&&y*c<w){var x=y*c/w;m*=x,g*=x}l=Math.min(m,l),a=Math.min(g,a)}l>f&&(l=f),a>d&&(a=d),t[2][h]=l,t[3][h]=a}}function ge(e,t){var n;return(n=e>=0?27*-e:e*t)<=-72?0:Math.exp(n*p)}function be(e){var t,n,r=0,s=0,i=0;for(i=0;ge(i,e)>1e-20;i-=1);for(t=i,n=0;Math.abs(n-t)>1e-12;)ge(i=(n+t)/2,e)>0?n=i:t=i;for(r=t,i=0,i=0;ge(i,e)>1e-20;i+=1);for(t=0,n=i;Math.abs(n-t)>1e-12;)ge(i=(n+t)/2,e)>0?t=i:n=i;s=n;var o,a=0,l=1e3;for(o=0;o<=l;++o)a+=ge(i=r+o*(s-r)/l,e);return(l+1)/(a*(s-r))}function ve(e){var t,n,r,s;return t=e,n=(t*=t>=0?3:1.5)>=.5&&t<=2.5?8*((s=t-.5)*s-2*s):0,(r=15.811389+7.5*(t+=.474)-17.5*Math.sqrt(1+t*t))<=-60?0:(t=Math.exp((n+r)*p),t/=.6609193)}function ye(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function we(e,t,n,r,s,i,a,l,c,u,h,f){var d,p=Y(L.CBANDS+1),_=l/(f>15?1152:384),m=G(L.HBLKSIZE);l/=c;var g=0,b=0;for(d=0;d<L.CBANDS;d++){var v;for(E=ye(l*g),p[d]=l*g,v=g;ye(l*v)-E<o&&v<=c/2;v++);for(e[d]=v-g,b=d+1;g<v;)m[g++]=d;if(g>c/2){g=c/2,++d;break}}p[d]=l*g;for(var y=0;y<f;y++){var w,k,x,S,A;x=u[y],S=u[y+1],(w=0|Math.floor(.5+h*(x-.5)))<0&&(w=0),(k=0|Math.floor(.5+h*(S-.5)))>c/2&&(k=c/2),n[y]=(m[w]+m[k])/2,t[y]=m[k];var T=_*S;a[y]=(T-p[t[y]])/(p[t[y]+1]-p[t[y]]),a[y]<0?a[y]=0:a[y]>1&&(a[y]=1),A=ye(l*u[y]*h),A=Math.min(A,15.5)/15.5,i[y]=Math.pow(10,1.25*(1-Math.cos(Math.PI*A))-2.5)}g=0;for(var R=0;R<b;R++){var E,$,I=e[R];E=ye(l*g),$=ye(l*(g+I-1)),r[R]=.5*(E+$),E=ye(l*(g-.5)),$=ye(l*(g+I-.5)),s[R]=$-E,g+=I}return b}function ke(e,t,n,r,s,i){var o,a=K([L.CBANDS,L.CBANDS]),l=0;if(i)for(var c=0;c<t;c++)for(o=0;o<t;o++){var u=ve(n[c]-n[o])*r[o];a[c][o]=u*s[c]}else for(o=0;o<t;o++){var h=15+Math.min(21/n[o],12),f=be(h);for(c=0;c<t;c++)u=f*ge(n[c]-n[o],h)*r[o],a[c][o]=u*s[c]}for(c=0;c<t;c++){for(o=0;o<t&&!(a[c][o]>0);o++);for(e[c][0]=o,o=t-1;o>0&&!(a[c][o]>0);o--);e[c][1]=o,l+=e[c][1]-e[c][0]+1}var d=Y(l),p=0;for(c=0;c<t;c++)for(o=e[c][0];o<=e[c][1];o++)d[p++]=a[c][o];return d}function xe(e){var t=ye(e);return t=Math.min(t,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*t))-2.5)}function Se(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}this.L3psycho_anal_vbr=function(e,t,n,r,s,i,o,a,l,f){var d=e.internal_flags,p=Y(L.HBLKSIZE),_=K([3,L.HBLKSIZE_s]),m=K([2,L.BLKSIZE]),g=K([2,3,L.BLKSIZE_s]),b=K([4,L.CBANDS]),v=K([4,L.CBANDS]),y=K([4,3]),w=.6,k=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],x=G(2),S=e.mode==gn.JOINT_STEREO?4:d.channels_out;le(e,t,n,r,s,i,l,y,k,x),pe(e,x);for(var A=0;A<S;A++)se(e,t,n,A,r,p,m,R=1&A),oe(e,r,A,p),0!=x[R]?de(d,p,b[A],v[A],A):ue(d,A);for(x[0]+x[1]==2&&e.mode==gn.JOINT_STEREO&&me(b,v,d.mld_cb_l,d.ATH.cb_l,e.ATHlower*d.ATH.adjust,e.msfix,d.npart_l),A=0;A<S;A++)0!=x[R=1&A]&&N(d,b[A],v[A],A);for(var T=0;T<3;T++){for(A=0;A<S;++A)0!=x[R=1&A]?ce(d,A,T):(ie(e,t,n,A,T,_,g,R),fe(e,_,b[A],v[A],A,T));for(x[0]+x[1]==0&&e.mode==gn.JOINT_STEREO&&me(b,v,d.mld_cb_s,d.ATH.cb_s,e.ATHlower*d.ATH.adjust,e.msfix,d.npart_s),A=0;A<S;++A)0==x[R=1&A]&&P(d,b[A],v[A],A,T)}for(A=0;A<S;A++){var R;if(0==x[R=1&A])for(var E=0;E<L.SBMAX_s;E++){var $=Y(3);for(T=0;T<3;T++){var I=d.thm[A].s[E][T];if(I*=c,k[A][T]>=2||1==k[A][T+1]){var M=0!=T?T-1:2,B=j(d.thm[A].s[E][M],I,u*w);I=Math.min(I,B)}else 1==k[A][T]?(M=0!=T?T-1:2,B=j(d.thm[A].s[E][M],I,h*w),I=Math.min(I,B)):(0!=T&&3==k[A][T-1]||0==T&&3==d.nsPsy.lastAttacks[A])&&(M=2!=T?T+1:0,B=j(d.thm[A].s[E][M],I,h*w),I=Math.min(I,B));I*=y[A][T],$[T]=I}for(T=0;T<3;T++)d.thm[A].s[E][T]=$[T]}}for(A=0;A<S;A++)d.nsPsy.lastAttacks[A]=k[A][2];for(_e(e,x,f),A=0;A<S;A++){var C,O,D,V;A>1?(C=a,O=-2,D=L.NORM_TYPE,f[0]!=L.SHORT_TYPE&&f[1]!=L.SHORT_TYPE||(D=L.SHORT_TYPE),V=i[r][A-2]):(C=o,O=0,D=f[A],V=s[r][A]),D==L.SHORT_TYPE?C[O+A]=Q(V,d.masking_lower):C[O+A]=ee(V,d.masking_lower),e.analysis&&(d.pinfo.pe[r][A]=C[O+A])}return 0},this.psymodel_init=function(n){var r,s,i=n.internal_flags,o=!0,a=13,c=24,u=0,h=0,d=-8.25,p=-4.5,_=Y(L.CBANDS),m=Y(L.CBANDS),g=Y(L.CBANDS),b=n.out_samplerate;switch(n.experimentalZ){default:case 0:o=!0;break;case 1:o=n.VBR!=F.vbr_mtrh&&n.VBR!=F.vbr_mt;break;case 2:o=!1;break;case 3:a=8,u=-1.75,h=-.0125,d=-8.25,p=-2.25}for(i.ms_ener_ratio_old=.25,i.blocktype_old[0]=i.blocktype_old[1]=L.NORM_TYPE,r=0;r<4;++r){for(var v=0;v<L.CBANDS;++v)i.nb_1[r][v]=1e20,i.nb_2[r][v]=1e20,i.nb_s1[r][v]=i.nb_s2[r][v]=1;for(var y=0;y<L.SBMAX_l;y++)i.en[r].l[y]=1e20,i.thm[r].l[y]=1e20;for(v=0;v<3;++v){for(y=0;y<L.SBMAX_s;y++)i.en[r].s[y][v]=1e20,i.thm[r].s[y][v]=1e20;i.nsPsy.lastAttacks[r]=0}for(v=0;v<9;v++)i.nsPsy.last_en_subshort[r][v]=10}for(i.loudness_sq_save[0]=i.loudness_sq_save[1]=0,i.npart_l=we(i.numlines_l,i.bo_l,i.bm_l,_,m,i.mld_l,i.PSY.bo_l_weight,b,L.BLKSIZE,i.scalefac_band.l,L.BLKSIZE/1152,L.SBMAX_l),W(i.npart_l<L.CBANDS),r=0;r<i.npart_l;r++){var w=u;_[r]>=a&&(w=h*(_[r]-a)/(c-a)+u*(c-_[r])/(c-a)),g[r]=Math.pow(10,w/10),i.numlines_l[r]>0?i.rnumlines_l[r]=1/i.numlines_l[r]:i.rnumlines_l[r]=0}for(i.s3_ll=ke(i.s3ind,i.npart_l,_,m,g,o),v=0,r=0;r<i.npart_l;r++){S=q.MAX_VALUE;for(var k=0;k<i.numlines_l[r];k++,v++){var x=b*v/(1e3*L.BLKSIZE);T=this.ATHformula(1e3*x,n)-20,T=Math.pow(10,.1*T),S>(T*=i.numlines_l[r])&&(S=T)}i.ATH.cb_l[r]=S,(S=20*_[r]/10-20)>6&&(S=100),S<-15&&(S=-15),S-=8,i.minval_l[r]=Math.pow(10,S/10)*i.numlines_l[r]}for(i.npart_s=we(i.numlines_s,i.bo_s,i.bm_s,_,m,i.mld_s,i.PSY.bo_s_weight,b,L.BLKSIZE_s,i.scalefac_band.s,L.BLKSIZE_s/384,L.SBMAX_s),W(i.npart_s<L.CBANDS),v=0,r=0;r<i.npart_s;r++){var S;for(w=d,_[r]>=a&&(w=p*(_[r]-a)/(c-a)+d*(c-_[r])/(c-a)),g[r]=Math.pow(10,w/10),S=q.MAX_VALUE,k=0;k<i.numlines_s[r];k++,v++){var T;x=b*v/(1e3*L.BLKSIZE_s),T=this.ATHformula(1e3*x,n)-20,T=Math.pow(10,.1*T),S>(T*=i.numlines_s[r])&&(S=T)}i.ATH.cb_s[r]=S,S=7*_[r]/12-7,_[r]>12&&(S*=1+3.1*Math.log(1+S)),_[r]<12&&(S*=1+2.3*Math.log(1-S)),S<-15&&(S=-15),S-=8,i.minval_s[r]=Math.pow(10,S/10)*i.numlines_s[r]}i.s3_ss=ke(i.s3ind_s,i.npart_s,_,m,g,o),A(),e.init_fft(i),i.decay=Math.exp(-1*t/(l*b/192)),s=f,0!=(2&n.exp_nspsytune)&&(s=1),Math.abs(n.msfix)>0&&(s=n.msfix),n.msfix=s;for(var R=0;R<i.npart_l;R++)i.s3ind[R][1]>i.npart_l-1&&(i.s3ind[R][1]=i.npart_l-1);var E=576*i.mode_gr/b;if(i.ATH.decay=Math.pow(10,-1.2*E),i.ATH.adjust=.01,i.ATH.adjustLimit=1,W(i.bo_l[L.SBMAX_l-1]<=i.npart_l),W(i.bo_s[L.SBMAX_s-1]<=i.npart_s),-1!=n.ATHtype){var $=n.out_samplerate/L.BLKSIZE,I=0;for(x=0,r=0;r<L.BLKSIZE/2;++r)x+=$,i.ATH.eql_w[r]=1/Math.pow(10,this.ATHformula(x,n)/10),I+=i.ATH.eql_w[r];for(I=1/I,r=L.BLKSIZE/2;--r>=0;)i.ATH.eql_w[r]*=I}for(R=v=0;R<i.npart_s;++R)for(r=0;r<i.numlines_s[R];++r)++v;for(R=v=0;R<i.npart_l;++R)for(r=0;r<i.numlines_l[R];++r)++v;for(v=0,r=0;r<i.npart_l;r++)x=b*(v+i.numlines_l[r]/2)/(1*L.BLKSIZE),i.mld_cb_l[r]=xe(x),v+=i.numlines_l[r];for(;r<L.CBANDS;++r)i.mld_cb_l[r]=1;for(v=0,r=0;r<i.npart_s;r++)x=b*(v+i.numlines_s[r]/2)/(1*L.BLKSIZE_s),i.mld_cb_s[r]=xe(x),v+=i.numlines_s[r];for(;r<L.CBANDS;++r)i.mld_cb_s[r]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=Se(e,9);break;case 1:n=Se(e,-1);break;case 2:default:n=Se(e,0);break;case 3:n=Se(e,1)+6;break;case 4:n=Se(e,t.ATHcurve)}return n}}var Q=Z;function J(e){var t=e;this.ordinal=function(){return t}}J.STEREO=new J(0),J.JOINT_STEREO=new J(1),J.DUAL_CHANNEL=new J(2),J.MONO=new J(3),J.NOT_SET=new J(4);var ee=J;function te(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=ee.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var ne=te,re={};re.SFBMAX=3*L.SBMAX_s;var se=re,ie=_.new_float,oe=_.new_int;function ae(){this.xr=ie(576),this.l3_enc=oe(576),this.scalefac=oe(se.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=oe(3),this.subblock_gain=oe(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=oe(se.SFBMAX),this.window=oe(se.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=oe(4),this.max_nonzero_coeff=0;var e=this;function t(e){return new Int32Array(e)}function n(e){return new Float32Array(e)}this.assign=function(r){e.xr=n(r.xr),e.l3_enc=t(r.l3_enc),e.scalefac=t(r.scalefac),e.xrpow_max=r.xrpow_max,e.part2_3_length=r.part2_3_length,e.big_values=r.big_values,e.count1=r.count1,e.global_gain=r.global_gain,e.scalefac_compress=r.scalefac_compress,e.block_type=r.block_type,e.mixed_block_flag=r.mixed_block_flag,e.table_select=t(r.table_select),e.subblock_gain=t(r.subblock_gain),e.region0_count=r.region0_count,e.region1_count=r.region1_count,e.preflag=r.preflag,e.scalefac_scale=r.scalefac_scale,e.count1table_select=r.count1table_select,e.part2_length=r.part2_length,e.sfb_lmax=r.sfb_lmax,e.sfb_smin=r.sfb_smin,e.psy_lmax=r.psy_lmax,e.sfbmax=r.sfbmax,e.psymax=r.psymax,e.sfbdivide=r.sfbdivide,e.width=t(r.width),e.window=t(r.window),e.count1bits=r.count1bits,e.sfb_partition_table=r.sfb_partition_table.slice(0),e.slen=t(r.slen),e.max_nonzero_coeff=r.max_nonzero_coeff}}var le=ae,ce=_.new_int;function ue(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[ce(4),ce(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new le}var he=ue,fe=_.System,de=_.new_int;function pe(e,t,n,r){this.l=de(1+L.SBMAX_l),this.s=de(1+L.SBMAX_s),this.psfb21=de(1+L.PSFB21),this.psfb12=de(1+L.PSFB12);var s=this.l,i=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],fe.arraycopy(this.arrL,0,s,0,Math.min(this.arrL.length,this.l.length)),fe.arraycopy(this.arrS,0,i,0,Math.min(this.arrS.length,this.s.length)),fe.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),fe.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var _e=pe,me=_.new_float,ge=_.new_float_n,be=_.new_int;function ve(){this.last_en_subshort=ge([4,9]),this.lastAttacks=be(4),this.pefirbuf=me(19),this.longfact=me(L.SBMAX_l),this.shortfact=me(L.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var ye=ve;function we(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var ke=we,xe=_.new_byte,Se=_.new_double,Ae=_.new_float,Te=_.new_float_n,Re=_.new_int,Ee=_.new_int_n;function $e(){var e=40;function t(){this.write_timing=0,this.ptr=0,this.buf=xe(e)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Te([2,$e.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new he,this.ms_ratio=Ae(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Re(2),this.CurrentStep=Re(2),this.masking_lower=0,this.bv_scf=Re(576),this.pseudohalf=Re(se.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*$e.BPC+1),this.itime=Se(2),this.sideinfo_len=0,this.sb_sample=Te([2,2,18,L.SBLIMIT]),this.amp_filter=Ae(32),this.header=new Array($e.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new _e,this.minval_l=Ae(L.CBANDS),this.minval_s=Ae(L.CBANDS),this.nb_1=Te([4,L.CBANDS]),this.nb_2=Te([4,L.CBANDS]),this.nb_s1=Te([4,L.CBANDS]),this.nb_s2=Te([4,L.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Ae(4),this.loudness_sq=Te([2,2]),this.loudness_sq_save=Ae(2),this.mld_l=Ae(L.SBMAX_l),this.mld_s=Ae(L.SBMAX_s),this.bm_l=Re(L.SBMAX_l),this.bo_l=Re(L.SBMAX_l),this.bm_s=Re(L.SBMAX_s),this.bo_s=Re(L.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Ee([L.CBANDS,2]),this.s3ind_s=Ee([L.CBANDS,2]),this.numlines_s=Re(L.CBANDS),this.numlines_l=Re(L.CBANDS),this.rnumlines_l=Ae(L.CBANDS),this.mld_cb_l=Ae(L.CBANDS),this.mld_cb_s=Ae(L.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Ae(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Re(2),this.nsPsy=new ye,this.VBR_seek_table=new ke,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Ee([16,5]),this.bitrate_blockType_Hist=Ee([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new T;for(n=0;n<this.thm.length;n++)this.thm[n]=new T;for(n=0;n<this.header.length;n++)this.header[n]=new t}$e.MFSIZE=3456+L.ENCDELAY-L.MDCTDELAY,$e.MAX_HEADER_BUF=256,$e.MAX_BITS_PER_CHANNEL=4095,$e.MAX_BITS_PER_GRANULE=7680,$e.BPC=320;var Ie=$e,Me=_.new_float;function Be(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Me(L.SBMAX_l),this.s=Me(L.SBMAX_s),this.psfb21=Me(L.PSFB21),this.psfb12=Me(L.PSFB12),this.cb_l=Me(L.CBANDS),this.cb_s=Me(L.CBANDS),this.eql_w=Me(L.BLKSIZE/2)}var Ce=Be,Oe=_.System,Pe=_.Arrays;function Ne(){var e=64.82,t=.95,n=Ne.RMS_WINDOW_TIME_NUMERATOR,r=Ne.RMS_WINDOW_TIME_DENOMINATOR,s=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],i=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function o(e,t,n,r,s,i){for(;0!=s--;)n[r]=1e-10+e[t+0]*i[0]-n[r-1]*i[1]+e[t-1]*i[2]-n[r-2]*i[3]+e[t-2]*i[4]-n[r-3]*i[5]+e[t-3]*i[6]-n[r-4]*i[7]+e[t-4]*i[8]-n[r-5]*i[9]+e[t-5]*i[10]-n[r-6]*i[11]+e[t-6]*i[12]-n[r-7]*i[13]+e[t-7]*i[14]-n[r-8]*i[15]+e[t-8]*i[16]-n[r-9]*i[17]+e[t-9]*i[18]-n[r-10]*i[19]+e[t-10]*i[20],++r,++t}function a(e,t,n,r,s,i){for(;0!=s--;)n[r]=e[t+0]*i[0]-n[r-1]*i[1]+e[t-1]*i[2]-n[r-2]*i[3]+e[t-2]*i[4],++r,++t}function l(e,t){for(var s=0;s<MAX_ORDER;s++)e.linprebuf[s]=e.lstepbuf[s]=e.loutbuf[s]=e.rinprebuf[s]=e.rstepbuf[s]=e.routbuf[s]=0;switch(0|t){case 48e3:e.reqindex=0;break;case 44100:e.reqindex=1;break;case 32e3:e.reqindex=2;break;case 24e3:e.reqindex=3;break;case 22050:e.reqindex=4;break;case 16e3:e.reqindex=5;break;case 12e3:e.reqindex=6;break;case 11025:e.reqindex=7;break;case 8e3:e.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return e.sampleWindow=0|(t*n+r-1)/r,e.lsum=0,e.rsum=0,e.totsamp=0,Pe.ill(e.A,0),INIT_GAIN_ANALYSIS_OK}function c(e){return e*e}function u(n,r){var s,i=0;for(s=0;s<r;s++)i+=n[s];if(0==i)return GAIN_NOT_ENOUGH_SAMPLES;var o=0|Math.ceil(i*(1-t));for(s=r;s-- >0&&!((o-=n[s])<=0););return e-s/Ne.STEPS_per_dB}this.InitGainAnalysis=function(e,t){return l(e,t)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(e.linpre=MAX_ORDER,e.rinpre=MAX_ORDER,e.lstep=MAX_ORDER,e.rstep=MAX_ORDER,e.lout=MAX_ORDER,e.rout=MAX_ORDER,Pe.fill(e.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(e,t,n,r,l,u,h){var f,d,p,_,m,g,b;if(0==u)return GAIN_ANALYSIS_OK;switch(b=0,m=u,h){case 1:r=t,l=n;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(u<MAX_ORDER?(Oe.arraycopy(t,n,e.linprebuf,MAX_ORDER,u),Oe.arraycopy(r,l,e.rinprebuf,MAX_ORDER,u)):(Oe.arraycopy(t,n,e.linprebuf,MAX_ORDER,MAX_ORDER),Oe.arraycopy(r,l,e.rinprebuf,MAX_ORDER,MAX_ORDER));m>0;){g=m>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:m,b<MAX_ORDER?(f=e.linpre+b,d=e.linprebuf,p=e.rinpre+b,_=e.rinprebuf,g>MAX_ORDER-b&&(g=MAX_ORDER-b)):(f=n+b,d=t,p=l+b,_=r),o(d,f,e.lstepbuf,e.lstep+e.totsamp,g,s[e.reqindex]),o(_,p,e.rstepbuf,e.rstep+e.totsamp,g,s[e.reqindex]),a(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,g,i[e.reqindex]),a(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,g,i[e.reqindex]),f=e.lout+e.totsamp,d=e.loutbuf,p=e.rout+e.totsamp,_=e.routbuf;for(var v=g%8;0!=v--;)e.lsum+=c(d[f++]),e.rsum+=c(_[p++]);for(v=g/8;0!=v--;)e.lsum+=c(d[f+0])+c(d[f+1])+c(d[f+2])+c(d[f+3])+c(d[f+4])+c(d[f+5])+c(d[f+6])+c(d[f+7]),f+=8,e.rsum+=c(_[p+0])+c(_[p+1])+c(_[p+2])+c(_[p+3])+c(_[p+4])+c(_[p+5])+c(_[p+6])+c(_[p+7]),p+=8;if(m-=g,b+=g,e.totsamp+=g,e.totsamp==e.sampleWindow){var y=10*Ne.STEPS_per_dB*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37),w=y<=0?0:0|y;w>=e.A.length&&(w=e.A.length-1),e.A[w]++,e.lsum=e.rsum=0,Oe.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),Oe.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),Oe.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),Oe.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0}if(e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return u<MAX_ORDER?(Oe.arraycopy(e.linprebuf,u,e.linprebuf,0,MAX_ORDER-u),Oe.arraycopy(e.rinprebuf,u,e.rinprebuf,0,MAX_ORDER-u),Oe.arraycopy(t,n,e.linprebuf,MAX_ORDER-u,u),Oe.arraycopy(r,l,e.rinprebuf,MAX_ORDER-u,u)):(Oe.arraycopy(t,n+u-MAX_ORDER,e.linprebuf,0,MAX_ORDER),Oe.arraycopy(r,l+u-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(e){for(var t=u(e.A,e.A.length),n=0;n<e.A.length;n++)e.B[n]+=e.A[n],e.A[n]=0;for(n=0;n<MAX_ORDER;n++)e.linprebuf[n]=e.lstepbuf[n]=e.loutbuf[n]=e.rinprebuf[n]=e.rstepbuf[n]=e.routbuf[n]=0;return e.totsamp=0,e.lsum=e.rsum=0,t}}Ne.STEPS_per_dB=100,Ne.MAX_dB=120,Ne.GAIN_NOT_ENOUGH_SAMPLES=-24601,Ne.GAIN_ANALYSIS_ERROR=0,Ne.GAIN_ANALYSIS_OK=1,Ne.INIT_GAIN_ANALYSIS_ERROR=0,Ne.INIT_GAIN_ANALYSIS_OK=1,Ne.YULE_ORDER=10,Ne.MAX_ORDER=Ne.YULE_ORDER,Ne.MAX_SAMP_FREQ=48e3,Ne.RMS_WINDOW_TIME_NUMERATOR=1,Ne.RMS_WINDOW_TIME_DENOMINATOR=20,Ne.MAX_SAMPLES_PER_WINDOW=Ne.MAX_SAMP_FREQ*Ne.RMS_WINDOW_TIME_NUMERATOR/Ne.RMS_WINDOW_TIME_DENOMINATOR+1;var Le=Ne,De=_.new_float,Ve=_.new_int;function je(){this.linprebuf=De(2*Le.MAX_ORDER),this.linpre=0,this.lstepbuf=De(Le.MAX_SAMPLES_PER_WINDOW+Le.MAX_ORDER),this.lstep=0,this.loutbuf=De(Le.MAX_SAMPLES_PER_WINDOW+Le.MAX_ORDER),this.lout=0,this.rinprebuf=De(2*Le.MAX_ORDER),this.rinpre=0,this.rstepbuf=De(Le.MAX_SAMPLES_PER_WINDOW+Le.MAX_ORDER),this.rstep=0,this.routbuf=De(Le.MAX_SAMPLES_PER_WINDOW+Le.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Ve(0|Le.STEPS_per_dB*Le.MAX_dB),this.B=Ve(0|Le.STEPS_per_dB*Le.MAX_dB)}var He=je;function Fe(e){this.bits=e}var qe=Fe,ze=_.new_float,Ue=_.new_int,Xe=_.assert;function Ye(e){var t=e;this.quantize=t,this.iteration_loop=function(e,t,n,r){var s,i=e.internal_flags,o=ze(se.SFBMAX),a=ze(576),l=Ue(2),c=0,u=i.l3_side,h=new qe(c);this.quantize.rv.ResvFrameBegin(e,h),c=h.bits;for(var f=0;f<i.mode_gr;f++){s=this.quantize.qupvt.on_pe(e,t,l,c,f,f),i.mode_ext==L.MPG_MD_MS_LR&&(this.quantize.ms_convert(i.l3_side,f),this.quantize.qupvt.reduce_side(l,n[f],c,s));for(var d=0;d<i.channels_out;d++){var p,_,m=u.tt[f][d];m.block_type!=L.SHORT_TYPE?(p=0,_=i.PSY.mask_adjust-p):(p=0,_=i.PSY.mask_adjust_short-p),i.masking_lower=Math.pow(10,.1*_),this.quantize.init_outer_loop(i,m),this.quantize.init_xrpow(i,m,a)&&(this.quantize.qupvt.calc_xmin(e,r[f][d],m,o),this.quantize.outer_loop(e,m,o,a,d,l[d])),this.quantize.iteration_finish_one(i,f,d),Xe(m.part2_3_length<=Ie.MAX_BITS_PER_CHANNEL),Xe(m.part2_3_length<=l[d])}}this.quantize.rv.ResvFrameEnd(i,c)}}var Ke=Ye;function Ge(e,t,n,r){this.xlen=e,this.linmax=t,this.table=n,this.hlen=r}var We={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};We.ht=[new Ge(0,0,null,null),new Ge(2,0,We.t1HB,We.t1l),new Ge(3,0,We.t2HB,We.t2l),new Ge(3,0,We.t3HB,We.t3l),new Ge(0,0,null,null),new Ge(4,0,We.t5HB,We.t5l),new Ge(4,0,We.t6HB,We.t6l),new Ge(6,0,We.t7HB,We.t7l),new Ge(6,0,We.t8HB,We.t8l),new Ge(6,0,We.t9HB,We.t9l),new Ge(8,0,We.t10HB,We.t10l),new Ge(8,0,We.t11HB,We.t11l),new Ge(8,0,We.t12HB,We.t12l),new Ge(16,0,We.t13HB,We.t13l),new Ge(0,0,null,We.t16_5l),new Ge(16,0,We.t15HB,We.t15l),new Ge(1,1,We.t16HB,We.t16l),new Ge(2,3,We.t16HB,We.t16l),new Ge(3,7,We.t16HB,We.t16l),new Ge(4,15,We.t16HB,We.t16l),new Ge(6,63,We.t16HB,We.t16l),new Ge(8,255,We.t16HB,We.t16l),new Ge(10,1023,We.t16HB,We.t16l),new Ge(13,8191,We.t16HB,We.t16l),new Ge(4,15,We.t24HB,We.t24l),new Ge(5,31,We.t24HB,We.t24l),new Ge(6,63,We.t24HB,We.t24l),new Ge(7,127,We.t24HB,We.t24l),new Ge(8,255,We.t24HB,We.t24l),new Ge(9,511,We.t24HB,We.t24l),new Ge(11,2047,We.t24HB,We.t24l),new Ge(13,8191,We.t24HB,We.t24l),new Ge(0,0,We.t32HB,We.t32l),new Ge(0,0,We.t33HB,We.t33l)],We.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],We.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],We.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],We.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],We.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],We.scfsi_band=[0,6,11,16,21];var Ze=We,Qe=_.VbrMode,Je=_.Float,et=_.Util,tt=_.new_float,nt=_.new_int,rt=_.assert;function st(){var e=null,t=null,n=null;function r(e){return u[e+st.Q_MAX2]}this.setModules=function(r,s,i){e=r,t=s,n=i},this.IPOW20=function(e){return h[e]};var s=2220446049250313e-31,i=st.IXMAX_VAL+2,o=st.Q_MAX,a=st.Q_MAX2,l=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var c=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=c,this.sfBandIndex=[new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new _e([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var u=tt(o+a+1),h=tt(o),f=tt(i),d=tt(i);function p(e,t){var r=n.ATHformula(t,e);return r-=l,r=Math.pow(10,r/10+e.ATHlower)}function _(e){for(var t=e.internal_flags.ATH.l,n=e.internal_flags.ATH.psfb21,r=e.internal_flags.ATH.s,s=e.internal_flags.ATH.psfb12,i=e.internal_flags,o=e.out_samplerate,a=0;a<L.SBMAX_l;a++){var l=i.scalefac_band.l[a],c=i.scalefac_band.l[a+1];t[a]=Je.MAX_VALUE;for(var u=l;u<c;u++){var h=p(e,u*o/1152);t[a]=Math.min(t[a],h)}}for(a=0;a<L.PSFB21;a++)for(l=i.scalefac_band.psfb21[a],c=i.scalefac_band.psfb21[a+1],n[a]=Je.MAX_VALUE,u=l;u<c;u++)h=p(e,u*o/1152),n[a]=Math.min(n[a],h);for(a=0;a<L.SBMAX_s;a++){for(l=i.scalefac_band.s[a],c=i.scalefac_band.s[a+1],r[a]=Je.MAX_VALUE,u=l;u<c;u++)h=p(e,u*o/384),r[a]=Math.min(r[a],h);r[a]*=i.scalefac_band.s[a+1]-i.scalefac_band.s[a]}for(a=0;a<L.PSFB12;a++){for(l=i.scalefac_band.psfb12[a],c=i.scalefac_band.psfb12[a+1],s[a]=Je.MAX_VALUE,u=l;u<c;u++)h=p(e,u*o/384),s[a]=Math.min(s[a],h);s[a]*=i.scalefac_band.s[13]-i.scalefac_band.s[12]}if(e.noATH){for(a=0;a<L.SBMAX_l;a++)t[a]=1e-20;for(a=0;a<L.PSFB21;a++)n[a]=1e-20;for(a=0;a<L.SBMAX_s;a++)r[a]=1e-20;for(a=0;a<L.PSFB12;a++)s[a]=1e-20}i.ATH.floor=10*Math.log10(p(e,-1))}function m(e){this.s=e}this.adj43=d,this.iteration_init=function(t){var n,r=t.internal_flags,s=r.l3_side;if(0==r.iteration_init_init){for(r.iteration_init_init=1,s.main_data_begin=0,_(t),f[0]=0,n=1;n<i;n++)f[n]=Math.pow(n,4/3);for(n=0;n<i-1;n++)d[n]=n+1-Math.pow(.5*(f[n]+f[n+1]),.75);for(d[n]=.5,n=0;n<o;n++)h[n]=Math.pow(2,-.1875*(n-210));for(n=0;n<=o+a;n++)u[n]=Math.pow(2,.25*(n-210-a));var l,c,p,m;for(e.huffman_init(r),(n=t.exp_nspsytune>>2&63)>=32&&(n-=64),l=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>8&63)>=32&&(n-=64),c=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>14&63)>=32&&(n-=64),p=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>20&63)>=32&&(n-=64),m=p*Math.pow(10,n/4/10),n=0;n<L.SBMAX_l;n++)g=n<=6?l:n<=13?c:n<=20?p:m,r.nsPsy.longfact[n]=g;for(n=0;n<L.SBMAX_s;n++){var g;g=n<=5?l:n<=10?c:n<=11?p:m,r.nsPsy.shortfact[n]=g}}},this.on_pe=function(e,n,r,s,i,o){var a,l,c=e.internal_flags,u=0,h=nt(2),f=new qe(u),d=t.ResvMaxBits(e,s,f,o),p=(u=f.bits)+d;for(p>Ie.MAX_BITS_PER_GRANULE&&(p=Ie.MAX_BITS_PER_GRANULE),a=0,l=0;l<c.channels_out;++l)r[l]=Math.min(Ie.MAX_BITS_PER_CHANNEL,u/c.channels_out),h[l]=0|r[l]*n[i][l]/700-r[l],h[l]>3*s/4&&(h[l]=3*s/4),h[l]<0&&(h[l]=0),h[l]+r[l]>Ie.MAX_BITS_PER_CHANNEL&&(h[l]=Math.max(0,Ie.MAX_BITS_PER_CHANNEL-r[l])),a+=h[l];if(a>d)for(l=0;l<c.channels_out;++l)h[l]=d*h[l]/a;for(l=0;l<c.channels_out;++l)r[l]+=h[l],d-=h[l];for(a=0,l=0;l<c.channels_out;++l)a+=r[l];if(a>Ie.MAX_BITS_PER_GRANULE)for(l=0;l<c.channels_out;++l)r[l]*=Ie.MAX_BITS_PER_GRANULE,r[l]/=a,r[l];return p},this.reduce_side=function(e,t,n,r){rt(e[0]+e[1]<=Ie.MAX_BITS_PER_GRANULE);var s=.33*(.5-t)/.5;s<0&&(s=0),s>.5&&(s=.5);var i=0|.5*s*(e[0]+e[1]);i>Ie.MAX_BITS_PER_CHANNEL-e[0]&&(i=Ie.MAX_BITS_PER_CHANNEL-e[0]),i<0&&(i=0),e[1]>=125&&(e[1]-i>125?(e[0]<n&&(e[0]+=i),e[1]-=i):(e[0]+=e[1]-125,e[1]=125)),(i=e[0]+e[1])>r&&(e[0]=r*e[0]/i,e[1]=r*e[1]/i),rt(e[0]<=Ie.MAX_BITS_PER_CHANNEL),rt(e[1]<=Ie.MAX_BITS_PER_CHANNEL),rt(e[0]+e[1]<=Ie.MAX_BITS_PER_GRANULE)},this.athAdjust=function(e,t,n){var r=90.30873362,s=94.82444863,i=et.FAST_LOG10_X(t,10),o=e*e,a=0;return i-=n,o>1e-20&&(a=1+et.FAST_LOG10_X(o,10/r)),a<0&&(a=0),i*=a,i+=n+r-s,Math.pow(10,.1*i)},this.calc_xmin=function(e,t,n,r){var i,o=0,a=e.internal_flags,l=0,c=0,u=a.ATH,h=n.xr,f=e.VBR==Qe.vbr_mtrh?1:0,d=a.masking_lower;for(e.VBR!=Qe.vbr_mtrh&&e.VBR!=Qe.vbr_mt||(d=1),i=0;i<n.psy_lmax;i++){w=(y=e.VBR==Qe.vbr_rh||e.VBR==Qe.vbr_mtrh?athAdjust(u.adjust,u.l[i],u.floor):u.adjust*u.l[i])/(g=n.width[i]),k=s,T=g>>1,A=0;do{A+=R=h[l]*h[l],k+=R<w?R:w,A+=E=h[++l]*h[l],k+=E<w?E:w,l++}while(--T>0);A>y&&c++,i==L.SBPSY_l&&k<(S=y*a.nsPsy.longfact[i])&&(k=S),0!=f&&(y=k),e.ATHonly||(x=t.en.l[i])>0&&(S=A*t.thm.l[i]*d/x,0!=f&&(S*=a.nsPsy.longfact[i]),y<S&&(y=S)),r[o++]=0!=f?y:y*a.nsPsy.longfact[i]}var p=575;if(n.block_type!=L.SHORT_TYPE)for(var _=576;0!=_--&&bn.EQ(h[_],0);)p=_;n.max_nonzero_coeff=p;for(var m=n.sfb_smin;i<n.psymax;m++,i+=3){var g,b,v;for(v=e.VBR==Qe.vbr_rh||e.VBR==Qe.vbr_mtrh?athAdjust(u.adjust,u.s[m],u.floor):u.adjust*u.s[m],g=n.width[i],b=0;b<3;b++){var y,w,k,x,S,A=0,T=g>>1;w=v/g,k=s;do{var R,E;A+=R=h[l]*h[l],k+=R<w?R:w,A+=E=h[++l]*h[l],k+=E<w?E:w,l++}while(--T>0);A>v&&c++,m==L.SBPSY_s&&k<(S=v*a.nsPsy.shortfact[m])&&(k=S),y=0!=f?k:v,e.ATHonly||e.ATHshort||(x=t.en.s[m][b])>0&&(S=A*t.thm.s[m][b]*d/x,0!=f&&(S*=a.nsPsy.shortfact[m]),y<S&&(y=S)),r[o++]=0!=f?y:y*a.nsPsy.shortfact[m]}e.useTemporal&&(r[o-3]>r[o-3+1]&&(r[o-3+1]+=(r[o-3]-r[o-3+1])*a.decay),r[o-3+1]>r[o-3+2]&&(r[o-3+2]+=(r[o-3+1]-r[o-3+2])*a.decay))}return c},this.calc_noise_core=function(e,t,n,r){var s=0,i=t.s,o=e.l3_enc;if(i>e.count1)for(;0!=n--;)l=e.xr[i],i++,s+=l*l,l=e.xr[i],i++,s+=l*l;else if(i>e.big_values){var a=tt(2);for(a[0]=0,a[1]=r;0!=n--;)l=Math.abs(e.xr[i])-a[o[i]],i++,s+=l*l,l=Math.abs(e.xr[i])-a[o[i]],i++,s+=l*l}else for(;0!=n--;){var l;l=Math.abs(e.xr[i])-f[o[i]]*r,i++,s+=l*l,l=Math.abs(e.xr[i])-f[o[i]]*r,i++,s+=l*l}return t.s=i,s},this.calc_noise=function(e,t,n,s,i){var o,a,l=0,u=0,h=0,f=0,d=0,p=-20,_=0,g=e.scalefac,b=0;for(s.over_SSD=0,o=0;o<e.psymax;o++){var v,y=e.global_gain-(g[b++]+(0!=e.preflag?c[o]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[o]],w=0;if(null!=i&&i.step[o]==y)w=i.noise[o],_+=e.width[o],n[l++]=w/t[u++],w=i.noise_log[o];else{var k,x=r(y);a=e.width[o]>>1,_+e.width[o]>e.max_nonzero_coeff&&(a=(k=e.max_nonzero_coeff-_+1)>0?k>>1:0);var S=new m(_);w=this.calc_noise_core(e,S,a,x),_=S.s,null!=i&&(i.step[o]=y,i.noise[o]=w),w=n[l++]=w/t[u++],w=et.FAST_LOG10(Math.max(w,1e-20)),null!=i&&(i.noise_log[o]=w)}null!=i&&(i.global_gain=e.global_gain),d+=w,w>0&&(v=Math.max(0|10*w+.5,1),s.over_SSD+=v*v,h++,f+=w),p=Math.max(p,w)}return s.over_count=h,s.tot_noise=d,s.over_noise=f,s.max_noise=p,h},this.set_pinfo=function(e,t,n,r,s){var i,o,a,l,u,h=e.internal_flags,f=0==t.scalefac_scale?.5:1,d=t.scalefac,p=tt(L3Side.SFBMAX),_=tt(L3Side.SFBMAX),m=new CalcNoiseResult;calc_xmin(e,n,t,p),calc_noise(t,p,_,m,null);var g=0;for(o=t.sfb_lmax,t.block_type!=L.SHORT_TYPE&&0==t.mixed_block_flag&&(o=22),i=0;i<o;i++){var b=h.scalefac_band.l[i],v=(y=h.scalefac_band.l[i+1])-b;for(l=0;g<y;g++)l+=t.xr[g]*t.xr[g];l/=v,u=1e15,h.pinfo.en[r][s][i]=u*l,h.pinfo.xfsf[r][s][i]=u*p[i]*_[i]/v,n.en.l[i]>0&&!e.ATHonly?l/=n.en.l[i]:l=0,h.pinfo.thr[r][s][i]=u*Math.max(l*n.thm.l[i],h.ATH.l[i]),h.pinfo.LAMEsfb[r][s][i]=0,0!=t.preflag&&i>=11&&(h.pinfo.LAMEsfb[r][s][i]=-f*c[i]),i<L.SBPSY_l&&(rt(d[i]>=0),h.pinfo.LAMEsfb[r][s][i]-=f*d[i])}if(t.block_type==L.SHORT_TYPE)for(o=i,i=t.sfb_smin;i<L.SBMAX_s;i++){b=h.scalefac_band.s[i],v=(y=h.scalefac_band.s[i+1])-b;for(var y,w=0;w<3;w++){for(l=0,a=b;a<y;a++)l+=t.xr[g]*t.xr[g],g++;l=Math.max(l/v,1e-20),u=1e15,h.pinfo.en_s[r][s][3*i+w]=u*l,h.pinfo.xfsf_s[r][s][3*i+w]=u*p[o]*_[o]/v,n.en.s[i][w]>0?l/=n.en.s[i][w]:l=0,(e.ATHonly||e.ATHshort)&&(l=0),h.pinfo.thr_s[r][s][3*i+w]=u*Math.max(l*n.thm.s[i][w],h.ATH.s[i]),h.pinfo.LAMEsfb_s[r][s][3*i+w]=-2*t.subblock_gain[w],i<L.SBPSY_s&&(h.pinfo.LAMEsfb_s[r][s][3*i+w]-=f*d[o]),o++}}h.pinfo.LAMEqss[r][s]=t.global_gain,h.pinfo.LAMEmainbits[r][s]=t.part2_3_length+t.part2_length,h.pinfo.LAMEsfbits[r][s]=t.part2_length,h.pinfo.over[r][s]=m.over_count,h.pinfo.max_noise[r][s]=10*m.max_noise,h.pinfo.over_noise[r][s]=10*m.over_noise,h.pinfo.tot_noise[r][s]=10*m.tot_noise,h.pinfo.over_SSD[r][s]=m.over_SSD}}st.Q_MAX=257,st.Q_MAX2=116,st.LARGE_BITS=1e5,st.IXMAX_VAL=8206;var it=st,ot=_.System,at=_.Arrays,lt=_.new_int,ct=_.assert;function ut(){var e=null;function t(e){this.bits=0|e}this.qupvt=null,this.setModules=function(t){this.qupvt=t,e=t};var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r(e,t,n,r,s,i){var o=.5946/t;for(e>>=1;0!=e--;)s[i++]=o>n[r++]?0:1,s[i++]=o>n[r++]?0:1}function s(t,n,r,s,i,o){var a=(t>>=1)%2;for(t>>=1;0!=t--;){var l,c,u,h,f,d,p,_;l=r[s++]*n,c=r[s++]*n,f=0|l,u=r[s++]*n,d=0|c,h=r[s++]*n,p=0|u,l+=e.adj43[f],_=0|h,c+=e.adj43[d],i[o++]=0|l,u+=e.adj43[p],i[o++]=0|c,h+=e.adj43[_],i[o++]=0|u,i[o++]=0|h}0!=a&&(f=0|(l=r[s++]*n),d=0|(c=r[s++]*n),l+=e.adj43[f],c+=e.adj43[d],i[o++]=0|l,i[o++]=0|c)}function i(t,n,i,o,a){var l,c,u,h=0,f=0,d=0,p=0,_=n,m=0,g=_,b=0,v=t,y=0;for(u=null!=a&&o.global_gain==a.global_gain,c=o.block_type==L.SHORT_TYPE?38:21,l=0;l<=c;l++){var w=-1;if((u||o.block_type==L.NORM_TYPE)&&(w=o.global_gain-(o.scalefac[l]+(0!=o.preflag?e.pretab[l]:0)<<o.scalefac_scale+1)-8*o.subblock_gain[o.window[l]]),ct(o.width[l]>=0),u&&a.step[l]==w)0!=f&&(s(f,i,v,y,g,b),f=0),0!=d&&(r(d,i,v,y,g,b),d=0);else{var k,x=o.width[l];if(h+o.width[l]>o.max_nonzero_coeff&&(k=o.max_nonzero_coeff-h+1,at.fill(n,o.max_nonzero_coeff,576,0),(x=k)<0&&(x=0),l=c+1),0==f&&0==d&&(g=_,b=m,v=t,y=p),null!=a&&a.sfb_count1>0&&l>=a.sfb_count1&&a.step[l]>0&&w>=a.step[l]?(0!=f&&(s(f,i,v,y,g,b),f=0,g=_,b=m,v=t,y=p),d+=x):(0!=d&&(r(d,i,v,y,g,b),d=0,g=_,b=m,v=t,y=p),f+=x),x<=0){0!=d&&(r(d,i,v,y,g,b),d=0),0!=f&&(s(f,i,v,y,g,b),f=0);break}}l<=c&&(m+=o.width[l],p+=o.width[l],h+=o.width[l])}0!=f&&(s(f,i,v,y,g,b),f=0),0!=d&&(r(d,i,v,y,g,b),d=0)}function o(e,t,n){var r=0,s=0;do{var i=e[t++],o=e[t++];r<i&&(r=i),s<o&&(s=o)}while(t<n);return r<s&&(r=s),r}function a(e,t,n,r,s,i){var o,a=65536*Ze.ht[r].xlen+Ze.ht[s].xlen,l=0;do{var c=e[t++],u=e[t++];0!=c&&(c>14&&(c=15,l+=a),c*=16),0!=u&&(u>14&&(u=15,l+=a),c+=u),l+=Ze.largetbl[c]}while(t<n);return o=65535&l,(l>>=16)>o&&(l=o,r=s),i.bits+=l,r}function l(e,t,n,r){var s=0,i=Ze.ht[1].hlen;do{var o=2*e[t+0]+e[t+1];t+=2,s+=i[o]}while(t<n);return r.bits+=s,1}function c(e,t,n,r,s){var i,o,a=0,l=Ze.ht[r].xlen;o=2==r?Ze.table23:Ze.table56;do{var c=e[t+0]*l+e[t+1];t+=2,a+=o[c]}while(t<n);return i=65535&a,(a>>=16)>i&&(a=i,r++),s.bits+=a,r}function u(e,t,n,r,s){var i=0,o=0,a=0,l=Ze.ht[r].xlen,c=Ze.ht[r].hlen,u=Ze.ht[r+1].hlen,h=Ze.ht[r+2].hlen;do{var f=e[t+0]*l+e[t+1];t+=2,i+=c[f],o+=u[f],a+=h[f]}while(t<n);var d=r;return i>o&&(i=o,d++),i>a&&(i=a,d=r+2),s.bits+=i,d}var h=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function f(e,t,n,r){var s=o(e,t,n);switch(s){case 0:return s;case 1:return l(e,t,n,r);case 2:case 3:return c(e,t,n,h[s-1],r);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return u(e,t,n,h[s-1],r);default:if(s>it.IXMAX_VAL)return r.bits=it.LARGE_BITS,-1;var i,f;for(s-=15,i=24;i<32&&!(Ze.ht[i].linmax>=s);i++);for(f=i-8;f<24&&!(Ze.ht[f].linmax>=s);f++);return a(e,t,n,f,i,r)}}function d(e,n,r,s,i,o,a){for(var l=n.big_values,c=0;c<=22;c++)s[c]=it.LARGE_BITS;for(c=0;c<16;c++){var u=e.scalefac_band.l[c+1];if(u>=l)break;var h=0,d=new t(h),p=f(r,0,u,d);h=d.bits;for(var _=0;_<8;_++){var m=e.scalefac_band.l[c+_+2];if(m>=l)break;var g=h,b=f(r,u,m,d=new t(g));g=d.bits,s[c+_]>g&&(s[c+_]=g,i[c+_]=c,o[c+_]=p,a[c+_]=b)}}}function p(e,n,r,s,i,o,a,l){for(var c=n.big_values,u=2;u<L.SBMAX_l+1;u++){var h=e.scalefac_band.l[u];if(h>=c)break;var d=i[u-2]+n.count1bits;if(r.part2_3_length<=d)break;var p=new t(d),_=f(s,h,c,p);d=p.bits,r.part2_3_length<=d||(r.assign(n),r.part2_3_length=d,r.region0_count=o[u-2],r.region1_count=u-2-o[u-2],r.table_select[0]=a[u-2],r.table_select[1]=l[u-2],r.table_select[2]=_)}}this.noquant_count_bits=function(e,n,r){var s=n.l3_enc,i=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(null!=r&&(r.sfb_count1=0);i>1&&0==(s[i-1]|s[i-2]);i-=2);n.count1=i;for(var o=0,a=0;i>3;i-=4){var l;if((2147483647&(s[i-1]|s[i-2]|s[i-3]|s[i-4]))>1)break;l=2*(2*(2*s[i-4]+s[i-3])+s[i-2])+s[i-1],o+=Ze.t32l[l],a+=Ze.t33l[l]}var c=o;if(n.count1table_select=0,o>a&&(c=a,n.count1table_select=1),n.count1bits=c,n.big_values=i,0==i)return c;if(n.block_type==L.SHORT_TYPE)(o=3*e.scalefac_band.s[3])>n.big_values&&(o=n.big_values),a=n.big_values;else if(n.block_type==L.NORM_TYPE){if(o=n.region0_count=e.bv_scf[i-2],a=n.region1_count=e.bv_scf[i-1],a=e.scalefac_band.l[o+a+2],o=e.scalefac_band.l[o+1],a<i){var u=new t(c);n.table_select[2]=f(s,a,i,u),c=u.bits}}else n.region0_count=7,n.region1_count=L.SBMAX_l-1-7-1,(o=e.scalefac_band.l[8])>(a=i)&&(o=a);if(o=Math.min(o,i),a=Math.min(a,i),0<o&&(u=new t(c),n.table_select[0]=f(s,0,o,u),c=u.bits),o<a&&(u=new t(c),n.table_select[1]=f(s,o,a,u),c=u.bits),2==e.use_best_huffman&&(n.part2_3_length=c,best_huffman_divide(e,n),c=n.part2_3_length),null!=r&&n.block_type==L.NORM_TYPE){for(var h=0;e.scalefac_band.l[h]<n.big_values;)h++;r.sfb_count1=h}return c},this.count_bits=function(t,n,r,s){var o=r.l3_enc,a=it.IXMAX_VAL/e.IPOW20(r.global_gain);if(r.xrpow_max>a)return it.LARGE_BITS;if(i(n,o,e.IPOW20(r.global_gain),r,s),0!=(2&t.substep_shaping))for(var l=0,c=r.global_gain+r.scalefac_scale,u=.634521682242439/e.IPOW20(c),h=0;h<r.sfbmax;h++){var f,d=r.width[h];if(0==t.pseudohalf[h])l+=d;else for(f=l,l+=d;f<l;++f)o[f]=n[f]>=u?o[f]:0}return this.noquant_count_bits(t,r,s)},this.best_huffman_divide=function(e,n){var r=new le,s=n.l3_enc,i=lt(23),o=lt(23),a=lt(23),l=lt(23);if(n.block_type!=L.SHORT_TYPE||1!=e.mode_gr){r.assign(n),n.block_type==L.NORM_TYPE&&(d(e,n,s,i,o,a,l),p(e,r,n,s,i,o,a,l));var c=r.big_values;if(!(0==c||(s[c-2]|s[c-1])>1||(c=n.count1+2)>576)){r.assign(n),r.count1=c;for(var u=0,h=0;c>r.big_values;c-=4){var _=2*(2*(2*s[c-4]+s[c-3])+s[c-2])+s[c-1];u+=Ze.t32l[_],h+=Ze.t33l[_]}if(r.big_values=c,r.count1table_select=0,u>h&&(u=h,r.count1table_select=1),r.count1bits=u,r.block_type==L.NORM_TYPE)p(e,r,n,s,i,o,a,l);else{if(r.part2_3_length=u,(u=e.scalefac_band.l[8])>c&&(u=c),u>0){var m=new t(r.part2_3_length);r.table_select[0]=f(s,0,u,m),r.part2_3_length=m.bits}c>u&&(m=new t(r.part2_3_length),r.table_select[1]=f(s,u,c,m),r.part2_3_length=m.bits),n.part2_3_length>r.part2_3_length&&n.assign(r)}}}};var _=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],m=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],g=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],b=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];function v(e,t){for(var n,r=t.tt[1][e],s=t.tt[0][e],i=0;i<Ze.scfsi_band.length-1;i++){for(n=Ze.scfsi_band[i];n<Ze.scfsi_band[i+1]&&!(s.scalefac[n]!=r.scalefac[n]&&r.scalefac[n]>=0);n++);if(n==Ze.scfsi_band[i+1]){for(n=Ze.scfsi_band[i];n<Ze.scfsi_band[i+1];n++)r.scalefac[n]=-1;t.scfsi[e][i]=1}}var o=0,a=0;for(n=0;n<11;n++)-1!=r.scalefac[n]&&(a++,o<r.scalefac[n]&&(o=r.scalefac[n]));for(var l=0,c=0;n<L.SBPSY_l;n++)-1!=r.scalefac[n]&&(c++,l<r.scalefac[n]&&(l=r.scalefac[n]));for(i=0;i<16;i++)if(o<_[i]&&l<m[i]){var u=g[i]*a+b[i]*c;r.part2_length>u&&(r.part2_length=u,r.scalefac_compress=i)}}function y(e,t){for(var n=0;n<t;++n)if(e[n]<0)return!1;return!0}ut.slen1_tab=g,ut.slen2_tab=b,this.best_scalefac_store=function(t,n,r,s){var i,o,a,l,c=s.tt[n][r],u=0;for(a=0,i=0;i<c.sfbmax;i++){var h=c.width[i];for(a+=h,l=-h;l<0&&0==c.l3_enc[l+a];l++);0==l&&(c.scalefac[i]=u=-2)}if(0==c.scalefac_scale&&0==c.preflag){var f=0;for(i=0;i<c.sfbmax;i++)c.scalefac[i]>0&&(f|=c.scalefac[i]);if(0==(1&f)&&0!=f){for(i=0;i<c.sfbmax;i++)c.scalefac[i]>0&&(c.scalefac[i]>>=1);c.scalefac_scale=u=1}}if(0==c.preflag&&c.block_type!=L.SHORT_TYPE&&2==t.mode_gr){for(i=11;i<L.SBPSY_l&&!(c.scalefac[i]<e.pretab[i]&&-2!=c.scalefac[i]);i++);if(i==L.SBPSY_l){for(i=11;i<L.SBPSY_l;i++)c.scalefac[i]>0&&(c.scalefac[i]-=e.pretab[i]);c.preflag=u=1}}for(o=0;o<4;o++)s.scfsi[r][o]=0;for(2==t.mode_gr&&1==n&&s.tt[0][r].block_type!=L.SHORT_TYPE&&s.tt[1][r].block_type!=L.SHORT_TYPE&&(v(r,s),u=0),i=0;i<c.sfbmax;i++)-2==c.scalefac[i]&&(c.scalefac[i]=0);0!=u&&(2==t.mode_gr?this.scale_bitcount(c):this.scale_bitcount_lsf(t,c))};var w=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],k=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],x=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(t){var n,r,s,i=0,o=0,a=t.scalefac;if(ct(y(a,t.sfbmax)),t.block_type==L.SHORT_TYPE)s=w,0!=t.mixed_block_flag&&(s=k);else if(s=x,0==t.preflag){for(r=11;r<L.SBPSY_l&&!(a[r]<e.pretab[r]);r++);if(r==L.SBPSY_l)for(t.preflag=1,r=11;r<L.SBPSY_l;r++)a[r]-=e.pretab[r]}for(r=0;r<t.sfbdivide;r++)i<a[r]&&(i=a[r]);for(;r<t.sfbmax;r++)o<a[r]&&(o=a[r]);for(t.part2_length=it.LARGE_BITS,n=0;n<16;n++)i<_[n]&&o<m[n]&&t.part2_length>s[n]&&(t.part2_length=s[n],t.scalefac_compress=n);return t.part2_length==it.LARGE_BITS};var S=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(t,n){var r,s,i,o,a,l,c,u,h=lt(4),f=n.scalefac;for(r=0!=n.preflag?2:0,c=0;c<4;c++)h[c]=0;if(n.block_type==L.SHORT_TYPE){s=1;var d=e.nr_of_sfb_block[r][s];for(u=0,i=0;i<4;i++)for(o=d[i]/3,c=0;c<o;c++,u++)for(a=0;a<3;a++)f[3*u+a]>h[i]&&(h[i]=f[3*u+a])}else for(s=0,d=e.nr_of_sfb_block[r][s],u=0,i=0;i<4;i++)for(o=d[i],c=0;c<o;c++,u++)f[u]>h[i]&&(h[i]=f[u]);for(l=!1,i=0;i<4;i++)h[i]>S[r][i]&&(l=!0);if(!l){var p,_,m,g;for(n.sfb_partition_table=e.nr_of_sfb_block[r][s],i=0;i<4;i++)n.slen[i]=A[h[i]];switch(p=n.slen[0],_=n.slen[1],m=n.slen[2],g=n.slen[3],r){case 0:n.scalefac_compress=(5*p+_<<4)+(m<<2)+g;break;case 1:n.scalefac_compress=400+(5*p+_<<2)+m;break;case 2:n.scalefac_compress=500+3*p+_;break;default:ot.err.printf("intensity stereo not implemented yet\n")}}if(!l)for(ct(null!=n.sfb_partition_table),n.part2_length=0,i=0;i<4;i++)n.part2_length+=n.slen[i]*n.sfb_partition_table[i];return l};var A=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var r,s=0;e.scalefac_band.l[++s]<t;);for(r=n[s][0];e.scalefac_band.l[r+1]>t;)r--;for(r<0&&(r=n[s][0]),e.bv_scf[t-2]=r,r=n[s][1];e.scalefac_band.l[r+e.bv_scf[t-2]+2]>t;)r--;r<0&&(r=n[s][1]),e.bv_scf[t-1]=r}}}var ht=ut,ft=_.System,dt=_.Arrays,pt=_.new_byte,_t=_.new_float_n,mt=_.new_int,gt=_.assert;function bt(){var e=this,t=32773,n=null,r=null,s=null,i=null;this.setModules=function(e,t,o,a){n=e,r=t,s=o,i=a};var o=null,a=0,l=0,c=0;function u(e){ft.arraycopy(e.header[e.w_ptr].buf,0,o,l,e.sideinfo_len),l+=e.sideinfo_len,a+=8*e.sideinfo_len,e.w_ptr=e.w_ptr+1&Ie.MAX_HEADER_BUF-1}function h(e,t,n){for(;n>0;){var r;0==c&&(c=8,l++,gt(e.header[e.w_ptr].write_timing>=a),e.header[e.w_ptr].write_timing==a&&u(e),o[l]=0),n-=r=Math.min(n,c),c-=r,o[l]|=t>>n<<c,a+=r}}function f(e,t,n){for(;n>0;){var r;0==c&&(c=8,l++,o[l]=0),n-=r=Math.min(n,c),c-=r,o[l]|=t>>n<<c,a+=r}}function d(e,t){var n,r=e.internal_flags;if(t>=8&&(h(r,76,8),t-=8),t>=8&&(h(r,65,8),t-=8),t>=8&&(h(r,77,8),t-=8),t>=8&&(h(r,69,8),t-=8),t>=32){var i=s.getLameShortVersion();if(t>=32)for(n=0;n<i.length&&t>=8;++n)t-=8,h(r,i.charAt(n),8)}for(;t>=1;t-=1)h(r,r.ancillary_flag,1),r.ancillary_flag^=e.disable_reservoir?0:1}function p(e,t,n){for(var r=e.header[e.h_ptr].ptr;n>0;){var s=Math.min(n,8-(7&r));n-=s,e.header[e.h_ptr].buf[r>>3]|=t>>n<<8-(7&r)-s,r+=s}e.header[e.h_ptr].ptr=r}function _(e,n){e<<=8;for(var r=0;r<8;r++)0!=(65536&((n<<=1)^(e<<=1)))&&(n^=t);return n}function m(e,t){var n,r,s,i=e.internal_flags;if(n=i.l3_side,i.header[i.h_ptr].ptr=0,dt.fill(i.header[i.h_ptr].buf,0,i.sideinfo_len,0),e.out_samplerate<16e3?p(i,4094,12):p(i,4095,12),p(i,e.version,1),p(i,1,2),p(i,e.error_protection?0:1,1),p(i,i.bitrate_index,4),p(i,i.samplerate_index,2),p(i,i.padding,1),p(i,e.extension,1),p(i,e.mode.ordinal(),2),p(i,i.mode_ext,2),p(i,e.copyright,1),p(i,e.original,1),p(i,e.emphasis,2),e.error_protection&&p(i,0,16),1==e.version){for(gt(n.main_data_begin>=0),p(i,n.main_data_begin,9),2==i.channels_out?p(i,n.private_bits,3):p(i,n.private_bits,5),s=0;s<i.channels_out;s++){var o;for(o=0;o<4;o++)p(i,n.scfsi[s][o],1)}for(r=0;r<2;r++)for(s=0;s<i.channels_out;s++)p(i,(a=n.tt[r][s]).part2_3_length+a.part2_length,12),p(i,a.big_values/2,9),p(i,a.global_gain,8),p(i,a.scalefac_compress,4),a.block_type!=L.NORM_TYPE?(p(i,1,1),p(i,a.block_type,2),p(i,a.mixed_block_flag,1),14==a.table_select[0]&&(a.table_select[0]=16),p(i,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),p(i,a.table_select[1],5),p(i,a.subblock_gain[0],3),p(i,a.subblock_gain[1],3),p(i,a.subblock_gain[2],3)):(p(i,0,1),14==a.table_select[0]&&(a.table_select[0]=16),p(i,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),p(i,a.table_select[1],5),14==a.table_select[2]&&(a.table_select[2]=16),p(i,a.table_select[2],5),gt(0<=a.region0_count&&a.region0_count<16),gt(0<=a.region1_count&&a.region1_count<8),p(i,a.region0_count,4),p(i,a.region1_count,3)),p(i,a.preflag,1),p(i,a.scalefac_scale,1),p(i,a.count1table_select,1)}else for(gt(n.main_data_begin>=0),p(i,n.main_data_begin,8),p(i,n.private_bits,i.channels_out),r=0,s=0;s<i.channels_out;s++){var a;p(i,(a=n.tt[r][s]).part2_3_length+a.part2_length,12),p(i,a.big_values/2,9),p(i,a.global_gain,8),p(i,a.scalefac_compress,9),a.block_type!=L.NORM_TYPE?(p(i,1,1),p(i,a.block_type,2),p(i,a.mixed_block_flag,1),14==a.table_select[0]&&(a.table_select[0]=16),p(i,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),p(i,a.table_select[1],5),p(i,a.subblock_gain[0],3),p(i,a.subblock_gain[1],3),p(i,a.subblock_gain[2],3)):(p(i,0,1),14==a.table_select[0]&&(a.table_select[0]=16),p(i,a.table_select[0],5),14==a.table_select[1]&&(a.table_select[1]=16),p(i,a.table_select[1],5),14==a.table_select[2]&&(a.table_select[2]=16),p(i,a.table_select[2],5),gt(0<=a.region0_count&&a.region0_count<16),gt(0<=a.region1_count&&a.region1_count<8),p(i,a.region0_count,4),p(i,a.region1_count,3)),p(i,a.scalefac_scale,1),p(i,a.count1table_select,1)}e.error_protection&&CRC_writeheader(i,i.header[i.h_ptr].buf);var l=i.h_ptr;gt(i.header[l].ptr==8*i.sideinfo_len),i.h_ptr=l+1&Ie.MAX_HEADER_BUF-1,i.header[i.h_ptr].write_timing=i.header[l].write_timing+t,i.h_ptr==i.w_ptr&&ft.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}function g(e,t){var n,r=Ze.ht[t.count1table_select+32],s=0,i=t.big_values,o=t.big_values;for(gt(t.count1table_select<2),n=(t.count1-t.big_values)/4;n>0;--n){var a=0,l=0;0!=t.l3_enc[i+0]&&(l+=8,t.xr[o+0]<0&&a++),0!=t.l3_enc[i+1]&&(l+=4,a*=2,t.xr[o+1]<0&&a++),0!=t.l3_enc[i+2]&&(l+=2,a*=2,t.xr[o+2]<0&&a++),0!=t.l3_enc[i+3]&&(l++,a*=2,t.xr[o+3]<0&&a++),i+=4,o+=4,h(e,a+r.table[l],r.hlen[l]),s+=r.hlen[l]}return s}function b(e,t,n,r,s){var i=Ze.ht[t],o=0;if(0==t)return o;for(var a=n;a<r;a+=2){var l=0,c=0,u=i.xlen,f=i.xlen,d=0,p=s.l3_enc[a],_=s.l3_enc[a+1];if(0!=p&&(s.xr[a]<0&&d++,l--),t>15){if(p>14){var m=p-15;gt(m<=i.linmax),d|=m<<1,c=u,p=15}if(_>14){var g=_-15;gt(g<=i.linmax),d<<=u,d|=g,c+=u,_=15}f=16}0!=_&&(d<<=1,s.xr[a+1]<0&&d++,l--),p=p*f+_,c-=l,l+=i.hlen[p],h(e,i.table[p],l),h(e,d,c),o+=l+c}return o}function v(e,t){var n=3*e.scalefac_band.s[3];n>t.big_values&&(n=t.big_values);var r=b(e,t.table_select[0],0,n,t);return r+=b(e,t.table_select[1],n,t.big_values,t)}function y(e,t){var n,r,s,i;n=t.big_values;var o=t.region0_count+1;return gt(o<e.scalefac_band.l.length),s=e.scalefac_band.l[o],o+=t.region1_count+1,gt(o<e.scalefac_band.l.length),s>n&&(s=n),(i=e.scalefac_band.l[o])>n&&(i=n),r=b(e,t.table_select[0],0,s,t),r+=b(e,t.table_select[1],s,i,t),r+=b(e,t.table_select[2],i,n,t)}function w(e){var t,n,r,s,i=0,o=e.internal_flags,a=o.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<o.channels_out;n++){var l=a.tt[t][n],c=ht.slen1_tab[l.scalefac_compress],u=ht.slen2_tab[l.scalefac_compress];for(s=0,r=0;r<l.sfbdivide;r++)-1!=l.scalefac[r]&&(h(o,l.scalefac[r],c),s+=c);for(;r<l.sfbmax;r++)-1!=l.scalefac[r]&&(h(o,l.scalefac[r],u),s+=u);gt(s==l.part2_length),l.block_type==L.SHORT_TYPE?s+=v(o,l):s+=y(o,l),s+=g(o,l),gt(s==l.part2_3_length+l.part2_length),i+=s}else for(t=0,n=0;n<o.channels_out;n++){l=a.tt[t][n];var f,d,p=0;if(gt(null!=l.sfb_partition_table),s=0,r=0,d=0,l.block_type==L.SHORT_TYPE){for(;d<4;d++){var _=l.sfb_partition_table[d]/3,m=l.slen[d];for(f=0;f<_;f++,r++)h(o,Math.max(l.scalefac[3*r+0],0),m),h(o,Math.max(l.scalefac[3*r+1],0),m),h(o,Math.max(l.scalefac[3*r+2],0),m),p+=3*m}s+=v(o,l)}else{for(;d<4;d++)for(_=l.sfb_partition_table[d],m=l.slen[d],f=0;f<_;f++,r++)h(o,Math.max(l.scalefac[r],0),m),p+=m;s+=y(o,l)}s+=g(o,l),gt(s==l.part2_3_length),gt(p==l.part2_length),i+=p+s}return i}function k(){this.total=0}function x(t,n){var r,s,i,o,c,u=t.internal_flags;return c=u.w_ptr,-1==(o=u.h_ptr-1)&&(o=Ie.MAX_HEADER_BUF-1),r=u.header[o].write_timing-a,n.total=r,r>=0&&(s=1+o-c,o<c&&(s=1+o-c+Ie.MAX_HEADER_BUF),r-=8*s*u.sideinfo_len),r+=i=e.getframebits(t),n.total+=i,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=l+1,r<0&&ft.err.println("strange error flushing buffer ... \n"),r}this.getframebits=function(e){var t,n=e.internal_flags;return t=0!=n.bitrate_index?Ze.bitrate_table[e.version][n.bitrate_index]:e.brate,8*(0|72e3*(e.version+1)*t/e.out_samplerate+n.padding)},this.CRC_writeheader=function(e,t){var n=65535;n=_(255&t[2],n),n=_(255&t[3],n);for(var r=6;r<e.sideinfo_len;r++)n=_(255&t[r],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var t,r,s=e.internal_flags,i=s.h_ptr-1;if(-1==i&&(i=Ie.MAX_HEADER_BUF-1),t=s.l3_side,!((r=x(e,new k))<0)){if(d(e,r),gt(s.header[i].write_timing+this.getframebits(e)==a),s.ResvSize=0,t.main_data_begin=0,s.findReplayGain){var o=n.GetTitleGain(s.rgdata);gt(NEQ(o,fn.GAIN_NOT_ENOUGH_SAMPLES)),s.RadioGain=0|Math.floor(10*o+.5)}s.findPeakSample&&(s.noclipGainChange=0|Math.ceil(20*Math.log10(s.PeakSample/32767)*10),s.noclipGainChange>0&&(EQ(e.scale,1)||EQ(e.scale,0))?s.noclipScale=Math.floor(32767/s.PeakSample*100)/100:s.noclipScale=-1)}},this.add_dummy_byte=function(e,t,n){for(var r,s=e.internal_flags;n-- >0;)for(f(s,t,8),r=0;r<Ie.MAX_HEADER_BUF;++r)s.header[r].write_timing+=8},this.format_bitstream=function(e){var t,n=e.internal_flags;t=n.l3_side;var r=this.getframebits(e);d(e,t.resvDrain_pre),m(e,r);var s=8*n.sideinfo_len;if(s+=w(e),d(e,t.resvDrain_post),s+=t.resvDrain_post,t.main_data_begin+=(r-s)/8,x(e,new k)!=n.ResvSize&&ft.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*t.main_data_begin!=n.ResvSize&&(ft.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*t.main_data_begin,n.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*n.sideinfo_len,s-t.resvDrain_post-8*n.sideinfo_len,s,s%8,r),ft.err.println("This is a fatal error.  It has several possible causes:"),ft.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),ft.err.println(" 9%%  Your system is overclocked"),ft.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=8*t.main_data_begin),a>1e9){var i;for(i=0;i<Ie.MAX_HEADER_BUF;++i)n.header[i].write_timing-=a;a=0}return 0},this.copy_buffer=function(e,t,s,a,u){var h=l+1;if(h<=0)return 0;if(0!=a&&h>a)return-1;if(ft.arraycopy(o,0,t,s,h),l=-1,c=0,0!=u){var f=mt(1);if(f[0]=e.nMusicCRC,i.updateMusicCRC(f,t,s,h),e.nMusicCRC=f[0],h>0&&(e.VBR_seek_table.nBytesWritten+=h),e.decode_on_the_fly)for(var d,p=_t([2,1152]),_=h,m=-1;0!=m;)if(m=r.hip_decode1_unclipped(e.hip,t,s,_,p[0],p[1]),_=0,-1==m&&(m=0),m>0){if(e.findPeakSample){for(d=0;d<m;d++)p[0][d]>e.PeakSample?e.PeakSample=p[0][d]:-p[0][d]>e.PeakSample&&(e.PeakSample=-p[0][d]);if(e.channels_out>1)for(d=0;d<m;d++)p[1][d]>e.PeakSample?e.PeakSample=p[1][d]:-p[1][d]>e.PeakSample&&(e.PeakSample=-p[1][d])}if(e.findReplayGain&&n.AnalyzeSamples(e.rgdata,p[0],0,p[1],0,m,e.channels_out)==fn.GAIN_ANALYSIS_ERROR)return-6}}return h},this.init_bit_stream_w=function(e){o=pt(un.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,l=-1,c=0,a=0}}bt.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},bt.NEQ=function(e,t){return!bt.EQ(e,t)};var vt=bt,yt=_.System,wt=_.VbrMode,kt=_.ShortBlock,xt=_.new_float,St=_.new_int_n,At=_.new_short_n,Tt=_.assert;function Rt(){var e=this,t=131072;Rt.V9=410,Rt.V8=420,Rt.V7=430,Rt.V6=440,Rt.V5=450,Rt.V4=460,Rt.V3=470,Rt.V2=480,Rt.V1=490,Rt.V0=500,Rt.R3MIX=1e3,Rt.STANDARD=1001,Rt.EXTREME=1002,Rt.INSANE=1003,Rt.STANDARD_FAST=1004,Rt.EXTREME_FAST=1005,Rt.MEDIUM=1006,Rt.MEDIUM_FAST=1007;var n,r,s,i,o,a=16384+t;Rt.LAME_MAXMP3BUFFER=a;var l,c,u,h=new Q;function f(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=xt(L.SBMAX_l),this.bo_s_weight=xt(L.SBMAX_s)}function d(){this.lowerlimit=0}function p(e,t){this.lowpass=t}this.enc=new L,this.setModules=function(e,t,a,f,d,p,_,m,g){n=e,r=t,s=a,i=f,o=d,l=p,c=m,u=g,this.enc.setModules(r,h,i,l)};var _=4294479419;function m(e){var t;return e.class_id=_,t=e.internal_flags=new Ie,e.mode=gn.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=wt.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=L.ENCDELAY+L.POSTDELAY,e.encoder_padding=0,t.mf_size=L.ENCDELAY-L.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0,0}function g(e){return e>1?0:e<=0?1:Math.cos(Math.PI/2*e)}function b(e,t){var n=44100;return t>=48e3?n=48e3:t>=44100?n=44100:t>=32e3?n=32e3:t>=24e3?n=24e3:t>=22050?n=22050:t>=16e3?n=16e3:t>=12e3?n=12e3:t>=11025?n=11025:t>=8e3&&(n=8e3),-1==e?n:(e<=15960&&(n=44100),e<=15250&&(n=32e3),e<=11220&&(n=24e3),e<=9970&&(n=22050),e<=7230&&(n=16e3),e<=5420&&(n=12e3),e<=4510&&(n=11025),e<=3970&&(n=8e3),t<n?t>44100?48e3:t>32e3?44100:t>24e3?32e3:t>22050?24e3:t>16e3?22050:t>12e3?16e3:t>11025?12e3:t>8e3?11025:8e3:n)}function v(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1,1;case 32e3:return t.version=1,2;case 22050:case 11025:return t.version=0,0;case 24e3:case 12e3:return t.version=0,1;case 16e3:case 8e3:return t.version=0,2;default:return t.version=0,-1}}function y(e,t,n){n<16e3&&(t=2);for(var r=Ze.bitrate_table[t][1],s=2;s<=14;s++)Ze.bitrate_table[t][s]>0&&Math.abs(Ze.bitrate_table[t][s]-e)<Math.abs(r-e)&&(r=Ze.bitrate_table[t][s]);return r}function w(e,t,n){n<16e3&&(t=2);for(var r=0;r<=14;r++)if(Ze.bitrate_table[t][r]>0&&Ze.bitrate_table[t][r]==e)return r;return-1}function k(t,n){var r=[new p(8,2e3),new p(16,3700),new p(24,3900),new p(32,5500),new p(40,7e3),new p(48,7500),new p(56,1e4),new p(64,11e3),new p(80,13500),new p(96,15100),new p(112,15600),new p(128,17e3),new p(160,17500),new p(192,18600),new p(224,19400),new p(256,19700),new p(320,20500)],s=e.nearestBitrateFullIndex(n);t.lowerlimit=r[s].lowpass}function x(e){var t=e.internal_flags,n=32,r=-1;if(t.lowpass1>0){for(var s=999,i=0;i<=31;i++)(c=i/31)>=t.lowpass2&&(n=Math.min(n,i)),t.lowpass1<c&&c<t.lowpass2&&(s=Math.min(s,i));t.lowpass1=999==s?(n-.75)/31:(s-.75)/31,t.lowpass2=n/31}if(t.highpass2>0&&t.highpass2<.75/31*.9&&(t.highpass1=0,t.highpass2=0,yt.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),t.highpass2>0){var o=-1;for(i=0;i<=31;i++)(c=i/31)<=t.highpass1&&(r=Math.max(r,i)),t.highpass1<c&&c<t.highpass2&&(o=Math.max(o,i));t.highpass1=r/31,t.highpass2=-1==o?(r+.75)/31:(o+.75)/31}for(i=0;i<32;i++){var a,l,c=i/31;a=t.highpass2>t.highpass1?g((t.highpass2-c)/(t.highpass2-t.highpass1+1e-20)):1,l=t.lowpass2>t.lowpass1?g((c-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):1,t.amp_filter[i]=a*l}}function S(e){var t=e.internal_flags;switch(e.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}function A(e){var t=e.internal_flags;e.frameNum=0,e.write_id3tag_automatic&&c.id3tag_write_v2(e),t.bitrate_stereoMode_Hist=St([16,5]),t.bitrate_blockType_Hist=St([16,6]),t.PeakSample=0,e.bWriteVbrTag&&l.InitVbrTag(e)}function T(e,t){(null==e.in_buffer_0||e.in_buffer_nsamples<t)&&(e.in_buffer_0=xt(t),e.in_buffer_1=xt(t),e.in_buffer_nsamples=t)}function R(e){var t=L.BLKSIZE+e.framesize-L.FFTOFFSET;return t=Math.max(t,512+e.framesize-32)}function E(e,t,s,i,o,a,l){var c,u,h,f,d,p=e.internal_flags,m=0,g=[null,null],b=[null,null];if(p.Class_ID!=_)return-3;if(0==i)return 0;if((d=r.copy_buffer(p,o,a,l,0))<0)return d;if(a+=d,m+=d,b[0]=t,b[1]=s,vt.NEQ(e.scale,0)&&vt.NEQ(e.scale,1))for(u=0;u<i;++u)b[0][u]*=e.scale,2==p.channels_out&&(b[1][u]*=e.scale);if(vt.NEQ(e.scale_left,0)&&vt.NEQ(e.scale_left,1))for(u=0;u<i;++u)b[0][u]*=e.scale_left;if(vt.NEQ(e.scale_right,0)&&vt.NEQ(e.scale_right,1))for(u=0;u<i;++u)b[1][u]*=e.scale_right;if(2==e.num_channels&&1==p.channels_out)for(u=0;u<i;++u)b[0][u]=.5*(b[0][u]+b[1][u]),b[1][u]=0;f=R(e),g[0]=p.mfbuf[0],g[1]=p.mfbuf[1];for(var v=0;i>0;){var y=[null,null],w=0,k=0;y[0]=b[0],y[1]=b[1];var x=new I;if(P(e,g,y,v,i,x),w=x.n_in,k=x.n_out,p.findReplayGain&&!p.decode_on_the_fly&&n.AnalyzeSamples(p.rgdata,g[0],p.mf_size,g[1],p.mf_size,k,p.channels_out)==fn.GAIN_ANALYSIS_ERROR)return-6;if(i-=w,v+=w,p.channels_out,p.mf_size+=k,Tt(p.mf_size<=Ie.MFSIZE),p.mf_samples_to_encode<1&&(p.mf_samples_to_encode=L.ENCDELAY+L.POSTDELAY),p.mf_samples_to_encode+=k,p.mf_size>=f){var S=l-m;if(0==l&&(S=0),(c=$(e,g[0],g[1],o,a,S))<0)return c;for(a+=c,m+=c,p.mf_size-=e.framesize,p.mf_samples_to_encode-=e.framesize,h=0;h<p.channels_out;h++)for(u=0;u<p.mf_size;u++)g[h][u]=g[h][u+e.framesize]}}return m}function $(t,n,r,s,i,o){var a=e.enc.lame_encode_mp3_frame(t,n,r,s,i,o);return t.frameNum++,a}function I(){this.n_in=0,this.n_out=0}function M(){this.num_used=0}function B(e,t){return 0!=t?B(t,e%t):e}function C(e,t,n){var r=Math.PI*t;(e/=n)<0&&(e=0),e>1&&(e=1);var s=e-.5,i=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(s)<1e-9?r/Math.PI:i*Math.sin(n*r*s)/(Math.PI*n*s)}function O(e,t,n,r,s,i,o,a,l){var c,u,h=e.internal_flags,f=0,d=e.out_samplerate/B(e.out_samplerate,e.in_samplerate);d>Ie.BPC&&(d=Ie.BPC);var p=Math.abs(h.resample_ratio-Math.floor(.5+h.resample_ratio))<1e-4?1:0,_=1/h.resample_ratio;_>1&&(_=1);var m=31;0==m%2&&--m;var g=(m+=p)+1;if(0==h.fill_buffer_resample_init){for(h.inbuf_old[0]=xt(g),h.inbuf_old[1]=xt(g),c=0;c<=2*d;++c)h.blackfilt[c]=xt(g);for(h.itime[0]=0,h.itime[1]=0,f=0;f<=2*d;f++){var b=0,v=(f-d)/(2*d);for(c=0;c<=m;c++)b+=h.blackfilt[f][c]=C(c-v,_,m);for(c=0;c<=m;c++)h.blackfilt[f][c]/=b}h.fill_buffer_resample_init=1}var y=h.inbuf_old[l];for(u=0;u<r;u++){var w,k;if(w=u*h.resample_ratio,m+(f=0|Math.floor(w-h.itime[l]))-m/2>=o)break;v=w-h.itime[l]-(f+m%2*.5),k=0|Math.floor(2*v*d+d+.5);var x=0;for(c=0;c<=m;++c){var S=c+f-m/2;x+=(S<0?y[g+S]:s[i+S])*h.blackfilt[k][c]}t[n+u]=x}if(a.num_used=Math.min(o,m+f-m/2),h.itime[l]+=a.num_used-u*h.resample_ratio,a.num_used>=g)for(c=0;c<g;c++)y[c]=s[i+a.num_used+c-g];else{var A=g-a.num_used;for(c=0;c<A;++c)y[c]=y[c+a.num_used];for(f=0;c<g;++c,++f)y[c]=s[i+f];Tt(f==a.num_used)}return u}function P(e,t,n,r,s,i){var o=e.internal_flags;if(o.resample_ratio<.9999||o.resample_ratio>1.0001)for(var a=0;a<o.channels_out;a++){var l=new M;i.n_out=O(e,t[a],o.mf_size,e.framesize,n[a],r,s,l,a),i.n_in=l.num_used}else{i.n_out=Math.min(e.framesize,s),i.n_in=i.n_out;for(var c=0;c<i.n_out;++c)t[0][o.mf_size+c]=n[0][r+c],2==o.channels_out&&(t[1][o.mf_size+c]=n[1][r+c])}}this.lame_init=function(){var e=new ne;return m(e),e.lame_allocated_gfp=1,e},this.nearestBitrateFullIndex=function(e){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,r=0,s=0,i=0;i=t[16],s=16,r=t[16],n=16;for(var o=0;o<16;o++)if(Math.max(e,t[o+1])!=e){i=t[o+1],s=o+1,r=t[o],n=o;break}return i-e>e-r?n:s},this.lame_init_params=function(e){var t=e.internal_flags;if(t.Class_ID=0,null==t.ATH&&(t.ATH=new Ce),null==t.PSY&&(t.PSY=new f),null==t.rgdata&&(t.rgdata=new He),t.channels_in=e.num_channels,1==t.channels_in&&(e.mode=gn.MONO),t.channels_out=e.mode==gn.MONO?1:2,t.mode_ext=L.MPG_MD_MS_LR,e.mode==gn.MONO&&(e.force_ms=!1),e.VBR==wt.vbr_off&&128!=e.VBR_mean_bitrate_kbps&&0==e.brate&&(e.brate=e.VBR_mean_bitrate_kbps),e.VBR==wt.vbr_off||e.VBR==wt.vbr_mtrh||e.VBR==wt.vbr_mt||(e.free_format=!1),e.VBR==wt.vbr_off&&0==e.brate&&vt.EQ(e.compression_ratio,0)&&(e.compression_ratio=11.025),e.VBR==wt.vbr_off&&e.compression_ratio>0&&(0==e.out_samplerate&&(e.out_samplerate=map2MP3Frequency(int(.97*e.in_samplerate))),e.brate=0|16*e.out_samplerate*t.channels_out/(1e3*e.compression_ratio),t.samplerate_index=v(e.out_samplerate,e),e.free_format||(e.brate=y(e.brate,e.version,e.out_samplerate))),0!=e.out_samplerate&&(e.out_samplerate<16e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,64)):e.out_samplerate<32e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,160)):(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,32),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320))),0==e.lowpassfreq){var a=16e3;switch(e.VBR){case wt.vbr_off:k(l=new d,e.brate),a=l.lowerlimit;break;case wt.vbr_abr:var l;k(l=new d,e.VBR_mean_bitrate_kbps),a=l.lowerlimit;break;case wt.vbr_rh:var c=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=e.VBR_q&&e.VBR_q<=9){var p=c[e.VBR_q],m=c[e.VBR_q+1],g=e.VBR_q_frac;a=linear_int(p,m,g)}else a=19500;break;default:c=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],0<=e.VBR_q&&e.VBR_q<=9?(p=c[e.VBR_q],m=c[e.VBR_q+1],g=e.VBR_q_frac,a=linear_int(p,m,g)):a=19500}e.mode!=gn.MONO||e.VBR!=wt.vbr_off&&e.VBR!=wt.vbr_abr||(a*=1.5),e.lowpassfreq=0|a}if(0==e.out_samplerate&&(2*e.lowpassfreq>e.in_samplerate&&(e.lowpassfreq=e.in_samplerate/2),e.out_samplerate=b(0|e.lowpassfreq,e.in_samplerate)),e.lowpassfreq=Math.min(20500,e.lowpassfreq),e.lowpassfreq=Math.min(e.out_samplerate/2,e.lowpassfreq),e.VBR==wt.vbr_off&&(e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.brate)),e.VBR==wt.vbr_abr&&(e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.VBR_mean_bitrate_kbps)),e.bWriteVbrTag||(e.findReplayGain=!1,e.decode_on_the_fly=!1,t.findPeakSample=!1),t.findReplayGain=e.findReplayGain,t.decode_on_the_fly=e.decode_on_the_fly,t.decode_on_the_fly&&(t.findPeakSample=!0),t.findReplayGain&&n.InitGainAnalysis(t.rgdata,e.out_samplerate)==fn.INIT_GAIN_ANALYSIS_ERROR)return e.internal_flags=null,-6;switch(t.decode_on_the_fly&&!e.decode_only&&(null!=t.hip&&u.hip_decode_exit(t.hip),t.hip=u.hip_decode_init()),t.mode_gr=e.out_samplerate<=24e3?1:2,e.framesize=576*t.mode_gr,e.encoder_delay=L.ENCDELAY,t.resample_ratio=e.in_samplerate/e.out_samplerate,e.VBR){case wt.vbr_mt:case wt.vbr_rh:case wt.vbr_mtrh:var T=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];e.compression_ratio=T[e.VBR_q];break;case wt.vbr_abr:e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.VBR_mean_bitrate_kbps);break;default:e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.brate)}if(e.mode==gn.NOT_SET&&(e.mode=gn.JOINT_STEREO),e.highpassfreq>0?(t.highpass1=2*e.highpassfreq,e.highpasswidth>=0?t.highpass2=2*(e.highpassfreq+e.highpasswidth):t.highpass2=2*e.highpassfreq,t.highpass1/=e.out_samplerate,t.highpass2/=e.out_samplerate):(t.highpass1=0,t.highpass2=0),e.lowpassfreq>0?(t.lowpass2=2*e.lowpassfreq,e.lowpasswidth>=0?(t.lowpass1=2*(e.lowpassfreq-e.lowpasswidth),t.lowpass1<0&&(t.lowpass1=0)):t.lowpass1=2*e.lowpassfreq,t.lowpass1/=e.out_samplerate,t.lowpass2/=e.out_samplerate):(t.lowpass1=0,t.lowpass2=0),x(e),t.samplerate_index=v(e.out_samplerate,e),t.samplerate_index<0)return e.internal_flags=null,-1;if(e.VBR==wt.vbr_off){if(e.free_format)t.bitrate_index=0;else if(e.brate=y(e.brate,e.version,e.out_samplerate),t.bitrate_index=w(e.brate,e.version,e.out_samplerate),t.bitrate_index<=0)return e.internal_flags=null,-1}else t.bitrate_index=1;e.analysis&&(e.bWriteVbrTag=!1),null!=t.pinfo&&(e.bWriteVbrTag=!1),r.init_bit_stream_w(t);for(var R,E=t.samplerate_index+3*e.version+6*(e.out_samplerate<16e3?1:0),$=0;$<L.SBMAX_l+1;$++)t.scalefac_band.l[$]=i.sfBandIndex[E].l[$];for($=0;$<L.PSFB21+1;$++){var I=(t.scalefac_band.l[22]-t.scalefac_band.l[21])/L.PSFB21,M=t.scalefac_band.l[21]+$*I;t.scalefac_band.psfb21[$]=M}for(t.scalefac_band.psfb21[L.PSFB21]=576,$=0;$<L.SBMAX_s+1;$++)t.scalefac_band.s[$]=i.sfBandIndex[E].s[$];for($=0;$<L.PSFB12+1;$++)I=(t.scalefac_band.s[13]-t.scalefac_band.s[12])/L.PSFB12,M=t.scalefac_band.s[12]+$*I,t.scalefac_band.psfb12[$]=M;for(t.scalefac_band.psfb12[L.PSFB12]=192,1==e.version?t.sideinfo_len=1==t.channels_out?21:36:t.sideinfo_len=1==t.channels_out?13:21,e.error_protection&&(t.sideinfo_len+=2),A(e),t.Class_ID=_,R=0;R<19;R++)t.nsPsy.pefirbuf[R]=700*t.mode_gr*t.channels_out;switch(-1==e.ATHtype&&(e.ATHtype=4),Tt(e.VBR_q<=9),Tt(e.VBR_q>=0),e.VBR){case wt.vbr_mt:e.VBR=wt.vbr_mtrh;case wt.vbr_mtrh:null==e.useTemporal&&(e.useTemporal=!1),s.apply_preset(e,500-10*e.VBR_q,0),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),e.quality<5&&(e.quality=0),e.quality>5&&(e.quality=5),t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,e.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=e.out_samplerate>44e3,t.iteration_loop=new VBRNewIterationLoop(o);break;case wt.vbr_rh:s.apply_preset(e,500-10*e.VBR_q,0),t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,e.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=e.out_samplerate>44e3,e.quality>6&&(e.quality=6),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),t.iteration_loop=new VBROldIterationLoop(o);break;default:var B;t.sfb21_extra=!1,e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),(B=e.VBR)==wt.vbr_off&&(e.VBR_mean_bitrate_kbps=e.brate),s.apply_preset(e,e.VBR_mean_bitrate_kbps,0),e.VBR=B,t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,B==wt.vbr_off?t.iteration_loop=new Ke(o):t.iteration_loop=new ABRIterationLoop(o)}if(Tt(e.scale>=0),e.VBR!=wt.vbr_off){if(t.VBR_min_bitrate=1,t.VBR_max_bitrate=14,e.out_samplerate<16e3&&(t.VBR_max_bitrate=8),0!=e.VBR_min_bitrate_kbps&&(e.VBR_min_bitrate_kbps=y(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),t.VBR_min_bitrate=w(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),t.VBR_min_bitrate<0))return-1;if(0!=e.VBR_max_bitrate_kbps&&(e.VBR_max_bitrate_kbps=y(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),t.VBR_max_bitrate=w(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),t.VBR_max_bitrate<0))return-1;e.VBR_min_bitrate_kbps=Ze.bitrate_table[e.version][t.VBR_min_bitrate],e.VBR_max_bitrate_kbps=Ze.bitrate_table[e.version][t.VBR_max_bitrate],e.VBR_mean_bitrate_kbps=Math.min(Ze.bitrate_table[e.version][t.VBR_max_bitrate],e.VBR_mean_bitrate_kbps),e.VBR_mean_bitrate_kbps=Math.max(Ze.bitrate_table[e.version][t.VBR_min_bitrate],e.VBR_mean_bitrate_kbps)}return e.tune&&(t.PSY.mask_adjust+=e.tune_value_a,t.PSY.mask_adjust_short+=e.tune_value_a),S(e),Tt(e.scale>=0),e.athaa_type<0?t.ATH.useAdjust=3:t.ATH.useAdjust=e.athaa_type,t.ATH.aaSensitivityP=Math.pow(10,e.athaa_sensitivity/-10),null==e.short_blocks&&(e.short_blocks=kt.short_block_allowed),e.short_blocks!=kt.short_block_allowed||e.mode!=gn.JOINT_STEREO&&e.mode!=gn.STEREO||(e.short_blocks=kt.short_block_coupled),e.quant_comp<0&&(e.quant_comp=1),e.quant_comp_short<0&&(e.quant_comp_short=0),e.msfix<0&&(e.msfix=0),e.exp_nspsytune=1|e.exp_nspsytune,e.internal_flags.nsPsy.attackthre<0&&(e.internal_flags.nsPsy.attackthre=Q.NSATTACKTHRE),e.internal_flags.nsPsy.attackthre_s<0&&(e.internal_flags.nsPsy.attackthre_s=Q.NSATTACKTHRE_S),Tt(e.scale>=0),e.scale<0&&(e.scale=1),e.ATHtype<0&&(e.ATHtype=4),e.ATHcurve<0&&(e.ATHcurve=4),e.athaa_loudapprox<0&&(e.athaa_loudapprox=2),e.interChRatio<0&&(e.interChRatio=0),null==e.useTemporal&&(e.useTemporal=!0),t.slot_lag=t.frac_SpF=0,e.VBR==wt.vbr_off&&(t.slot_lag=t.frac_SpF=72e3*(e.version+1)*e.brate%e.out_samplerate|0),i.iteration_init(e),h.psymodel_init(e),Tt(e.scale>=0),0},this.lame_encode_flush=function(e,t,n,s){var i,o,a,l,u=e.internal_flags,h=At([2,1152]),f=0,d=u.mf_samples_to_encode-L.POSTDELAY,p=R(e);if(u.mf_samples_to_encode<1)return 0;for(i=0,e.in_samplerate!=e.out_samplerate&&(d+=16*e.out_samplerate/e.in_samplerate),(a=e.framesize-d%e.framesize)<576&&(a+=e.framesize),e.encoder_padding=a,l=(d+a)/e.framesize;l>0&&f>=0;){var _=p-u.mf_size,m=e.frameNum;_*=e.in_samplerate,(_/=e.out_samplerate)>1152&&(_=1152),_<1&&(_=1),o=s-i,0==s&&(o=0),n+=f=this.lame_encode_buffer(e,h[0],h[1],_,t,n,o),i+=f,l-=m!=e.frameNum?1:0}if(u.mf_samples_to_encode=0,f<0)return f;if(o=s-i,0==s&&(o=0),r.flush_bitstream(e),(f=r.copy_buffer(u,t,n,o,1))<0)return f;if(n+=f,o=s-(i+=f),0==s&&(o=0),e.write_id3tag_automatic){if(c.id3tag_write_v1(e),(f=r.copy_buffer(u,t,n,o,0))<0)return f;i+=f}return i},this.lame_encode_buffer=function(e,t,n,r,s,i,o){var a=e.internal_flags,l=[null,null];if(a.Class_ID!=_)return-3;if(0==r)return 0;T(a,r),l[0]=a.in_buffer_0,l[1]=a.in_buffer_1;for(var c=0;c<r;c++)l[0][c]=t[c],a.channels_in>1&&(l[1][c]=n[c]);return E(e,l[0],l[1],r,s,i,o)}}var Et=Rt,$t=_.VbrMode;function It(){function e(e,t,n,r,s,i,o,a,l,c,u,h,f,d,p){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=r,this.st_lrm=s,this.st_s=i,this.masking_adj=o,this.masking_adj_short=a,this.ath_lower=l,this.ath_curve=c,this.ath_sensitivity=u,this.interch=h,this.safejoint=f,this.sfb21mod=d,this.msfix=p}function t(e,t,n,r,s,i,o,a,l,c,u,h,f,d){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=r,this.nsmsfix=s,this.st_lrm=i,this.st_s=o,this.nsbass=a,this.scale=l,this.masking_adj=c,this.ath_lower=u,this.ath_curve=h,this.interch=f,this.sfscale=d}var n;this.setModules=function(e){n=e};var r=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],s=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function i(e,t,n){var i=e.VBR==$t.vbr_rh?r:s,o=e.VBR_q_frac,a=i[t],c=i[t+1],u=a;a.st_lrm=a.st_lrm+o*(c.st_lrm-a.st_lrm),a.st_s=a.st_s+o*(c.st_s-a.st_s),a.masking_adj=a.masking_adj+o*(c.masking_adj-a.masking_adj),a.masking_adj_short=a.masking_adj_short+o*(c.masking_adj_short-a.masking_adj_short),a.ath_lower=a.ath_lower+o*(c.ath_lower-a.ath_lower),a.ath_curve=a.ath_curve+o*(c.ath_curve-a.ath_curve),a.ath_sensitivity=a.ath_sensitivity+o*(c.ath_sensitivity-a.ath_sensitivity),a.interch=a.interch+o*(c.interch-a.interch),a.msfix=a.msfix+o*(c.msfix-a.msfix),l(e,u.vbr_q),0!=n?e.quant_comp=u.quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=u.quant_comp),0!=n?e.quant_comp_short=u.quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=u.quant_comp_s),0!=u.expY&&(e.experimentalY=0!=u.expY),0!=n?e.internal_flags.nsPsy.attackthre=u.st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=u.st_lrm),0!=n?e.internal_flags.nsPsy.attackthre_s=u.st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=u.st_s),0!=n?e.maskingadjust=u.masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=u.masking_adj),0!=n?e.maskingadjust_short=u.masking_adj_short:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=u.masking_adj_short),0!=n?e.ATHlower=-u.ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-u.ath_lower/10),0!=n?e.ATHcurve=u.ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=u.ath_curve),0!=n?e.athaa_sensitivity=u.ath_sensitivity:Math.abs(e.athaa_sensitivity- -1)>0||(e.athaa_sensitivity=u.ath_sensitivity),u.interch>0&&(0!=n?e.interChRatio=u.interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=u.interch)),u.safejoint>0&&(e.exp_nspsytune=e.exp_nspsytune|u.safejoint),u.sfb21mod>0&&(e.exp_nspsytune=e.exp_nspsytune|u.sfb21mod<<20),0!=n?e.msfix=u.msfix:Math.abs(e.msfix- -1)>0||(e.msfix=u.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=o)}var o=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function a(e,t,r){var s=t,i=n.nearestBitrateFullIndex(t);if(e.VBR=$t.vbr_abr,e.VBR_mean_bitrate_kbps=s,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,e.VBR_mean_bitrate_kbps>320&&(e.disable_reservoir=!0),o[i].safejoint>0&&(e.exp_nspsytune=2|e.exp_nspsytune),o[i].sfscale>0&&(e.internal_flags.noise_shaping=2),Math.abs(o[i].nsbass)>0){var a=int(4*o[i].nsbass);a<0&&(a+=64),e.exp_nspsytune=e.exp_nspsytune|a<<2}return 0!=r?e.quant_comp=o[i].quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=o[i].quant_comp),0!=r?e.quant_comp_short=o[i].quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=o[i].quant_comp_s),0!=r?e.msfix=o[i].nsmsfix:Math.abs(e.msfix- -1)>0||(e.msfix=o[i].nsmsfix),0!=r?e.internal_flags.nsPsy.attackthre=o[i].st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=o[i].st_lrm),0!=r?e.internal_flags.nsPsy.attackthre_s=o[i].st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=o[i].st_s),0!=r?e.scale=o[i].scale:Math.abs(e.scale- -1)>0||(e.scale=o[i].scale),0!=r?e.maskingadjust=o[i].masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=o[i].masking_adj),o[i].masking_adj>0?0!=r?e.maskingadjust_short=.9*o[i].masking_adj:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=.9*o[i].masking_adj):0!=r?e.maskingadjust_short=1.1*o[i].masking_adj:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=1.1*o[i].masking_adj),0!=r?e.ATHlower=-o[i].ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-o[i].ath_lower/10),0!=r?e.ATHcurve=o[i].ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=o[i].ath_curve),0!=r?e.interChRatio=o[i].interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=o[i].interch),t}function l(e,t){var n=0;return 0>t&&(n=-1,t=0),9<t&&(n=-1,t=9),e.VBR_q=t,e.VBR_q_frac=0,n}this.apply_preset=function(e,t,n){switch(t){case un.R3MIX:t=un.V3,e.VBR=$t.vbr_mtrh;break;case un.MEDIUM:t=un.V4,e.VBR=$t.vbr_rh;break;case un.MEDIUM_FAST:t=un.V4,e.VBR=$t.vbr_mtrh;break;case un.STANDARD:t=un.V2,e.VBR=$t.vbr_rh;break;case un.STANDARD_FAST:t=un.V2,e.VBR=$t.vbr_mtrh;break;case un.EXTREME:t=un.V0,e.VBR=$t.vbr_rh;break;case un.EXTREME_FAST:t=un.V0,e.VBR=$t.vbr_mtrh;break;case un.INSANE:return t=320,e.preset=t,a(e,t,n),e.VBR=$t.vbr_off,t}switch(e.preset=t,t){case un.V9:return i(e,9,n),t;case un.V8:return i(e,8,n),t;case un.V7:return i(e,7,n),t;case un.V6:return i(e,6,n),t;case un.V5:return i(e,5,n),t;case un.V4:return i(e,4,n),t;case un.V3:return i(e,3,n),t;case un.V2:return i(e,2,n),t;case un.V1:return i(e,1,n),t;case un.V0:return i(e,0,n),t}return 8<=t&&t<=320?a(e,t,n):(e.preset=0,t)}}var Mt=It;function Bt(){this.setModules=function(e,t){}}var Ct=Bt;function Ot(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Pt=Ot,Nt=_.new_float,Lt=_.new_int;function Dt(){this.global_gain=0,this.sfb_count1=0,this.step=Lt(39),this.noise=Nt(39),this.noise_log=Nt(39)}var Vt=Dt,jt=_.System,Ht=_.VbrMode,Ft=_.Util,qt=_.Arrays,zt=_.new_float,Ut=_.assert;function Xt(){var e,t,n;this.rv=null,this.qupvt=null;var r,s=new Ct;function i(e,t,n,r){r=0;for(var s=0;s<=n;++s){var i=Math.abs(e.xr[s]);r+=i,t[s]=Math.sqrt(i*Math.sqrt(i)),t[s]>e.xrpow_max&&(e.xrpow_max=t[s])}return r}function o(e,t){var r=e.ATH,s=t.xr;if(t.block_type!=L.SHORT_TYPE)for(var i=!1,o=L.PSFB21-1;o>=0&&!i;o--){var a=e.scalefac_band.psfb21[o],l=e.scalefac_band.psfb21[o+1],c=n.athAdjust(r.adjust,r.psfb21[o],r.floor);e.nsPsy.longfact[21]>1e-12&&(c*=e.nsPsy.longfact[21]);for(var u=l-1;u>=a;u--){if(!(Math.abs(s[u])<c)){i=!0;break}s[u]=0}}else for(var h=0;h<3;h++)for(i=!1,o=L.PSFB12-1;o>=0&&!i;o--){l=(a=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*h+(e.scalefac_band.psfb12[o]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[o+1]-e.scalefac_band.psfb12[o]);var f=n.athAdjust(r.adjust,r.psfb12[o],r.floor);for(e.nsPsy.shortfact[12]>1e-12&&(f*=e.nsPsy.shortfact[12]),u=l-1;u>=a;u--){if(!(Math.abs(s[u])<f)){i=!0;break}s[u]=0}}}function a(e){this.ordinal=e}function l(e,t,n,s,i){var o,l=e.CurrentStep[s],c=!1,u=e.OldValue[s],h=a.BINSEARCH_NONE;for(t.global_gain=u,n-=t.part2_length;;){var f;if(o=r.count_bits(e,i,t,null),1==l||o==n)break;o>n?(h==a.BINSEARCH_DOWN&&(c=!0),c&&(l/=2),h=a.BINSEARCH_UP,f=l):(h==a.BINSEARCH_UP&&(c=!0),c&&(l/=2),h=a.BINSEARCH_DOWN,f=-l),t.global_gain+=f,t.global_gain<0&&(t.global_gain=0,c=!0),t.global_gain>255&&(t.global_gain=255,c=!0)}for(Ut(t.global_gain>=0),Ut(t.global_gain<256);o>n&&t.global_gain<255;)t.global_gain++,o=r.count_bits(e,i,t,null);return e.CurrentStep[s]=u-t.global_gain>=4?4:2,e.OldValue[s]=t.global_gain,t.part2_3_length=o,o}function c(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function u(e){return Ft.FAST_LOG10(.368+.632*e*e*e)}function h(e,t){for(var n=1e-37,r=0;r<t.psymax;r++)n+=u(e[r]);return Math.max(1e-20,n)}function f(e,t,n,r,s){var i;switch(e){default:case 9:t.over_count>0?(i=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(i=n.bits<t.bits)):i=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:i=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&bn.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=h(s,r);case 1:i=n.max_noise<t.max_noise;break;case 2:i=n.tot_noise<t.tot_noise;break;case 3:i=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:i=n.max_noise<=0&&t.max_noise>.2||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&t.max_noise>0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.05&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.1&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:i=n.over_noise<t.over_noise||bn.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:i=n.over_noise<t.over_noise||bn.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||bn.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:i=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(i=i&&n.bits<t.bits),i}function d(e,t,n,r,s){var i,o=e.internal_flags;i=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var a=0,l=0;l<t.sfbmax;l++)a<n[l]&&(a=n[l]);var c=o.noise_shaping_amp;switch(3==c&&(c=s?2:1),c){case 2:break;case 1:a>1?a=Math.pow(a,.5):a*=.95;break;default:a>1?a=1:a*=.95}var u=0;for(l=0;l<t.sfbmax;l++){var h,f=t.width[l];if(u+=f,!(n[l]<a)){if(0!=(2&o.substep_shaping)&&(o.pseudohalf[l]=0==o.pseudohalf[l]?1:0,0==o.pseudohalf[l]&&2==o.noise_shaping_amp))return;for(t.scalefac[l]++,h=-f;h<0;h++)r[u+h]*=i,r[u+h]>t.xrpow_max&&(t.xrpow_max=r[u+h]);if(2==o.noise_shaping_amp)return}}}function p(e,t){for(var r=1.2968395546510096,s=0,i=0;i<e.sfbmax;i++){var o=e.width[i],a=e.scalefac[i];if(0!=e.preflag&&(a+=n.pretab[i]),s+=o,0!=(1&a)){a++;for(var l=-o;l<0;l++)t[s+l]*=r,t[s+l]>e.xrpow_max&&(e.xrpow_max=t[s+l])}e.scalefac[i]=a>>1}e.preflag=0,e.scalefac_scale=1}function _(e,t,r){var s,i=t.scalefac;for(s=0;s<t.sfb_lmax;s++)if(i[s]>=16)return!0;for(var o=0;o<3;o++){var a=0,l=0;for(s=t.sfb_lmax+o;s<t.sfbdivide;s+=3)a<i[s]&&(a=i[s]);for(;s<t.sfbmax;s+=3)l<i[s]&&(l=i[s]);if(!(a<16&&l<8)){if(t.subblock_gain[o]>=7)return!0;t.subblock_gain[o]++;var c=e.scalefac_band.l[t.sfb_lmax];for(s=t.sfb_lmax+o;s<t.sfbmax;s+=3){var u=t.width[s],h=i[s];if((h-=4>>t.scalefac_scale)>=0)i[s]=h,c+=3*u;else{i[s]=0;var f=210+(h<<t.scalefac_scale+1);p=n.IPOW20(f),c+=u*(o+1);for(var d=-u;d<0;d++)r[c+d]*=p,r[c+d]>t.xrpow_max&&(t.xrpow_max=r[c+d]);c+=u*(3-o-1)}}var p=n.IPOW20(202);for(c+=t.width[s]*(o+1),d=-t.width[s];d<0;d++)r[c+d]*=p,r[c+d]>t.xrpow_max&&(t.xrpow_max=r[c+d])}}return!1}function m(e,t,n,s,i){var o=e.internal_flags;d(e,t,n,s,i);var a=c(t);return!(a||(a=2==o.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(o,t))&&(o.noise_shaping>1&&(qt.fill(o.pseudohalf,0),0==t.scalefac_scale?(p(t,s),a=!1):t.block_type==L.SHORT_TYPE&&o.subblock_gain>0&&(a=_(o,t,s)||c(t))),a||(a=2==o.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(o,t)),a))}this.setModules=function(i,o,a,l){e=i,t=o,this.rv=o,n=a,this.qupvt=a,r=l,s.setModules(n,r)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var r=e.tt[t][0].xr[n],s=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(r+s)*(.5*Ft.SQRT2),e.tt[t][1].xr[n]=(r-s)*(.5*Ft.SQRT2)}},this.init_xrpow=function(e,t,n){var r=0,s=0|t.max_nonzero_coeff;if(t.xrpow_max=0,qt.fill(n,s,576,0),(r=i(t,n,s,r))>1e-20){var o=0;0!=(2&e.substep_shaping)&&(o=1);for(var a=0;a<t.psymax;a++)e.pseudohalf[a]=o;return!0}return qt.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=L.SBPSY_l,t.sfb_smin=L.SBPSY_s,t.psy_lmax=e.sfb21_extra?L.SBMAX_l:L.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var r=0;r<L.SBMAX_l;r++)t.width[r]=e.scalefac_band.l[r+1]-e.scalefac_band.l[r],t.window[r]=3;if(t.block_type==L.SHORT_TYPE){var s=zt(576);t.sfb_smin=0,t.sfb_lmax=0,0!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?L.SBMAX_s:L.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(L.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var i=e.scalefac_band.l[t.sfb_lmax];for(jt.arraycopy(t.xr,0,s,0,576),r=t.sfb_smin;r<L.SBMAX_s;r++)for(var a=e.scalefac_band.s[r],l=e.scalefac_band.s[r+1],c=0;c<3;c++)for(var u=a;u<l;u++)t.xr[i++]=s[3*u+c];var h=t.sfb_lmax;for(r=t.sfb_smin;r<L.SBMAX_s;r++)t.width[h]=t.width[h+1]=t.width[h+2]=e.scalefac_band.s[r+1]-e.scalefac_band.s[r],t.window[h]=0,t.window[h+1]=1,t.window[h+2]=2,h+=3}t.count1bits=0,t.sfb_partition_table=n.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,qt.fill(t.scalefac,0),o(e,t)},a.BINSEARCH_NONE=new a(0),a.BINSEARCH_UP=new a(1),a.BINSEARCH_DOWN=new a(2),this.trancate_smallspectrums=function(e,t,s,i){var o=zt(se.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=L.SHORT_TYPE)&&0==(128&e.substep_shaping)){n.calc_noise(t,s,o,new Pt,null);for(var a=0;a<576;a++){var l=0;0!=t.l3_enc[a]&&(l=Math.abs(t.xr[a])),i[a]=l}a=0;var c=8;t.block_type==L.SHORT_TYPE&&(c=6);do{var u,h,f,d,p=t.width[c];if(a+=p,!(o[c]>=1||(qt.sort(i,a-p,p),bn.EQ(i[a-1],0)))){u=(1-o[c])*s[c],h=0,d=0;do{var _;for(f=1;d+f<p&&!bn.NEQ(i[d+a-p],i[d+a+f-p]);f++);if(u<(_=i[d+a-p]*i[d+a-p]*f)){0!=d&&(h=i[d+a-p-1]);break}u-=_,d+=f}while(d<p);if(!bn.EQ(h,0))do{Math.abs(t.xr[a-p])<=h&&(t.l3_enc[a-p]=0)}while(--p>0)}}while(++c<t.psymax);t.part2_3_length=r.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,s,i,o,a){var c=e.internal_flags,u=new le,h=zt(576),d=zt(se.SFBMAX),p=new Pt,_=new Vt,g=9999999,b=!1,v=!1,y=0;if(l(c,t,a,o,i),0==c.noise_shaping)return 100;n.calc_noise(t,s,d,p,_),p.bits=t.part2_3_length,u.assign(t);var w=0;for(jt.arraycopy(i,0,h,0,576);!b;){do{var k,x=new Pt,S=255;if(k=0!=(2&c.substep_shaping)?20:3,c.sfb21_extra){if(d[u.sfbmax]>1)break;if(u.block_type==L.SHORT_TYPE&&(d[u.sfbmax+1]>1||d[u.sfbmax+2]>1))break}if(!m(e,u,d,i,v))break;0!=u.scalefac_scale&&(S=254);var A=a-u.part2_length;if(A<=0)break;for(;(u.part2_3_length=r.count_bits(c,i,u,_))>A&&u.global_gain<=S;)u.global_gain++;if(u.global_gain>S)break;if(0==p.over_count){for(;(u.part2_3_length=r.count_bits(c,i,u,_))>g&&u.global_gain<=S;)u.global_gain++;if(u.global_gain>S)break}if(n.calc_noise(u,s,d,x,_),x.bits=u.part2_3_length,0!=(f(t.block_type!=L.SHORT_TYPE?e.quant_comp:e.quant_comp_short,p,x,u,d)?1:0))g=t.part2_3_length,p=x,t.assign(u),w=0,jt.arraycopy(i,0,h,0,576);else if(0==c.full_outer_loop){if(++w>k&&0==p.over_count)break;if(3==c.noise_shaping_amp&&v&&w>30)break;if(3==c.noise_shaping_amp&&v&&u.global_gain-y>15)break}}while(u.global_gain+u.scalefac_scale<255);3==c.noise_shaping_amp?v?b=!0:(u.assign(t),jt.arraycopy(h,0,i,0,576),w=0,y=u.global_gain,v=!0):b=!0}return Ut(t.global_gain+t.scalefac_scale<=255),e.VBR==Ht.vbr_rh||e.VBR==Ht.vbr_mtrh?jt.arraycopy(h,0,i,0,576):0!=(1&c.substep_shaping)&&trancate_smallspectrums(c,t,s,i),p.over_count},this.iteration_finish_one=function(e,n,s){var i=e.l3_side,o=i.tt[n][s];r.best_scalefac_store(e,n,s,i),1==e.use_best_huffman&&r.best_huffman_divide(e,o),t.ResvAdjust(e,o)},this.VBR_encode_granule=function(e,t,n,r,s,i,o){var a,l=e.internal_flags,c=new le,u=zt(576),h=o,f=o+1,d=(o+i)/2,p=0,_=l.sfb21_extra;Ut(h<=LameInternalFlags.MAX_BITS_PER_CHANNEL),qt.fill(c.l3_enc,0);do{l.sfb21_extra=!(d>h-42)&&_,outer_loop(e,t,n,r,s,d)<=0?(p=1,f=t.part2_3_length,c.assign(t),jt.arraycopy(r,0,u,0,576),a=(o=f-32)-i,d=(o+i)/2):(a=o-(i=d+32),d=(o+i)/2,0!=p&&(p=2,t.assign(c),jt.arraycopy(u,0,r,0,576)))}while(a>12);l.sfb21_extra=_,2==p&&jt.arraycopy(c.l3_enc,0,t.l3_enc,0,576),Ut(t.part2_3_length<=h)},this.get_framebits=function(n,r){var s=n.internal_flags;s.bitrate_index=s.VBR_min_bitrate;var i=e.getframebits(n);s.bitrate_index=1,i=e.getframebits(n);for(var o=1;o<=s.VBR_max_bitrate;o++){s.bitrate_index=o;var a=new MeanBits(i);r[o]=t.ResvFrameBegin(n,a),i=a.bits}},this.VBR_old_prepare=function(e,r,s,i,o,a,l,c,u){var h,f=e.internal_flags,d=0,p=1,_=0;f.bitrate_index=f.VBR_max_bitrate;var m=t.ResvFrameBegin(e,new MeanBits(0))/f.mode_gr;get_framebits(e,a);for(var g=0;g<f.mode_gr;g++){var b=n.on_pe(e,r,c[g],m,g,0);f.mode_ext==L.MPG_MD_MS_LR&&(ms_convert(f.l3_side,g),n.reduce_side(c[g],s[g],m,b));for(var v=0;v<f.channels_out;++v){var y=f.l3_side.tt[g][v];y.block_type!=L.SHORT_TYPE?(d=1.28/(1+Math.exp(3.5-r[g][v]/300))-.05,h=f.PSY.mask_adjust-d):(d=2.56/(1+Math.exp(3.5-r[g][v]/300))-.14,h=f.PSY.mask_adjust_short-d),f.masking_lower=Math.pow(10,.1*h),init_outer_loop(f,y),u[g][v]=n.calc_xmin(e,i[g][v],y,o[g][v]),0!=u[g][v]&&(p=0),l[g][v]=126,_+=c[g][v]}}for(g=0;g<f.mode_gr;g++)for(v=0;v<f.channels_out;v++)_>a[f.VBR_max_bitrate]&&(c[g][v]*=a[f.VBR_max_bitrate],c[g][v]/=_),l[g][v]>c[g][v]&&(l[g][v]=c[g][v]);return p},this.bitpressure_strategy=function(e,t,n,r){for(var s=0;s<e.mode_gr;s++)for(var i=0;i<e.channels_out;i++){for(var o=e.l3_side.tt[s][i],a=t[s][i],l=0,c=0;c<o.psy_lmax;c++)a[l++]*=1+.029*c*c/L.SBMAX_l/L.SBMAX_l;if(o.block_type==L.SHORT_TYPE)for(c=o.sfb_smin;c<L.SBMAX_s;c++)a[l++]*=1+.029*c*c/L.SBMAX_s/L.SBMAX_s,a[l++]*=1+.029*c*c/L.SBMAX_s/L.SBMAX_s,a[l++]*=1+.029*c*c/L.SBMAX_s/L.SBMAX_s;r[s][i]=0|Math.max(n[s][i],.9*r[s][i])}},this.VBR_new_prepare=function(e,r,s,i,o,a){var l,c=e.internal_flags,u=1,h=0,f=0;if(e.free_format)c.bitrate_index=0,d=new MeanBits(h),l=t.ResvFrameBegin(e,d),h=d.bits,o[0]=l;else{c.bitrate_index=c.VBR_max_bitrate;var d=new MeanBits(h);t.ResvFrameBegin(e,d),h=d.bits,get_framebits(e,o),l=o[c.VBR_max_bitrate]}for(var p=0;p<c.mode_gr;p++){n.on_pe(e,r,a[p],h,p,0),c.mode_ext==L.MPG_MD_MS_LR&&ms_convert(c.l3_side,p);for(var _=0;_<c.channels_out;++_){var m=c.l3_side.tt[p][_];c.masking_lower=Math.pow(10,.1*c.PSY.mask_adjust),init_outer_loop(c,m),0!=n.calc_xmin(e,s[p][_],m,i[p][_])&&(u=0),f+=a[p][_]}}for(p=0;p<c.mode_gr;p++)for(_=0;_<c.channels_out;_++)f>l&&(a[p][_]*=l,a[p][_]/=f);return u},this.calc_target_bits=function(r,s,i,o,a,l){var c,u,h,f,d=r.internal_flags,p=d.l3_side,_=0;d.bitrate_index=d.VBR_max_bitrate;var m=new MeanBits(_);for(l[0]=t.ResvFrameBegin(r,m),_=m.bits,d.bitrate_index=1,_=e.getframebits(r)-8*d.sideinfo_len,a[0]=_/(d.mode_gr*d.channels_out),_=r.VBR_mean_bitrate_kbps*r.framesize*1e3,0!=(1&d.substep_shaping)&&(_*=1.09),_/=r.out_samplerate,_-=8*d.sideinfo_len,_/=d.mode_gr*d.channels_out,(c=.93+.07*(11-r.compression_ratio)/5.5)<.9&&(c=.9),c>1&&(c=1),u=0;u<d.mode_gr;u++){var g=0;for(h=0;h<d.channels_out;h++){if(o[u][h]=int(c*_),s[u][h]>700){var b=int((s[u][h]-700)/1.4),v=p.tt[u][h];o[u][h]=int(c*_),v.block_type==L.SHORT_TYPE&&b<_/2&&(b=_/2),b>3*_/2?b=3*_/2:b<0&&(b=0),o[u][h]+=b}o[u][h]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(o[u][h]=LameInternalFlags.MAX_BITS_PER_CHANNEL),g+=o[u][h]}if(g>LameInternalFlags.MAX_BITS_PER_GRANULE)for(h=0;h<d.channels_out;++h)o[u][h]*=LameInternalFlags.MAX_BITS_PER_GRANULE,o[u][h]/=g}if(d.mode_ext==L.MPG_MD_MS_LR)for(u=0;u<d.mode_gr;u++)n.reduce_side(o[u],i[u],_*d.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(f=0,u=0;u<d.mode_gr;u++)for(h=0;h<d.channels_out;h++)o[u][h]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(o[u][h]=LameInternalFlags.MAX_BITS_PER_CHANNEL),f+=o[u][h];if(f>l[0])for(u=0;u<d.mode_gr;u++)for(h=0;h<d.channels_out;h++)o[u][h]*=l[0],o[u][h]/=f}}var Yt=Xt,Kt=_.assert;function Gt(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var r,s=t.internal_flags,i=s.l3_side,o=e.getframebits(t);n.bits=(o-8*s.sideinfo_len)/s.mode_gr;var a=2048*s.mode_gr-8;t.brate>320?r=8*int(1e3*t.brate/(t.out_samplerate/1152)/8+.5):(r=11520,t.strict_ISO&&(r=8*int(32e4/(t.out_samplerate/1152)/8+.5))),s.ResvMax=r-o,s.ResvMax>a&&(s.ResvMax=a),(s.ResvMax<0||t.disable_reservoir)&&(s.ResvMax=0);var l=n.bits*s.mode_gr+Math.min(s.ResvSize,s.ResvMax);return l>r&&(l=r),Kt(0==s.ResvMax%8),Kt(s.ResvMax>=0),i.resvDrain_pre=0,null!=s.pinfo&&(s.pinfo.mean_bits=n.bits/2,s.pinfo.resvsize=s.ResvSize),l},this.ResvMaxBits=function(e,t,n,r){var s,i=e.internal_flags,o=i.ResvSize,a=i.ResvMax;0!=r&&(o+=t),0!=(1&i.substep_shaping)&&(a*=.9),n.bits=t,10*o>9*a?(s=o-9*a/10,n.bits+=s,i.substep_shaping|=128):(s=0,i.substep_shaping&=127,e.disable_reservoir||0!=(1&i.substep_shaping)||(n.bits-=.1*t));var l=o<6*i.ResvMax/10?o:6*i.ResvMax/10;return(l-=s)<0&&(l=0),l},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n,r=e.l3_side;e.ResvSize+=t*e.mode_gr;var s=0;r.resvDrain_post=0,r.resvDrain_pre=0,0!=(n=e.ResvSize%8)&&(s+=n),(n=e.ResvSize-s-e.ResvMax)>0&&(s+=n);var i=Math.min(8*r.main_data_begin,s)/8;r.resvDrain_pre+=8*i,s-=8*i,e.ResvSize-=8*i,r.main_data_begin-=i,r.resvDrain_post+=s,e.ResvSize-=s}}var Wt=Gt;function Zt(){var e="http://www.mp3dev.org/",t=3,n=98,r=4,s=0,i=93;this.getLameVersion=function(){return t+"."+n+"."+r},this.getLameShortVersion=function(){return t+"."+n+"."+r},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return s+"."+i},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var Qt=Zt,Jt=_.System,en=_.VbrMode,tn=_.ShortBlock,nn=_.Arrays,rn=_.new_byte,sn=_.assert;function on(){var e,t,n;this.setModules=function(r,s,i){e=r,t=s,n=i};var r=1,s=2,i=4,o=8,a=on.NUMTOCENTRIES,l=on.MAXFRAMESIZE,c=a+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,u=128,h=64,f=32,d=null,p="Xing",_="Info",m=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function g(e,t){if(e.nVbrNumFrames++,e.sum+=t,e.seen++,!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(var n=1;n<e.size;n+=2)e.bag[n/2]=e.bag[n];e.want*=2,e.pos/=2}}function b(e,t){if(!(e.pos<=0))for(var n=1;n<a;++n){var r=n/a,s=0|Math.floor(r*e.pos);s>e.pos-1&&(s=e.pos-1);var i=0|256*e.bag[s]/e.sum;i>255&&(i=255),t[n]=255&i}}function v(e,t){var n=255&e[t+0];return n<<=8,n|=255&e[t+1],n<<=8,n|=255&e[t+2],n<<=8,n|=255&e[t+3]}function y(e,t,n){e[t+0]=255&n>>24,e[t+1]=255&n>>16,e[t+2]=255&n>>8,e[t+3]=255&n}function w(e,t,n){e[t+0]=255&n>>8,e[t+1]=255&n}function k(e,t){return new String(e,t,p.length(),d).equals(p)||new String(e,t,_.length(),d).equals(_)}function x(e,t,n){return 255&(e<<t|n&~(-1<<t))}function S(t,n){var r=t.internal_flags;n[0]=x(n[0],8,255),n[1]=x(n[1],3,7),n[1]=x(n[1],1,t.out_samplerate<16e3?0:1),n[1]=x(n[1],1,t.version),n[1]=x(n[1],2,1),n[1]=x(n[1],1,t.error_protection?0:1),n[2]=x(n[2],4,r.bitrate_index),n[2]=x(n[2],2,r.samplerate_index),n[2]=x(n[2],1,0),n[2]=x(n[2],1,t.extension),n[3]=x(n[3],2,t.mode.ordinal()),n[3]=x(n[3],2,r.mode_ext),n[3]=x(n[3],1,t.copyright),n[3]=x(n[3],1,t.original),n[3]=x(n[3],2,t.emphasis),n[0]=255;var s,i,o=241&n[1];s=1==t.version?u:t.out_samplerate<16e3?f:h,t.VBR==en.vbr_off&&(s=t.brate),i=t.free_format?0:255&16*e.BitrateIndex(s,t.version,t.out_samplerate),1==t.version?(n[1]=255&(10|o),o=13&n[2],n[2]=255&(i|o)):(n[1]=255&(2|o),o=13&n[2],n[2]=255&(i|o))}function A(e,t){return t=t>>8^m[255&(t^e)]}function T(e,t,r,s,i){var o,a,l=e.internal_flags,c=0,u=e.encoder_delay,h=e.encoder_padding,f=100-10*e.VBR_q-e.quality,d=n.getLameVeryShortVersion(),p=0,_=[1,5,3,2,4,0,3],m=0|(e.lowpassfreq/100+.5>255?255:e.lowpassfreq/100+.5),g=0,b=0,v=0,k=e.internal_flags.noise_shaping,x=0,S=0,T=0,R=0,E=0,$=0!=(1&e.exp_nspsytune),I=0!=(2&e.exp_nspsytune),M=!1,B=!1,C=e.internal_flags.nogap_total,O=e.internal_flags.nogap_current,P=e.ATHtype,N=0;switch(e.VBR){case vbr_abr:a=e.VBR_mean_bitrate_kbps;break;case vbr_off:a=e.brate;break;default:a=e.VBR_min_bitrate_kbps}switch(o=16*p+(e.VBR.ordinal()<_.length?_[e.VBR.ordinal()]:0),l.findReplayGain&&(l.RadioGain>510&&(l.RadioGain=510),l.RadioGain<-510&&(l.RadioGain=-510),b=8192,b|=3072,l.RadioGain>=0?b|=l.RadioGain:(b|=512,b|=-l.RadioGain)),l.findPeakSample&&(g=Math.abs(0|l.PeakSample/32767*Math.pow(2,23)+.5)),-1!=C&&(O>0&&(B=!0),O<C-1&&(M=!0)),N=P+(($?1:0)<<4)+((I?1:0)<<5)+((M?1:0)<<6)+((B?1:0)<<7),f<0&&(f=0),e.mode){case MONO:x=0;break;case STEREO:x=1;break;case DUAL_CHANNEL:x=2;break;case JOINT_STEREO:x=e.force_ms?4:3;break;case NOT_SET:default:x=7}T=e.in_samplerate<=32e3?0:48e3==e.in_samplerate?2:e.in_samplerate>48e3?3:1,(e.short_blocks==tn.short_block_forced||e.short_blocks==tn.short_block_dispensed||-1==e.lowpassfreq&&-1==e.highpassfreq||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||0==P||e.in_samplerate<=32e3)&&(S=1),R=k+(x<<2)+(S<<5)+(T<<6),E=l.nMusicCRC,y(r,s+c,f),c+=4;for(var L=0;L<9;L++)r[s+c+L]=255&d.charAt(L);r[s+(c+=9)]=255&o,r[s+ ++c]=255&m,y(r,s+ ++c,g),w(r,s+(c+=4),b),w(r,s+(c+=2),v),r[s+(c+=2)]=255&N,r[s+ ++c]=a>=255?255:255&a,r[s+ ++c]=255&u>>4,r[s+c+1]=255&(u<<4)+(h>>8),r[s+c+2]=255&h,r[s+(c+=3)]=255&R,c++,r[s+c++]=0,w(r,s+c,e.preset),y(r,s+(c+=2),t),w(r,s+(c+=4),E),c+=2;for(var D=0;D<c;D++)i=A(r[s+D],i);return w(r,s+c,i),c+=2}function R(e){e.seek(0);var t=rn(10);return e.readFully(t),new String(t,"ISO-8859-1").startsWith("ID3")?0:((127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9])+t.length}this.addVbrFrame=function(e){var t=e.internal_flags,n=Tables.bitrate_table[e.version][t.bitrate_index];sn(null!=t.VBR_seek_table.bag),g(t.VBR_seek_table,n)},this.getVbrTag=function(e){var t=new VBRTagData,n=0;t.flags=0;var l=e[n+1]>>3&1,c=e[n+2]>>2&3,u=e[n+3]>>6&3,h=e[n+2]>>4&15;if(h=Tables.bitrate_table[l][h],e[n+1]>>4==14?t.samprate=Tables.samplerate_table[2][c]:t.samprate=Tables.samplerate_table[l][c],!k(e,n+=0!=l?3!=u?36:21:3!=u?21:13))return null;n+=4,t.hId=l;var f=t.flags=v(e,n);if(n+=4,0!=(f&r)&&(t.frames=v(e,n),n+=4),0!=(f&s)&&(t.bytes=v(e,n),n+=4),0!=(f&i)){if(null!=t.toc)for(var d=0;d<a;d++)t.toc[d]=e[n+d];n+=a}t.vbrScale=-1,0!=(f&o)&&(t.vbrScale=v(e,n),n+=4),t.headersize=72e3*(l+1)*h/t.samprate;var p=e[(n+=21)+0]<<4;p+=e[n+1]>>4;var _=(15&e[n+1])<<8;return(p<0||p>3e3)&&(p=-1),((_+=255&e[n+2])<0||_>3e3)&&(_=-1),t.encDelay=p,t.encPadding=_,t},this.InitVbrTag=function(e){var n,r=e.internal_flags;n=1==e.version?u:e.out_samplerate<16e3?f:h,e.VBR==en.vbr_off&&(n=e.brate);var s=72e3*(e.version+1)*n/e.out_samplerate,i=r.sideinfo_len+c;if(r.VBR_seek_table.TotalFrameSize=s,s<i||s>l)e.bWriteVbrTag=!1;else{r.VBR_seek_table.nVbrNumFrames=0,r.VBR_seek_table.nBytesWritten=0,r.VBR_seek_table.sum=0,r.VBR_seek_table.seen=0,r.VBR_seek_table.want=1,r.VBR_seek_table.pos=0,null==r.VBR_seek_table.bag&&(r.VBR_seek_table.bag=new int[400],r.VBR_seek_table.size=400);var o=rn(l);S(e,o);for(var a=r.VBR_seek_table.TotalFrameSize,d=0;d<a;++d)t.add_dummy_byte(e,255&o[d],1)}},this.updateMusicCRC=function(e,t,n,r){for(var s=0;s<r;++s)e[0]=A(t[n+s],e[0])},this.getLameTagFrame=function(e,n){var l=e.internal_flags;if(!e.bWriteVbrTag)return 0;if(l.Class_ID!=un.LAME_ID)return 0;if(l.VBR_seek_table.pos<=0)return 0;if(n.length<l.VBR_seek_table.TotalFrameSize)return l.VBR_seek_table.TotalFrameSize;nn.fill(n,0,l.VBR_seek_table.TotalFrameSize,0),S(e,n);var c=rn(a);if(e.free_format)for(var u=1;u<a;++u)c[u]=255&255*u/100;else b(l.VBR_seek_table,c);var h=l.sideinfo_len;e.error_protection&&(h-=2),e.VBR==en.vbr_off?(n[h++]=255&_.charAt(0),n[h++]=255&_.charAt(1),n[h++]=255&_.charAt(2),n[h++]=255&_.charAt(3)):(n[h++]=255&p.charAt(0),n[h++]=255&p.charAt(1),n[h++]=255&p.charAt(2),n[h++]=255&p.charAt(3)),y(n,h,r+s+i+o),y(n,h+=4,l.VBR_seek_table.nVbrNumFrames),h+=4;var f=l.VBR_seek_table.nBytesWritten+l.VBR_seek_table.TotalFrameSize;y(n,h,0|f),h+=4,Jt.arraycopy(c,0,n,h,c.length),h+=c.length,e.error_protection&&t.CRC_writeheader(l,n);var d=0;for(u=0;u<h;u++)d=A(n[u],d);return h+=T(e,f,n,h,d),l.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,t){if(e.internal_flags.VBR_seek_table.pos<=0)return-1;if(t.seek(t.length()),0==t.length())return-1;var n=R(t);t.seek(n);var r=rn(l),s=getLameTagFrame(e,r);return s>r.length?-1:(s<1||t.write(r,0,s),0)}}on.NUMTOCENTRIES=100,on.MAXFRAMESIZE=2880;var an=on,ln=_.new_byte,cn=_.assert,un=Et,hn=Mt,fn=Le,dn=it,pn=Yt,_n=ht,mn=Wt,gn=ee,bn=vt;function vn(){this.setModules=function(e,t){}}function yn(){this.setModules=function(e,t,n){}}function wn(){}function kn(){this.setModules=function(e,t){}}function xn(e,t,n){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var r=new un,s=new vn,i=new fn,o=new bn,a=new hn,l=new dn,c=new pn,u=new an,h=new Qt,f=new kn,d=new mn,p=new _n,_=new yn,m=new wn;r.setModules(i,o,a,l,c,u,h,f,m),o.setModules(i,m,h,u),f.setModules(o,h),a.setModules(r),c.setModules(o,d,l,p),l.setModules(p,d,r.enc.psy),d.setModules(o),p.setModules(l),u.setModules(r,o,h),s.setModules(_,m),_.setModules(h,f,a);var g=r.lame_init();g.num_channels=e,g.in_samplerate=t,g.brate=n,g.mode=gn.STEREO,g.quality=3,g.bWriteVbrTag=!1,g.disable_reservoir=!0,g.write_id3tag_automatic=!1,r.lame_init_params(g);var b=1152,v=0|1.25*b+7200,y=ln(v);this.encodeBuffer=function(t,n){1==e&&(n=t),cn(t.length==n.length),t.length>b&&(b=t.length,y=ln(v=0|1.25*b+7200));var s=r.lame_encode_buffer(g,t,n,t.length,y,0,v);return new Int8Array(y.subarray(0,s))},this.flush=function(){var e=r.lame_encode_flush(g,y,0,v);return new Int8Array(y.subarray(0,e))}}function Sn(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}Sn("RIFF"),Sn("WAVE"),Sn("fmt "),Sn("data");var An=xn,Tn=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Rn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),En=function(){function e(t){Tn(this,e),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,t),this.mp3Encoder=new An(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return Rn(e,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(e){this.dataBuffer.push(new Int8Array(e))}},{key:"floatTo16BitPCM",value:function(e,t){for(var n=0;n<e.length;n++){var r=Math.max(-1,Math.min(1,e[n]));t[n]=r<0?32768*r:32767*r}}},{key:"convertBuffer",value:function(e){var t=new Float32Array(e),n=new Int16Array(e.length);return this.floatTo16BitPCM(t,n),n}},{key:"encode",value:function(e){this.samplesMono=this.convertBuffer(e);for(var t=this.samplesMono.length,n=0;t>=0;n+=this.maxSamples){var r=this.samplesMono.subarray(n,n+this.maxSamples),s=this.mp3Encoder.encodeBuffer(r);this.appendToBuffer(s),t-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),e}();return function(){function e(t){Tn(this,e),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,t)}return Rn(e,[{key:"addMicrophoneListener",value:function(e){var t=this;this.activeStream=e,this.timerToStart=setTimeout((function(){delete t.timerToStart}),this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(e),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(e){t.timerToStart||t.lameEncoder.encode(e.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&"closed"!==this.context.state&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach((function(e){return e.stop()}))),this}},{key:"start",value:function(){var e=this,t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new En(this.config);var n=!this.config.deviceId||{deviceId:{exact:this.config.deviceId}};return new Promise((function(t,r){navigator.mediaDevices.getUserMedia({audio:n}).then((function(n){e.addMicrophoneListener(n),t(n)})).catch((function(e){r(e)}))}))}},{key:"getMp3",value:function(){var e=this,t=this.lameEncoder.finish();return new Promise((function(n,r){0===t.length?r(new Error("No buffer to send")):(n([t,new Blob(t,{type:"audio/mp3"})]),e.lameEncoder.clearBuffer())}))}}]),e}()}()}(Md);var Bd=Md.exports;function Cd(e){E(e,"svelte-zzaslf","button.svelte-zzaslf{border:none}.attachButton.svelte-zzaslf{cursor:pointer;width:48px;height:48px;box-shadow:1px 2px 5px grey;color:white;margin:0 4px}.audioButton.svelte-zzaslf{background-color:#2e7d32}.audioButton.svelte-zzaslf:hover{transition:0.5s all ease;background-color:#1b5e20}")}function Od(e){let t,n,r,s,i,o;return n=new xn({props:{path:"M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"}}),{c(){t=O("button"),Ne(n.$$.fragment),j(t,"class",r=b(["attachButton audioButton",e[0]].join(" "))+" svelte-zzaslf")},m(r,a){M(r,t,a),Le(n,t,null),s=!0,i||(o=V(t,"click",e[7]),i=!0)},p(e,n){(!s||1&n&&r!==(r=b(["attachButton audioButton",e[0]].join(" "))+" svelte-zzaslf"))&&j(t,"class",r)},i(e){s||(Re(n.$$.fragment,e),s=!0)},o(e){Ee(n.$$.fragment,e),s=!1},d(e){e&&B(t),De(n),i=!1,o()}}}function Pd(e){let t,n,r;return n=new Id({props:{tooltipText:"Áudio",$$slots:{default:[Od]},$$scope:{ctx:e}}}),{c(){t=O("div"),Ne(n.$$.fragment)},m(e,s){M(e,t,s),Le(n,t,null),r=!0},p(e,[t]){const r={};4097&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(Re(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&B(t),De(n)}}}function Nd(e,t,n){let r;f(e,Ue,(e=>n(6,r=e)));let s=null,i=!1,o=!1;const a=ie(),l=([e,t])=>{let n=new File(e,"recording.mp3",{type:t.type,lastModified:Date.now()});xd([n],"audio")};const c=()=>{n(4,i=!0)};function u(){n(4,i=!1)}let h;return e.$$.update=()=>{24&e.$$.dirty&&i&&null===s&&async function(){return new Bd({bitRate:128})}().then((e=>n(3,s=e))),56&e.$$.dirty&&null!==s&&(i?s.start().then((()=>{a("isPlaying",{status:"on"})})).catch((e=>{n(5,o=!0),u()})):o?(s.stop(),(()=>{const e={type:"text",sender:!1,message:{content:"Parece que seu microfone está bloqueado 😢, confira no seu navegador se você deu permissão e atualize a página."},bot:!1};hu.update((t=>[e,...t])),a("permissionDenied",{status:"denied"})})()):s.stop().getMp3().then(l)),64&e.$$.dirty&&n(0,h=fn`border-radius: ${r.shape.textAreaBorderRadius};`)},[h,c,u,s,i,o,r,()=>{c()}]}class Ld extends He{constructor(e){super(),je(this,e,Nd,Pd,a,{stopRecording:2},Cd)}get stopRecording(){return this.$$.ctx[2]}}function Dd(e){E(e,"svelte-1o9xl1n","textarea.svelte-1o9xl1n{position:absolute;width:100%;height:100%;top:0;right:0;resize:none}button.svelte-1o9xl1n{border:none;margin:0;cursor:pointer}.iconButton.svelte-1o9xl1n{border-radius:50%;background-color:transparent}.container.svelte-1o9xl1n{position:relative;margin:0 16px 4px 16px}.buttonDiv.svelte-1o9xl1n{padding:0;background-color:transparent !important;top:0;right:0;z-index:999;position:absolute;height:100%;display:flex;align-content:center;justify-content:center;flex-direction:column}pre.svelte-1o9xl1n,textarea.svelte-1o9xl1n{padding:16px 64px 16px 24px !important;box-sizing:border-box;outline:1px solid #6e777e;border:0;line-height:1.4;overflow:hidden;margin:0 0 0 0;font-size:16px}.attachButton.svelte-1o9xl1n{width:48px;height:48px;box-shadow:1px 2px 5px grey;color:white;margin:0 4px}.imageButton.svelte-1o9xl1n{background-color:#6a1b9a}.imageButton.svelte-1o9xl1n:hover{transition:0.5s all ease;background-color:#4a148c}.fileButton.svelte-1o9xl1n{background-color:#00695c}.fileButton.svelte-1o9xl1n:hover{transition:0.5s all ease;background-color:#004d40}@keyframes svelte-1o9xl1n-beat{from,20%,53%,80%,to{transform:scale(1)}40%,43%{transform:scale(1.5)}70%{transform:scale(1.2)}90%{transform:scale(1.1)}}.animatedDisk.svelte-1o9xl1n{border-radius:50px;background-color:white;height:20px;width:20px;animation:svelte-1o9xl1n-beat 1s ease infinite}.mediaMenuDiv.svelte-1o9xl1n{box-shadow:0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);position:absolute;height:56px;top:-60px;right:24px;display:flex;align-items:center;justify-content:center;background-color:white !important}.classesIconButton.svelte-1o9xl1n{width:56px;height:56px;border-radius:inherit;box-shadow:1px 2px 5px grey;color:white;display:flex;justify-content:center;align-items:center;margin:0;transition:0.2s all ease;outline-offset:0}.classesIconButton.svelte-1o9xl1n:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.4) 0 0)}.classesIconButton.svelte-1o9xl1n:disabled{background-color:grey;color:lightgray}")}function Vd(e){let t,n,r,s,o,a,l,c,u,h,f,d,p,_;r=new Id({props:{tooltipText:"Anexo",forceClose:e[5],$$slots:{default:[jd]},$$scope:{ctx:e}}});let m=!(e[0].image&&e[0].video)&&Hd(e),g=!e[0].audio&&qd(e),v=!e[0].file&&zd(e);return{c(){t=O("div"),n=O("div"),Ne(r.$$.fragment),o=L(),a=O("div"),m&&m.c(),l=L(),g&&g.c(),c=L(),v&&v.c(),j(n,"class",s=b(e[7].themeColor)+" svelte-1o9xl1n"),z(n,"position","absolute"),z(n,"right","60px"),z(n,"top","0"),z(n,"height","100%"),z(n,"display","flex"),z(n,"align-items","center"),j(a,"style",u="visibility: "+(e[5]?"visible":"hidden")),j(a,"class",h=b(["mediaMenuDiv",e[7].mediaMenuDiv].join(" "))+" svelte-1o9xl1n")},m(s,i){M(s,t,i),R(t,n),Le(r,n,null),R(t,o),R(t,a),m&&m.m(a,null),R(a,l),g&&g.m(a,null),R(a,c),v&&v.m(a,null),d=!0,p||(_=[y(f=ci.call(null,t)),V(t,"click_outside",e[28])],p=!0)},p(e,t){const i={};32&t[0]&&(i.forceClose=e[5]),160&t[0]|1&t[1]&&(i.$$scope={dirty:t,ctx:e}),r.$set(i),(!d||128&t[0]&&s!==(s=b(e[7].themeColor)+" svelte-1o9xl1n"))&&j(n,"class",s),e[0].image&&e[0].video?m&&(Ae(),Ee(m,1,1,(()=>{m=null})),Te()):m?(m.p(e,t),1&t[0]&&Re(m,1)):(m=Hd(e),m.c(),Re(m,1),m.m(a,l)),e[0].audio?g&&(Ae(),Ee(g,1,1,(()=>{g=null})),Te()):g?(g.p(e,t),1&t[0]&&Re(g,1)):(g=qd(e),g.c(),Re(g,1),g.m(a,c)),e[0].file?v&&(Ae(),Ee(v,1,1,(()=>{v=null})),Te()):v?(v.p(e,t),1&t[0]&&Re(v,1)):(v=zd(e),v.c(),Re(v,1),v.m(a,null)),(!d||32&t[0]&&u!==(u="visibility: "+(e[5]?"visible":"hidden")))&&j(a,"style",u),(!d||128&t[0]&&h!==(h=b(["mediaMenuDiv",e[7].mediaMenuDiv].join(" "))+" svelte-1o9xl1n"))&&j(a,"class",h)},i(e){d||(Re(r.$$.fragment,e),Re(m),Re(g),Re(v),d=!0)},o(e){Ee(r.$$.fragment,e),Ee(m),Ee(g),Ee(v),d=!1},d(e){e&&B(t),De(r),m&&m.d(),g&&g.d(),v&&v.d(),p=!1,i(_)}}}function jd(e){let t,n,r,s,i,o;return n=new xn({props:{path:"M7.5,18A5.5,5.5 0 0,1 2,12.5A5.5,5.5 0 0,1 7.5,7H18A4,4 0 0,1 22,11A4,4 0 0,1 18,15H9.5A2.5,2.5 0 0,1 7,12.5A2.5,2.5 0 0,1 9.5,10H17V11.5H9.5A1,1 0 0,0 8.5,12.5A1,1 0 0,0 9.5,13.5H18A2.5,2.5 0 0,0 20.5,11A2.5,2.5 0 0,0 18,8.5H7.5A4,4 0 0,0 3.5,12.5A4,4 0 0,0 7.5,16.5H17V18H7.5Z",style:""}}),{c(){t=O("button"),Ne(n.$$.fragment),j(t,"class",r=b(["iconButton",e[7].themeColor].join(" "))+" svelte-1o9xl1n"),z(t,"transform","rotate(270deg)")},m(r,a){M(r,t,a),Le(n,t,null),s=!0,i||(o=V(t,"click",e[20]),i=!0)},p(e,n){(!s||128&n[0]&&r!==(r=b(["iconButton",e[7].themeColor].join(" "))+" svelte-1o9xl1n"))&&j(t,"class",r)},i(e){s||(Re(n.$$.fragment,e),s=!0)},o(e){Ee(n.$$.fragment,e),s=!1},d(e){e&&B(t),De(n),i=!1,o()}}}function Hd(e){let t,n,r,s,i,o,a;return t=new Id({props:{tooltipText:e[0].image?"Vídeos":e[0].video?"Fotos":"Fotos e Vídeos",$$slots:{default:[Fd]},$$scope:{ctx:e}}}),{c(){Ne(t.$$.fragment),n=L(),r=O("input"),j(r,"type","file"),j(r,"accept",s=[...e[0].image?[]:["image/*"],...e[0].video?[]:["video/mp4","video/x-m4v","video/*"]].join(",")),j(r,"id","input-image-video"),z(r,"display","none")},m(s,l){Le(t,s,l),M(s,n,l),M(s,r,l),e[22](r),i=!0,o||(a=V(r,"change",e[23]),o=!0)},p(e,n){const o={};1&n[0]&&(o.tooltipText=e[0].image?"Vídeos":e[0].video?"Fotos":"Fotos e Vídeos"),164&n[0]|1&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),(!i||1&n[0]&&s!==(s=[...e[0].image?[]:["image/*"],...e[0].video?[]:["video/mp4","video/x-m4v","video/*"]].join(",")))&&j(r,"accept",s)},i(e){i||(Re(t.$$.fragment,e),i=!0)},o(e){Ee(t.$$.fragment,e),i=!1},d(s){De(t,s),s&&B(n),s&&B(r),e[22](null),o=!1,a()}}}function Fd(e){let t,n,r,s,i,o;return n=new xn({props:{path:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"}}),{c(){t=O("button"),Ne(n.$$.fragment),j(t,"class",r=b(["attachButton imageButton",e[7].attachButton].join(" "))+" svelte-1o9xl1n")},m(r,a){M(r,t,a),Le(n,t,null),s=!0,i||(o=V(t,"click",e[21]),i=!0)},p(e,n){(!s||128&n[0]&&r!==(r=b(["attachButton imageButton",e[7].attachButton].join(" "))+" svelte-1o9xl1n"))&&j(t,"class",r)},i(e){s||(Re(n.$$.fragment,e),s=!0)},o(e){Ee(n.$$.fragment,e),s=!1},d(e){e&&B(t),De(n),i=!1,o()}}}function qd(e){let t,n;return t=new Ld({props:{}}),e[24](t),t.$on("isPlaying",e[9]),t.$on("permissionDenied",e[10]),{c(){Ne(t.$$.fragment)},m(e,r){Le(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(Re(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(n){e[24](null),De(t,n)}}}function zd(e){let t,n,r,s,i,o;return t=new Id({props:{tooltipText:"Documentos",$$slots:{default:[Ud]},$$scope:{ctx:e}}}),{c(){Ne(t.$$.fragment),n=L(),r=O("input"),j(r,"type","file"),j(r,"id","input-file"),z(r,"display","none")},m(a,l){Le(t,a,l),M(a,n,l),M(a,r,l),e[26](r),s=!0,i||(o=V(r,"change",e[27]),i=!0)},p(e,n){const r={};162&n[0]|1&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){s||(Re(t.$$.fragment,e),s=!0)},o(e){Ee(t.$$.fragment,e),s=!1},d(s){De(t,s),s&&B(n),s&&B(r),e[26](null),i=!1,o()}}}function Ud(e){let t,n,r,s,i,o;return n=new xn({props:{path:"M6,2A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6M6,4H13V9H18V20H6V4M8,12V14H16V12H8M8,16V18H13V16H8Z"}}),{c(){t=O("button"),Ne(n.$$.fragment),j(t,"class",r=b(["attachButton fileButton",e[7].attachButton].join(" "))+" svelte-1o9xl1n")},m(r,a){M(r,t,a),Le(n,t,null),s=!0,i||(o=V(t,"click",e[25]),i=!0)},p(e,n){(!s||128&n[0]&&r!==(r=b(["attachButton fileButton",e[7].attachButton].join(" "))+" svelte-1o9xl1n"))&&j(t,"class",r)},i(e){s||(Re(n.$$.fragment,e),s=!0)},o(e){Ee(n.$$.fragment,e),s=!1},d(e){e&&B(t),De(n),i=!1,o()}}}function Xd(t){let n,r,s,i,o,a;return{c(){n=O("button"),r=O("div"),j(r,"class",s=b(["animatedDisk",t[7].sendIcon].join(" "))+" svelte-1o9xl1n"),j(n,"class",i=b([t[7].iconButton,"classesIconButton"].join(" "))+" svelte-1o9xl1n")},m(e,s){M(e,n,s),R(n,r),o||(a=V(n,"click",t[30]),o=!0)},p(e,t){128&t[0]&&s!==(s=b(["animatedDisk",e[7].sendIcon].join(" "))+" svelte-1o9xl1n")&&j(r,"class",s),128&t[0]&&i!==(i=b([e[7].iconButton,"classesIconButton"].join(" "))+" svelte-1o9xl1n")&&j(n,"class",i)},i:e,o:e,d(e){e&&B(n),o=!1,a()}}}function Yd(e){let t,n,r,s,i,o;return n=new xn({props:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z",style:"color: white",class:e[7].sendIcon}}),{c(){t=O("button"),Ne(n.$$.fragment),j(t,"class",r=b([e[7].iconButton,"classesIconButton"].join(" "))+" svelte-1o9xl1n")},m(r,a){M(r,t,a),Le(n,t,null),s=!0,i||(o=V(t,"click",e[29]),i=!0)},p(e,i){const o={};128&i[0]&&(o.class=e[7].sendIcon),n.$set(o),(!s||128&i[0]&&r!==(r=b([e[7].iconButton,"classesIconButton"].join(" "))+" svelte-1o9xl1n"))&&j(t,"class",r)},i(e){s||(Re(n.$$.fragment,e),s=!0)},o(e){Ee(n.$$.fragment,e),s=!1},d(e){e&&B(t),De(n),i=!1,o()}}}function Kd(e){let t,n,r,s,o,a,l,c,u,h,f,d,p,_,m,g,v=e[4]+"\n",y=0===e[4].length&&!(e[0].image&&e[0].video&&e[0].audio&&e[0].file)&&Vd(e);const w=[Yd,Xd],k=[];function x(e,t){return e[6]?1:0}return f=x(e),d=k[f]=w[f](e),{c(){t=O("div"),n=O("pre"),r=N(v),o=L(),a=O("textarea"),c=L(),y&&y.c(),u=L(),h=O("div"),d.c(),j(n,"aria-hidden","true"),j(n,"class",s=b(e[7].pre)+" svelte-1o9xl1n"),j(a,"placeholder","Digite uma mensagem"),j(a,"class",l=b(e[7].textarea)+" svelte-1o9xl1n"),j(h,"class",p=b(["buttonDiv",e[7].sendButton].join(" "))+" svelte-1o9xl1n"),j(t,"class","container svelte-1o9xl1n")},m(s,i){M(s,t,i),R(t,n),R(n,r),R(t,o),R(t,a),q(a,e[4]),R(t,c),y&&y.m(t,null),R(t,u),R(t,h),k[f].m(h,null),_=!0,m||(g=[V(window,"keydown",e[12]),V(a,"input",e[19])],m=!0)},p(e,i){(!_||16&i[0])&&v!==(v=e[4]+"\n")&&F(r,v),(!_||128&i[0]&&s!==(s=b(e[7].pre)+" svelte-1o9xl1n"))&&j(n,"class",s),(!_||128&i[0]&&l!==(l=b(e[7].textarea)+" svelte-1o9xl1n"))&&j(a,"class",l),16&i[0]&&q(a,e[4]),0!==e[4].length||e[0].image&&e[0].video&&e[0].audio&&e[0].file?y&&(Ae(),Ee(y,1,1,(()=>{y=null})),Te()):y?(y.p(e,i),17&i[0]&&Re(y,1)):(y=Vd(e),y.c(),Re(y,1),y.m(t,u));let o=f;f=x(e),f===o?k[f].p(e,i):(Ae(),Ee(k[o],1,1,(()=>{k[o]=null})),Te(),d=k[f],d?d.p(e,i):(d=k[f]=w[f](e),d.c()),Re(d,1),d.m(h,null)),(!_||128&i[0]&&p!==(p=b(["buttonDiv",e[7].sendButton].join(" "))+" svelte-1o9xl1n"))&&j(h,"class",p)},i(e){_||(Re(y),Re(d),_=!0)},o(e){Ee(y),Ee(d),_=!1},d(e){e&&B(t),y&&y.d(),k[f].d(),m=!1,i(g)}}}function Gd(e,t,n){let r;f(e,Ue,(e=>n(18,r=e)));let s,{blockedMedias:i={image:!1,video:!1,file:!1,audio:!1}}=t,o={},{minRows:a=1}=t,{maxRows:l}=t,c={value:""},u={value:""},h="",d=!1;const p=()=>{""!==h&&(kd({type:"text",message:{content:h},sender:!0,bot:!1}),n(4,h=""))};let _,m,g,b=!1;const v=async(e,t)=>{var r;(null===(r=e.currentTarget.files)||void 0===r?void 0:r.length)>0&&await xd(e.currentTarget.files,t),n(2,u.value="",u),n(1,c.value="",c)};return e.$$set=e=>{"blockedMedias"in e&&n(0,i=e.blockedMedias),"minRows"in e&&n(13,a=e.minRows),"maxRows"in e&&n(14,l=e.maxRows)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(15,o={image:i.image&&i.video,file:i.file,audio:i.audio}),8192&e.$$.dirty[0]&&n(16,_=2.1+1.4*a+"em"),16384&e.$$.dirty[0]&&n(17,m=l?1+1.5*l+"em":"auto"),491520&e.$$.dirty[0]&&n(7,g={iconButton:fn`background-color: ${r.palette.primary.main};outline: ${r.outline?`1px solid ${r.palette.primary.main}`:"unset"};&:hover {outline-offset: ${r.outline?"3px":"0"};}`,textarea:fn`color: ${r.textAreaTextColor};font-family: ${r.fontFamily};border-radius: ${r.shape.textAreaBorderRadius};background-color: ${r.palette.background.textarea} !important;&:focus-visible {outline: 1px solid ${r.palette.primary.main};}`,pre:fn`color: ${r.textAreaTextColor};font-family: ${r.fontFamily};border-radius: ${r.shape.textAreaBorderRadius};min-height: ${_};max-height: ${m}; &:focus-visible {outline: 1px solid ${r.palette.primary.main};}`,themeColor:fn`background-color: ${r.palette.background.textarea} !important;`,sendButton:fn`border-radius: ${r.shape.textAreaBorderRadius};`,sendIcon:fn`color: ${r.buttonIconColor} !important;`,mediaMenuDiv:fn`border-radius: ${r.shape.textAreaBorderRadius};width: ${60*Object.values(o).filter((e=>!1===e)).length}`,attachButton:fn`border-radius: ${r.shape.textAreaBorderRadius};`})},[i,c,u,s,h,d,b,g,p,e=>{"on"===e.detail.status&&(n(6,b=!0),n(5,d=!1))},e=>{"denied"===e.detail.status&&(n(0,i=Object.assign(Object.assign({},i),{audio:!0})),n(5,d=!1))},v,function(e){13!=e.keyCode||e.shiftKey||(e.preventDefault(),p())},a,l,o,_,m,r,function(){h=this.value,n(4,h)},()=>{n(5,d=!d)},()=>{u.click(),n(5,d=!1)},function(e){ce[e?"unshift":"push"]((()=>{u=e,n(2,u)}))},e=>v(e,"image/video"),function(e){ce[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},()=>{c.click(),n(5,d=!1)},function(e){ce[e?"unshift":"push"]((()=>{c=e,n(1,c)}))},e=>v(e,"file"),()=>{n(5,d=!1)},()=>p(),()=>{s.stopRecording(),n(6,b=!1)}]}class Wd extends He{constructor(e){super(),je(this,e,Gd,Kd,a,{blockedMedias:0,minRows:13,maxRows:14},Dd,[-1,-1])}}function Zd(e,{from:t,to:n},r={}){const s=getComputedStyle(e),i="none"===s.transform?"":s.transform,[a,l]=s.transformOrigin.split(" ").map(parseFloat),c=t.left+t.width*a/n.width-(n.left+a),u=t.top+t.height*l/n.height-(n.top+l),{delay:h=0,duration:f=(e=>120*Math.sqrt(e)),easing:d=Tn}=r;return{delay:h,duration:o(f)?f(Math.sqrt(c*c+u*u)):f,easing:d,css:(e,r)=>{const s=r*c,o=r*u,a=e+r*t.width/n.width,l=e+r*t.height/n.height;return`transform: ${i} translate(${s}px, ${o}px) scale(${a}, ${l});`}}}function Qd(e){E(e,"svelte-hy31kx",".fabDiv.svelte-hy31kx{position:fixed;bottom:24px;z-index:9996}.fab.svelte-hy31kx{cursor:pointer;color:white;border:0;border-radius:50%;height:56px;width:56px;display:flex;justify-content:center;align-items:center;box-shadow:0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);transition:all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)}.fab.svelte-hy31kx:hover{box-shadow:0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)}.chatDiv.svelte-hy31kx{position:fixed;margin:0 auto;box-shadow:1px 1px 20px rgba(0, 0, 0, 0.3);z-index:9998;flex-direction:column;transition:all 0.5s ease-in-out}")}function Jd(e,t,n){const r=e.slice();return r[16]=t[n],r}function ep(n,r){let s,i,o,a,l,c,u,h=e;return i=new Pi({props:{type:r[16].type,content:r[16].message.content,fileName:r[16].message.filename,fileId:r[16].message.fileId,sender:r[16].sender}}),{key:n,first:null,c(){s=O("div"),Ne(i.$$.fragment),o=L(),this.first=s},m(e,t){M(e,s,t),Le(i,s,null),R(s,o),u=!0},p(e,t){r=e;const n={};32&t&&(n.type=r[16].type),32&t&&(n.content=r[16].message.content),32&t&&(n.fileName=r[16].message.filename),32&t&&(n.fileId=r[16].message.fileId),32&t&&(n.sender=r[16].sender),i.$set(n)},r(){c=s.getBoundingClientRect()},f(){!function(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:r}=t,s=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,te(e,s)}}(s),h(),te(s,c)},a(){h(),h=function(n,r,s,i){if(!r)return e;const o=n.getBoundingClientRect();if(r.left===o.left&&r.right===o.right&&r.top===o.top&&r.bottom===o.bottom)return e;const{delay:a=0,duration:l=300,easing:c=t,start:u=k()+a,end:h=u+l,tick:f=e,css:d}=s(n,{from:r,to:o},i);let p,_=!0,m=!1;function g(){d&&ee(n,p),_=!1}return T((e=>{if(!m&&e>=u&&(m=!0),m&&e>=h&&(f(1,0),g()),!_)return!1;if(m){const t=0+1*c((e-u)/l);f(t,1-t)}return!0})),d&&(p=J(n,0,1,l,a,c,d)),a||(m=!0),f(0,1),g}(s,c,Zd,{})},i(e){u||(Re(i.$$.fragment,e),pe((()=>{l&&l.end(1),a=Ie(s,r[7],{key:r[16]}),a.start()})),u=!0)},o(e){Ee(i.$$.fragment,e),a&&a.invalidate(),l=Me(s,r[6],{key:r[16]}),u=!1},d(e){e&&B(s),De(i),e&&l&&l.end()}}}function tp(e){let t,n,r=[],s=new Map,i=e[5];const o=e=>e[16];for(let t=0;t<i.length;t+=1){let n=Jd(e,i,t),a=o(n);s.set(a,r[t]=ep(a,n))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=D()},m(e,s){for(let t=0;t<r.length;t+=1)r[t].m(e,s);M(e,t,s),n=!0},p(e,n){if(32&n){i=e[5],Ae();for(let e=0;e<r.length;e+=1)r[e].r();r=function(e,t,n,r,s,i,o,a,l,c,u,h){let f=e.length,d=i.length,p=f;const _={};for(;p--;)_[e[p].key]=p;const m=[],g=new Map,b=new Map;for(p=d;p--;){const e=h(s,i,p),a=n(e);let l=o.get(a);l?r&&l.p(e,t):(l=c(a,e),l.c()),g.set(a,m[p]=l),a in _&&b.set(a,Math.abs(p-_[a]))}const v=new Set,y=new Set;function w(e){Re(e,1),e.m(a,u),o.set(e.key,e),u=e.first,d--}for(;f&&d;){const t=m[d-1],n=e[f-1],r=t.key,s=n.key;t===n?(u=t.first,f--,d--):g.has(s)?!o.has(r)||v.has(r)?w(t):y.has(s)?f--:b.get(r)>b.get(s)?(y.add(r),w(t)):(v.add(s),f--):(l(n,o),f--)}for(;f--;){const t=e[f];g.has(t.key)||l(t,o)}for(;d;)w(m[d-1]);return m}(r,n,o,1,e,i,s,t.parentNode,Oe,ep,t,Jd);for(let e=0;e<r.length;e+=1)r[e].a();Te()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)Re(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ee(r[e]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&B(t)}}}function np(e){let t,n,r,s,i,o,a,l;return r=new xn({props:{path:"M12,3C17.5,3 22,6.58 22,11C22,15.42 17.5,19 12,19C10.76,19 9.57,18.82 8.47,18.5C5.55,21 2,21 2,21C4.33,18.67 4.7,17.1 4.75,16.5C3.05,15.07 2,13.13 2,11C2,6.58 6.5,3 12,3Z"}}),{c(){t=O("div"),n=O("button"),Ne(r.$$.fragment),j(n,"class","fab svelte-hy31kx"),j(n,"style",s=`background-color: ${e[2].palette.primary.main}`),j(t,"class",i=b(["fabDiv",e[4].fabDiv].join(" "))+" svelte-hy31kx")},m(s,i){M(s,t,i),R(t,n),Le(r,n,null),o=!0,a||(l=V(n,"click",e[15]),a=!0)},p(e,r){(!o||4&r&&s!==(s=`background-color: ${e[2].palette.primary.main}`))&&j(n,"style",s),(!o||16&r&&i!==(i=b(["fabDiv",e[4].fabDiv].join(" "))+" svelte-hy31kx"))&&j(t,"class",i)},i(e){o||(Re(r.$$.fragment,e),o=!0)},o(e){Ee(r.$$.fragment,e),o=!1},d(e){e&&B(t),De(r),a=!1,l()}}}function rp(e){let t,n,r,s,i,o,a,l,c,u;n=new Pn({props:{title:"Fale conosco",isOpened:e[0]}}),n.$on("open",e[8]),s=new Vn({props:{$$slots:{default:[tp]},$$scope:{ctx:e}}}),o=new Wd({props:{maxRows:3,minRows:1,blockedMedias:e[3]}});let h=(e[2].fab||e[1])&&np(e);return{c(){t=O("div"),Ne(n.$$.fragment),r=L(),Ne(s.$$.fragment),i=L(),Ne(o.$$.fragment),l=L(),h&&h.c(),c=D(),j(t,"class",a=b([e[4].chatDiv,"chatDiv"].join(" "))+" svelte-hy31kx")},m(e,a){M(e,t,a),Le(n,t,null),R(t,r),Le(s,t,null),R(t,i),Le(o,t,null),M(e,l,a),h&&h.m(e,a),M(e,c,a),u=!0},p(e,[r]){const i={};1&r&&(i.isOpened=e[0]),n.$set(i);const l={};524320&r&&(l.$$scope={dirty:r,ctx:e}),s.$set(l);const f={};8&r&&(f.blockedMedias=e[3]),o.$set(f),(!u||16&r&&a!==(a=b([e[4].chatDiv,"chatDiv"].join(" "))+" svelte-hy31kx"))&&j(t,"class",a),e[2].fab||e[1]?h?(h.p(e,r),6&r&&Re(h,1)):(h=np(e),h.c(),Re(h,1),h.m(c.parentNode,c)):h&&(Ae(),Ee(h,1,1,(()=>{h=null})),Te())},i(e){u||(Re(n.$$.fragment,e),Re(s.$$.fragment,e),Re(o.$$.fragment,e),Re(h),u=!0)},o(e){Ee(n.$$.fragment,e),Ee(s.$$.fragment,e),Ee(o.$$.fragment,e),Ee(h),u=!1},d(e){e&&B(t),De(n),De(s),De(o),e&&B(l),h&&h.d(e),e&&B(c)}}}function sp(e,t,n){let r,s,i,o,a,l,c,u,d;f(e,dn,(e=>n(1,r=e))),f(e,pn,(e=>n(9,s=e))),f(e,_n,(e=>n(10,i=e))),f(e,Ue,(e=>n(2,o=e))),f(e,gu,(e=>n(11,a=e))),f(e,mu,(e=>n(12,l=e))),f(e,fu,(e=>n(13,c=e))),f(e,hu,(e=>n(5,u=e))),f(e,pu,(e=>n(14,d=e)));let p,_=!1;_u.subscribe((e=>{e&&(d?(null==u?void 0:u.length)>0&&Sd({message:u[0],socket:c,user:null==l?void 0:l.user,store:!1}):(async({socket:e,userAuth:t})=>{var n;const r=await(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.getIdToken());r&&(h(du),e.emit("join_room",{firebaseToken:r,agent:!1}))})({socket:c,userAuth:l}))}));const[m,g]=$n({duration:e=>Math.sqrt(200*e),fallback(e,t){const n=getComputedStyle(e),r="none"===n.transform?"":n.transform;return{duration:500,easing:Rn,css:e=>`\n\t\t\t\t\ttransform: ${r} scale(${e});\n\t\t\t\t\topacity: ${e}\n\t\t\t\t`}}});var b;b=async()=>{var e;const t=null!==(e=(await pd.get(`https://chat-server.tykhe.dev/configuracoes/midias?channel=webchat&whtoken=${a}`)).data.configuration.blockMedia)&&void 0!==e?e:[];n(3,p={video:t.includes("video"),image:t.includes("image"),audio:t.includes("audio"),file:t.includes("file")})},re().$$.on_mount.push(b);let v={};return e.$$.update=()=>{if(30720&e.$$.dirty&&!d&&l.isLoggedIn&&!c){const e=Oh("https://chat-server.tykhe.dev",{auth:{token:a}});fu.set(e),Ph({newSocket:e,userAuth:l})}1543&e.$$.dirty&&n(4,v={chatDiv:fn`
      background-color: ${o.palette.background.default};
      border-radius: ${r?0:o.shape.borderRadius}
        ${r?0:o.shape.borderRadius} 0 0;
      max-width: ${r?"100vw":"350px"};
      width: ${r?"100%":"350px"};
      display: ${_?"flex":"block"};
      height: ${_?r?"100vh":"628px":"56px"};
      bottom: ${o.fab&&!_||r&&!_?"-78px":"0"};
      right: ${i?s?r?"0px":"50px":"100px":"200px"};
    `,fabDiv:fn`
      right: ${i?s?r?"24px":"54px":"104px":"204px"};
    `})},[_,r,o,p,v,u,m,g,function(e){n(0,_="open"===e.detail.status)},s,i,a,l,c,d,()=>{n(0,_=!0)}]}class ip extends He{constructor(e){super(),je(this,e,sp,rp,a,{},Qd)}}function op(e){E(e,"svelte-v3xiyv","main.svelte-v3xiyv{padding:1em;max-width:240px;margin:0 auto}@media(min-width: 640px){main.svelte-v3xiyv{max-width:none}}")}function ap(e){let t,n,r,s,i,o;return s=new ip({}),{c(){t=O("main"),n=O("link"),r=L(),Ne(s.$$.fragment),j(n,"rel","stylesheet"),j(n,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),j(t,"class",i=b(e[0])+" svelte-v3xiyv")},m(e,i){M(e,t,i),R(t,n),R(t,r),Le(s,t,null),o=!0},p(e,[n]){(!o||1&n&&i!==(i=b(e[0])+" svelte-v3xiyv"))&&j(t,"class",i)},i(e){o||(Re(s.$$.fragment,e),o=!0)},o(e){Ee(s.$$.fragment,e),o=!1},d(e){e&&B(t),De(s)}}}function lp(e,t,n){let r;f(e,Ue,(e=>n(19,r=e)));let s,{accentColor:i=""}=t,{mainColor:o=""}=t,{backgroundColor:a=""}=t,{textAreaColor:l=""}=t,{receivedBubbleColor:c=""}=t,{sentBubbleColor:u=""}=t,{receivedTextColor:h=""}=t,{sentTextColor:d=""}=t,{borderRadius:p=""}=t,{bubbleBorderRadius:_=""}=t,{textAreaBorderRadius:m=""}=t,{outline:g=!1}=t,{headerTextColor:b=""}=t,{buttonIconColor:v=""}=t,{textAreaTextColor:y=""}=t,{fontFamily:w=""}=t,{token:k=""}=t,{fab:x=!1}=t;return gu.set(k),gu.subscribe((async e=>{if(e)try{(await pd.get(`https://chat-server.tykhe.dev/projetos/validar-token?channel=webchat&whtoken=${e}`)).data.success||console.error("Token do webchat inválido")}catch(e){console.error("Token do webchat inválido")}})),Ue.update((e=>Object.assign(Object.assign({},e),{palette:Object.assign(Object.assign({},e.palette),{primary:Object.assign(Object.assign({},e.palette.primary),{main:""!==i?i:e.palette.primary.main,dark:""!==o?o:e.palette.primary.dark}),bubble:Object.assign(Object.assign({},e.palette.bubble),{sent:""!==u?u:e.palette.bubble.sent,received:""!==c?c:e.palette.bubble.received}),bubbleText:Object.assign(Object.assign({},e.palette.bubbleText),{sent:""!==d?d:e.palette.bubbleText.sent,received:""!==h?h:e.palette.bubbleText.received}),background:Object.assign(Object.assign({},e.palette.background),{default:""!==a?a:e.palette.background.default,textarea:""!==l?l:e.palette.background.textarea})}),shape:Object.assign(Object.assign({},e.shape),{borderRadius:""!==p?p:e.shape.borderRadius,bubbleBorderRadius:""!==_?_:""!==p?p:e.shape.bubbleBorderRadius,textAreaBorderRadius:""!==m?m:""!==p?p:e.shape.textAreaBorderRadius}),outline:g,headerTextColor:""!==b?b:e.headerTextColor,buttonIconColor:""!==v?v:e.buttonIconColor,textAreaTextColor:""!==y?y:e.textAreaTextColor,fontFamily:""!==w?w:e.fontFamily,fab:x}))),e.$$set=e=>{"accentColor"in e&&n(1,i=e.accentColor),"mainColor"in e&&n(2,o=e.mainColor),"backgroundColor"in e&&n(3,a=e.backgroundColor),"textAreaColor"in e&&n(4,l=e.textAreaColor),"receivedBubbleColor"in e&&n(5,c=e.receivedBubbleColor),"sentBubbleColor"in e&&n(6,u=e.sentBubbleColor),"receivedTextColor"in e&&n(7,h=e.receivedTextColor),"sentTextColor"in e&&n(8,d=e.sentTextColor),"borderRadius"in e&&n(9,p=e.borderRadius),"bubbleBorderRadius"in e&&n(10,_=e.bubbleBorderRadius),"textAreaBorderRadius"in e&&n(11,m=e.textAreaBorderRadius),"outline"in e&&n(12,g=e.outline),"headerTextColor"in e&&n(13,b=e.headerTextColor),"buttonIconColor"in e&&n(14,v=e.buttonIconColor),"textAreaTextColor"in e&&n(15,y=e.textAreaTextColor),"fontFamily"in e&&n(16,w=e.fontFamily),"token"in e&&n(17,k=e.token),"fab"in e&&n(18,x=e.fab)},e.$$.update=()=>{524288&e.$$.dirty&&n(0,s=fn`font-family: ${r.fontFamily};`)},[s,i,o,a,l,c,u,h,d,p,_,m,g,b,v,y,w,k,x,r]}let cp=document.createElement("DIV"),up=document.currentScript;up.parentNode.insertBefore(cp,up);let hp=up.getAttribute("accentColor"),fp=up.getAttribute("mainColor"),dp=up.getAttribute("backgroundColor"),pp=up.getAttribute("textAreaColor"),_p=up.getAttribute("receivedBubbleColor"),mp=up.getAttribute("sentBubbleColor"),gp=up.getAttribute("receivedTextColor"),bp=up.getAttribute("sentTextColor"),vp=up.getAttribute("borderRadius"),yp=up.getAttribute("bubbleBorderRadius"),wp=up.getAttribute("textAreaBorderRadius"),kp=up.getAttribute("outline"),xp=up.getAttribute("headerTextColor"),Sp=up.getAttribute("buttonIconColor"),Ap=up.getAttribute("textAreaTextColor"),Tp=up.getAttribute("fontFamily"),Rp=up.getAttribute("fab"),Ep=up.getAttribute("token");new class extends He{constructor(e){super(),je(this,e,lp,ap,a,{accentColor:1,mainColor:2,backgroundColor:3,textAreaColor:4,receivedBubbleColor:5,sentBubbleColor:6,receivedTextColor:7,sentTextColor:8,borderRadius:9,bubbleBorderRadius:10,textAreaBorderRadius:11,outline:12,headerTextColor:13,buttonIconColor:14,textAreaTextColor:15,fontFamily:16,token:17,fab:18},op)}}({target:cp,props:{accentColor:null!==hp?hp:"",mainColor:null!==fp?fp:"",backgroundColor:null!==dp?dp:"",textAreaColor:null!==pp?pp:"",receivedBubbleColor:null!==_p?_p:"",sentBubbleColor:null!==mp?mp:"",receivedTextColor:null!==gp?gp:"",sentTextColor:null!==bp?bp:"",borderRadius:null!==vp?vp:"",bubbleBorderRadius:null!==yp?yp:"",textAreaBorderRadius:null!==wp?wp:"",outline:"true"===kp,headerTextColor:null!==xp?xp:"",buttonIconColor:null!==Sp?Sp:"",textAreaTextColor:null!==Ap?Ap:"",fontFamily:null!==Tp?Tp:"",fab:"true"===Rp,token:null!==Ep?Ep:""}})}();
